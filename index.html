<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"syxdevcode.github.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="syxdevcode博客">
<meta property="og:url" content="https://syxdevcode.github.com/index.html">
<meta property="og:site_name" content="syxdevcode博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="syxdevcode">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://syxdevcode.github.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>syxdevcode博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">syxdevcode博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/syxdevcode" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/02/28/MSS-%E6%9C%80%E5%A4%A7%E6%8A%A5%E6%96%87%E6%AE%B5%E9%95%BF%E5%BA%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/28/MSS-%E6%9C%80%E5%A4%A7%E6%8A%A5%E6%96%87%E6%AE%B5%E9%95%BF%E5%BA%A6/" class="post-title-link" itemprop="url">MSS-最大报文段长度</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-28 17:40:07 / 修改时间：09:53:45" itemprop="dateCreated datePublished" datetime="2021-02-28T17:40:07+00:00">2021-02-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ethernet/" itemprop="url" rel="index"><span itemprop="name">Ethernet</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最大报文段长度（MSS）是TCP协议的一个选项，用于在TCP连接建立时，收发双方协商通信时每一个报文段所能承载的最大数据长度（不包括文段头）。</p>
<h2 id="开放式互联网模型"><a href="#开放式互联网模型" class="headerlink" title="开放式互联网模型"></a>开放式互联网模型</h2><p>开放式系统互联模型（OpenSystemInterconnection Model，简称为OSI模型）是一种互联网概念化模型，由国际标准化组织(InternationalOrganization forStandardization，简称为ISO)提出，定义于ISO/IEC 7498-1。OSI模型将互联网分为七层，由最高层（用户端）到最底层（物理层面）排列为：第7层 应用层（Application Layer）;第6层 表达层（Presentation Layer）；第5层 会话层（Session Layer）；第4层 传输层（Transport Layer）；第3层 网络层（Network Layer）；第2层 数据链接层（Data Link Layer）第1层 物理层（Physical Layer）；本词条MSS是第四层传输层中的一种协议（TCP）的选项之一。</p>
<p><img src="/img/503d269759ee3d6d55fbf8fa925e7a224f4a20a470e3.png" alt="503d269759ee3d6d55fbf8fa925e7a224f4a20a470e3.png"></p>
<h2 id="区分MSS与MTU"><a href="#区分MSS与MTU" class="headerlink" title="区分MSS与MTU"></a>区分MSS与MTU</h2><p>最大报文段长度（MSS）与最大传输单元（Maximum Transmission Unit, MTU）均是协议用来定义最大长度的。不同的是，MTU应用于OSI模型的第二层数据链接层，并无具体针对的协议。MTU限制了数据链接层上可以传输的数据包的大小，也因此限制了上层（网络层）的数据包大小。例如，如果已知某局域网的MTU为1500字节，则在网络层的因特网协议（Internet Protocol, IP）里，最大的数据包大小为1500字节（包含IP协议头）。MSS针对的是OSI模型里第四层传输层的TCP协议。因为MSS应用的协议在数据链接层的上层，MSS会受到MTU的限制。</p>
<p><img src="/img/d009b3de9c82d158ccbfd28051420ed8bc3eb135e4e3.png" alt="d009b3de9c82d158ccbfd28051420ed8bc3eb135e4e3.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/02/28/IP%20Header%E7%BB%93%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/28/IP%20Header%E7%BB%93%E6%9E%84/" class="post-title-link" itemprop="url">IP Header结构</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-28 15:57:12 / 修改时间：09:53:45" itemprop="dateCreated datePublished" datetime="2021-02-28T15:57:12+00:00">2021-02-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ethernet/" itemprop="url" rel="index"><span itemprop="name">Ethernet</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="IP-Header结构"><a href="#IP-Header结构" class="headerlink" title="IP Header结构"></a>IP Header结构</h2><p><img src="/img/2015-04-14-3.jpg" alt="2015-04-14-3.jpg"></p>
<p>参考：</p>
<p><img src="https://abcdxyzk.github.io/blog/2015/04/14/kernel-net-sock-raw/" alt="https://abcdxyzk.github.io/blog/2015/04/14/kernel-net-sock-raw/"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/02/28/%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E5%8C%85%E5%8F%91%E9%80%81%E5%92%8C%E6%8E%A5%E6%94%B6%E8%BF%87%E7%A8%8B%E8%A7%A3%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/28/%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E5%8C%85%E5%8F%91%E9%80%81%E5%92%8C%E6%8E%A5%E6%94%B6%E8%BF%87%E7%A8%8B%E8%A7%A3%E6%9E%90/" class="post-title-link" itemprop="url">网络数据包发送和接收过程解析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-28 13:07:48 / 修改时间：09:53:45" itemprop="dateCreated datePublished" datetime="2021-02-28T13:07:48+00:00">2021-02-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TCP%E5%8D%8F%E8%AE%AE/" itemprop="url" rel="index"><span itemprop="name">TCP协议</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/02/25/Linux%E4%B8%8B%E7%BD%91%E7%BB%9C%E4%B8%A2%E5%8C%85%E6%95%85%E9%9A%9C%E5%AE%9A%E4%BD%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/25/Linux%E4%B8%8B%E7%BD%91%E7%BB%9C%E4%B8%A2%E5%8C%85%E6%95%85%E9%9A%9C%E5%AE%9A%E4%BD%8D/" class="post-title-link" itemprop="url">Linux下网络丢包故障定位</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-25 17:34:08" itemprop="dateCreated datePublished" datetime="2021-02-25T17:34:08+00:00">2021-02-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ethernet/" itemprop="url" rel="index"><span itemprop="name">Ethernet</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>转载：</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/DP0F3Q7TnOixxWZ9-_KA4A">云网络丢包故障定位全景指南</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/29/%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7-Ethernet-Frame/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/29/%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7-Ethernet-Frame/" class="post-title-link" itemprop="url">以太网帧-Ethernet Frame</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-29 17:10:06" itemprop="dateCreated datePublished" datetime="2021-01-29T17:10:06+00:00">2021-01-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ethernet/" itemprop="url" rel="index"><span itemprop="name">Ethernet</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="/img/ethernet-frame.gif" alt="ethernet-frame.gif"></p>
<p>octets：（Bytes）字节<br>Frame：帧</p>
<p><img src="/img/d009b3de9c82d158ccbfd28051420ed8bc3eb135e4e3.png" alt="d009b3de9c82d158ccbfd28051420ed8bc3eb135e4e3.png"></p>
<h2 id="Ethernet帧格式历史"><a href="#Ethernet帧格式历史" class="headerlink" title="Ethernet帧格式历史"></a>Ethernet帧格式历史</h2><p>1980 DEC,Intel,Xerox 制订了 Ethernet I 的标准</p>
<p>1982 DEC,Intel,Xerox 又制订了 Ehternet II 的标准</p>
<p>1982 IEEE 开始研究 Ethernet 的国际标准 802.3</p>
<p>1983 迫不及待的 Novell 基于 IEEE 802.3 的原始版开发了专用的 Ethernet 帧格式 (因此 802.3 Raw 先于 IEEE 802.3 出台.)</p>
<p>1985 IEEE 推出 IEEE 802.3 规范,</p>
<p>后来为解决 Ethernet II 与 802.3 帧格式 的兼容问题,推出折衷的 Ethernet SNAP 格式</p>
<p>(其中早期的 Ethernet I 已经完全被其他帧格式取代了 ,所以现在 Ethernet 只能见到后面几种 Ethernet的帧格式,现在大部分的网络设备都支持这几种 Ethernet 的帧格式,如:cisco 的路由器再设定 Ethernet 接口时可以指定不同的以太网的帧格式:arpa,sap,snap,novell-ether)</p>
<p>今天的实际环境中大多数TCP/IP设备都使用Ethernet V2格式的帧。<br>这是因为第一种大规模使用的TCP/IP系统(4.2/3 BSD UNIX)的出现时间介于RFC 894和RFC 1042之间，<br>它为了避免不能和别的主机互操作的风险而采用了RFC 894的实现；<br>也由于大家都抱着这种想法，所以 802.3 标准并没有如预期那样得到普及；</p>
<p>CISCO设备的Ethernet Interface默认封装格式是ARPA(Ethernet V2)</p>
<p><strong>不同厂商对这几种帧格式不同的叫法</strong></p>
<table>
<thead>
<tr>
<th align="left">Frame Type</th>
<th align="left">Novell公司</th>
<th align="left">Cisco 公司</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Ethernet Version 2</td>
<td align="left">Ethernet_II</td>
<td align="left">arpa</td>
</tr>
<tr>
<td align="left">802.3 Raw</td>
<td align="left">Ethernet_802.3</td>
<td align="left">novell_ether</td>
</tr>
<tr>
<td align="left">IEEE 802.3/802.2</td>
<td align="left">Ethernet_802.2</td>
<td align="left">sap</td>
</tr>
<tr>
<td align="left">IEEE 802.3/802.2 SNAP</td>
<td align="left">ETHERNET_SNAP</td>
<td align="left">snap</td>
</tr>
</tbody></table>
<h2 id="帧格式"><a href="#帧格式" class="headerlink" title="帧格式"></a>帧格式</h2><h3 id="Ethernet-I-V1"><a href="#Ethernet-I-V1" class="headerlink" title="Ethernet I (V1)"></a>Ethernet I (V1)</h3><p>这是最原始的一种格式，是由 Xerox PARC 提出的 3Mbps CSMA/CD 以太网标准的封装格式，<br>后来在1980年由 DEC，Intel 和 Xerox 标准化形成 Ethernet V1 标准；</p>
<h3 id="Ethernet-II-V2-ARPA"><a href="#Ethernet-II-V2-ARPA" class="headerlink" title="Ethernet II (V2) (ARPA)"></a>Ethernet II (V2) (ARPA)</h3><p>这是最常见的一种以太网帧格式，也是今天以太网的事实标准，由DEC，Intel 和Xerox [简称 DIX以太网联盟] 在1982年公布其标准，主要更改了Ethernet V1 的电气特性和物理接口， 在帧格式上并无变化；Ethernet V2 出现后迅速取代 Ethernet V1 成为以太网事实标准；</p>
<p>Ethernet V2 帧头（Frame Header）结构为： 6bytes的源地址（源MAC） + 6bytes的目标地址（目标MAC） + 2Bytes协议类型字段（用于标示封装在这个 Frame 里面数据的类型)，<br>数据长度 46–1500 Bytes，4Bytes的帧校验。</p>
<p>Ethernet V2 类型以太网帧的最小长度为64字节（6＋6＋2＋46＋4），最大长度为1518字节（6＋6＋2＋1500＋4）。</p>
<p>常见协议类型如下：</p>
<p>0x0800 　　IP协议数据，<br>0x86dd 　　IPv6协议数据，<br>0x809B 　　AppleTalk协议数据，<br>0x8138 　　Novell类型协议数据等。<br>0x0806 　　ARP<br>0x0600 　　XNS (Xerox)<br>0x6003 　　DECNET</p>
<p>如果协议类型字段取值为0000-05dc(十进制的0-1500)，则该帧就不是 Ethernet V2(ARPA) 类型了，而是下面的三种 802.3帧 类型之一；</p>
<p>Ethernet V2 可以支持 TCP/IP，Novell IPX/SPX，Apple Talk Phase I 等协议；RFC 894 定义了IP报文在Ethernet V2 上的封装格式；</p>
<h3 id="Novell-Ethernet-（802-3-Raw）-novell-ether"><a href="#Novell-Ethernet-（802-3-Raw）-novell-ether" class="headerlink" title="Novell Ethernet （802.3 Raw） novell_ether"></a>Novell Ethernet （802.3 Raw） novell_ether</h3><p>这是1983年 Novell 发布其划时代的 Netware/86 网络套件时，采用的私有以太网帧格式，该格式以当时尚未正式发布的 802.3 标准为基础；</p>
<p>但是当两年以后 IEEE正式发布 802.3 标准时情况发生了变化 — IEEE 在802.3帧头中又加入了802.2 LLC(Logical Link Control)头，这使得 Novell 的 802.3 RAW 格式跟正式的 IEEE 802.3 标准互不兼容；可以看到在 Novell 的 RAW 802.3 帧结构中并没有标志协议类型的字段，而只有 Length 字段(2bytes,取值为0000-05dc，即十进制的0-1500)，因为 RAW 802.3帧 只支持 IPX/SPX 一种协议；</p>
<p>802.3 Raw 帧头与 Ethernet 帧头有所不同，其中 Ethernet II 帧头中的类型域变成了长度域，后面接着的两个字节为 0xFFFF,用于标示这个帧是 Novell Ether 类型的 Frame,由于前面的 0xFFFF 站掉了两个字节所以数据域缩小为 44-1498 个字节,帧校验不变。</p>
<p><img src="/img/802.3_Raw.png" alt="802.3Raw.png"></p>
<ul>
<li>目标地址：此数据包的目标MAC地址。</li>
<li>源地址：此数据包的源MAC地址。</li>
<li>长度：帧包含的数量必须或等于 1500。(在 Ethernet 802.3 raw 类型以太网帧中，原来 Ethernet II 类型以太网帧中的类型字段被”总长度”字段所取代，它指明其后数据域的长度，其取值范围为：46-1500。)</li>
<li>数据：高层协议（IPX/SPX）、数据和填充符，范围在46～1500字节。(长度紧跟着的接下来的2个字节是固定不变的16进制数 0xFFFF，它标识此帧为 Novell 以太类型数据帧。)</li>
<li>FCS：数据帧校验序列，用于确定数据包在传输过程中是否损坏。</li>
</ul>
<h3 id="IEEE-802-3-802-2-LLC-Logical-Link-Control-sap"><a href="#IEEE-802-3-802-2-LLC-Logical-Link-Control-sap" class="headerlink" title="IEEE 802.3/802.2 LLC (Logical Link Control),sap"></a>IEEE 802.3/802.2 LLC (Logical Link Control),sap</h3><p>这是IEEE 正式的 802.3 标准，它由 Ethernet V2 发展而来。</p>
<p>IEEE 802.3 的 Frame Header 和 Ethernet II 的帧头有所不同,IEEE 802.3 将 Ethernet V2 帧头的协议类型字段替换为帧长度字段(取值为0000-05dc;十进制的1500)。</p>
<p>其中又引入 802.2 协议(LLC,Logical Link Control) 在 802.3 帧头后面添加了一个 LLC 首部,LLC头包含目的 服务访问点(DSAP,Destination Service Access Point)、源服务访问点（SSAP,Source Service Access Point）和 控制（Control）字段。</p>
<p>IEEE 802.3 把 DLC (数据链路控制，Digital Loop Carrier) 层分隔成明显的两个子层：MAC 层和 LLC 层，其中 MAC 层主要是指示硬件目的地址和源地址，LLC层用来提供一些服务：</p>
<ul>
<li>通过SAP地址来辨别接收和发送方法</li>
<li>兼容无连接和面向连接服务</li>
<li>提供子网访问协议（Sub-network Access Protocol，SNAP），类型字段即由它的首部给出。</li>
</ul>
<p>MAC层要保证最小帧长度不小于64字节，如果数据不满足64字节长度就必须进行填充。</p>
<p>利用 Sniffer 等协议分析工具去捕获的 IEEE 802.3 帧的解码，可以看到在 DLC 层源地址后紧跟着就是 802.3 的长度（Length）字段 0026，它小于 05FF（二进制1535），可以肯定它不是 Ethernet V2 的帧，而接下来的 Offset 0E 处的值 4242 （代表DSAP和SSAP），既不是 Novell 802.3 Raw 的特征值 FFFF ，也不是 IEEE 802.3 SNAP 的特征值 AAAA ，因此它肯定是一个 IEEE 802.3 的帧。</p>
<p>以太网类型码：</p>
<p><img src="/img/ETHERNET_type_code.png" alt="ETHERNET_type_code.png"></p>
<p>decimal：十进制<br>octal：八进制</p>
<p><strong>802.2 SAP (Service Access Point) 介绍</strong></p>
<p>为了区别 802.3 数据帧中所封装的数据类型，IEEE 引入了 802.2 SAP 和 SNAP 的标准。它们工作在数据链路层的 LLC（逻辑链路控制）子层。</p>
<p>通过在802.3帧的数据字段中划分出被称为服务访问点（SAP）的新区域来解决识别上层协议的问题，这就是 802.2 SAP。</p>
<p><strong>LLC标准 介绍</strong></p>
<p>LLC 标准包括两个服务访问点，源服务访问点（SSAP）和目标服务访问点（DSAP）。每个SAP只有1字节长，而其中仅保留了6比特用于标识上层协议，所能标识的协议数有限。</p>
<p>因此，又开发出另外一种解决方案，在 802.2 SAP 的基础上又新添加了一个 2字节长的类型域（同时将SAP的值置为AA），使其可以标识更多的上层协议类型，这就是 802.2 SNAP。</p>
<p>常见SAP值：</p>
<ul>
<li>0：Null LSAP[IEEE] </li>
<li>4：SNA Path Control[IEEE] </li>
<li>6：DOD IP[79,JBP] </li>
<li>AA：SNAP[IEEE] </li>
<li>FE：ISO DIS 8473[52,JXJ] </li>
<li>FF：Global DSAP[IEEE]</li>
</ul>
<p><img src="/img/IEEE_802.3.png" alt="IEEE_802.3.png"></p>
<ul>
<li>目标地址：此数据包的目标mac地址；</li>
<li>源地址：此数据包的源mac地址；</li>
<li>长度：帧包含的数据量必须小于或等于1500（16进制的05DC）；</li>
<li>DSAP：目标服务存取点（Destination  Service Access Point）；</li>
<li>SSAP：源服务存取点（Source Service Access  Point）；</li>
<li>控制：无连接或面向连接的C；</li>
<li>数据：高层协议、数据和填充符;</li>
<li>FCS：数据帧校验序列，用于确定数据包在传输过程中是否损坏。</li>
</ul>
<h3 id="Ethernet-SNAP-IEEE-802-3-802-2-SNAP-ETHERNET-SNAP-snap"><a href="#Ethernet-SNAP-IEEE-802-3-802-2-SNAP-ETHERNET-SNAP-snap" class="headerlink" title="Ethernet SNAP (IEEE 802.3/802.2 SNAP, ETHERNET_SNAP, snap)"></a>Ethernet SNAP (IEEE 802.3/802.2 SNAP, ETHERNET_SNAP, snap)</h3><p>SNAP (Sub-Network Access Protocol)子网访问协议，是逻辑链路控制（Logical Link Control）的一个子集，它允许协议不用通过 服务访问点（SAP）即可实现 IEEE 兼容的 MAC 层功能，因此它在 DSAP 和 SSAP域里的值是固定的 （AAAA）。也正源于此，它需要额外提供5个字节的头来指定接收方法，3个字节标识厂商代码，2个字节标识上层协议。</p>
<p>其 MAC 层保证数据帧长度不小于64字节，不足的话需要进行数据填充。</p>
<p>Sniffer 捕获的 IEEE 802.3 SNAP 帧的解码，可以看到在 DLC 层源地址后紧跟着就是 802.3 的长度（Length）字段 0175，它小于 05FF，可以肯定它不是 Ethernet V2 的帧，而接下来的 Offset 0E 处的值 AAAA （代表DSAP和SSAP），这是 IEEE 802.3 SNAP 的特征值 AAAA ，因此可以断定它是一个 IEEE 802.3 SNAP 的帧。</p>
<p>SNAP Frame 与 802.3/802.2 Frame 的最大区别是增加了一个 5 Bytes 的 SNAP ID，其中前面3个byte通常与源mac地址的前三个bytes相同为厂商代码，有时也可设为0,后2 bytes 与 Ethernet II 的类型域相同。</p>
<p><img src="/img/ETHERNET_SNAP.png" alt="ETHERNET_SNAP.png"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><table>
<thead>
<tr>
<th align="left">Frame Type</th>
<th align="left">Header &amp; CRC</th>
<th align="left">Data Min</th>
<th align="left">Data Max</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Ethernet II (DIX)</td>
<td align="left">18</td>
<td align="left">46</td>
<td align="left">1500</td>
</tr>
<tr>
<td align="left">802.3 (IEEE)</td>
<td align="left">21</td>
<td align="left">43</td>
<td align="left">1497</td>
</tr>
<tr>
<td align="left">SNAP</td>
<td align="left">26</td>
<td align="left">38</td>
<td align="left">1492</td>
</tr>
</tbody></table>
<ul>
<li>Ethernet II 和 IEEE 802.3 是局域网里最常见的帧</li>
<li>Ethernet II 可以装载的数据长度是46—1500;  </li>
<li>IEEE802.3 SAP 可以装装的数据长度是43—1497; </li>
<li>IEEE 802.3 SNAP 可以装载的数据长度是38—1492；</li>
<li>Ethernet II 不提供 MAC 层的数据填充功能;</li>
<li>IEEE802.3 SAP 和 SNAP 都提供数据填充功能.</li>
</ul>
<p><strong>Ethernet V2 帧与IEEE 802.3 帧的比较</strong></p>
<p>Ethernet V2 可以装载的最大数据长度是1500字节，而 IEEE 802.3 可以装载的最大数据是1492字节（SNAP）或是1497字节; Ethernet V2 不提供 MAC层 的数据填充功能，而 IEEE 802.3 不仅提供该功能，还具备服务访问点（SAP）和 SNAP 层，能够提供更有效的数据链路层控制和更好的传输保证。那么我们可以得出这样的结 论：Ethernet V2 比 IEEE 802.3 更适合于传输大量的数据，但 Ethernet V2 缺乏数据链路层的控制，不利于传输需要严格传输控制的数据，这也正是 IEEE 802.3 的优势所在，越需要严格传输控制的应用，越需要用 IEEE 802.3或 SNAP 来封装，但 IEEE 802.3 也不可避免的带来数据装载量的损失，因此该格式的封装往往用在较少数据量承载但又需要严格控制 传输的应用中。</p>
<p>在实际应用中，我们会发现，大多数应用的以太网数据包是 Ethernet V2 的帧（如HTTP、FTP、SMTP、POP3等应用），而交换机之间的BPDU（桥协议数据单元）数据包则是IEEE 802.3的帧，VLAN Trunk 协议如 802.1Q 和Cisco的CDP（思科发现协议）等则是采用 IEEE 802.3 SNAP 的帧。可以利用Sniffer等协议分析工具去捕捉数据包。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/guoshaobei/article/details/4768514">以太网帧与ieee 802.3帧</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yshe_xun/article/details/7636078">以太网类型码(Ethernet type codes)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xlmeng1988/articles/2445619.html">Ethernet frame</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/mylinux/p/5553242.html">ETHERNET帧结构</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/21318925">车小胖谈网络：Ethernet Frame</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/29/%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A3%80%E9%AA%8C%E7%AE%97%E6%B3%95%EF%BC%88CRC%EF%BC%89%E4%B8%8E%E5%B8%A7%E6%A3%80%E9%AA%8C%E5%BA%8F%E5%88%97-FCS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/29/%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A3%80%E9%AA%8C%E7%AE%97%E6%B3%95%EF%BC%88CRC%EF%BC%89%E4%B8%8E%E5%B8%A7%E6%A3%80%E9%AA%8C%E5%BA%8F%E5%88%97-FCS/" class="post-title-link" itemprop="url">循环冗余检验算法（CRC）与帧检验序列(FCS)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-29 16:38:55" itemprop="dateCreated datePublished" datetime="2021-01-29T16:38:55+00:00">2021-01-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ethernet/" itemprop="url" rel="index"><span itemprop="name">Ethernet</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>循环冗余检验CRC是一种检验方法，而FCS是添加在数据后面的帧检验序列。CRC 检验只能保证接收端接收到的帧没有差错，至于有没有出现帧丢失，帧重复，帧失序，是无法判断的。</p>
<h2 id="CRC"><a href="#CRC" class="headerlink" title="CRC"></a>CRC</h2><p>循环冗余校验（Cyclic Redundancy Check， CRC）是一种根据网络数据包或计算机文件等数据产生简短固定位数校验码的一种信道编码技术（算法），主要用来检测或校验数据传输或者保存后可能出现的错误。它是利用除法及余数的原理来作错误侦测的。</p>
<h2 id="FCS"><a href="#FCS" class="headerlink" title="FCS"></a>FCS</h2><p>帧校验序列码 FCS ( Frame Check Sequences) 是为提高通信的可靠性设置的。将每一帧中的第一个字符@到该帧中正文的最后一个ASCII 字符作“异或”运算, 并将异或的结果转换为两个ASCII码, 便得到了FCS , 它作为帧的一部分发送到接收端。接收端计算出收到的帧的FCS , 如果与发送端传送过来的FCS 不同, 可以判定通信有误。</p>
<p>帧校验序列（FCS）是指特别的检测码字符被添加到在一个通信协议中的帧中进行检错和纠错。发送主机在整个帧中有一个检测码随着发送。接收主机在整个帧中的检测码使用相同的运算法则，并将它与接收到的 FCS 相比较。这样，它能够探测是否任何数据在运输中丢失或被改变。它可能当时丢失这个数据，和请求错误帧的重传。一个循环冗余码校验常被用来估算 FCS。</p>
<p>FCS 字段：包含帧的 32 位循环冗余校验 (CRC), 数据链路层帧方式接入协议（LAPF）中的字段，是一个16比特的序列。它具有很强的检错能力，它能检测出在任何位置上的 3 个以内的错误、所有的奇数个错误、16个比特之内的连续错误以及大部分的大量突发错误。</p>
<p><img src="/img/ethernet-frame.gif" alt="ethernet-frame.gif"></p>
<p>octets：（Bytes）字节<br>Frame：帧</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/loveCC_orange/article/details/79127809">循环冗余检验算法（CRC）与帧检验序列(FCS)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lxm920714/article/details/103274092">帧检验序列(FCS)</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/29/MTU-%E6%9C%80%E5%A4%A7%E4%BC%A0%E8%BE%93%E5%8D%95%E5%85%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/29/MTU-%E6%9C%80%E5%A4%A7%E4%BC%A0%E8%BE%93%E5%8D%95%E5%85%83/" class="post-title-link" itemprop="url">MTU-最大传输单元</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-29 14:24:29" itemprop="dateCreated datePublished" datetime="2021-01-29T14:24:29+00:00">2021-01-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ethernet/" itemprop="url" rel="index"><span itemprop="name">Ethernet</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>最大传输单元</strong>（Maximum Transmission Unit，MTU）用来通知对方所能接受数据服务单元的最大尺寸，说明发送方能够接受的有效载荷大小。<br>是包或帧的最大长度，一般以字节记。如果MTU过大，在碰到路由器时会被拒绝转发，因为它不能处理过大的包。如果太小，因为协议一定要在包(或帧)上加上包头，那实际传送的数据量就会过小，这样也划不来。大部分操作系统会提供给用户一个默认值，该值一般对用户是比较合适的。</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>以太网和802.3对数据帧的长度都有一个限制，其最大值分别是1500字节和1492字节。链路层的这个特性称为MTU，即最大传输单元。不同类型网络的数帧长度大多数都有一个上限。如果IP层有一个数据报要传，而且数据帧的长度比链路层的MTU还大，那么IP层就需要进行分片( fragmentation)，即把数据报分成干片，这样每一片就都小于MTU。 </p>
<p>当同一个网络上的两台主机互相进行通信时，该网络的MTU是非常重要。但是如果两台主机之间的通信要通过多个网络，每个网络的链路层可能有不同的MTU，那么这时重要的不是两台主机所在网络的MTU的值，而是两台主机通信路径中的最小MTU，称为 路径 MTU( Path mtu，PMTU)。</p>
<p>两台主机之间的PMTU不一定是个常数，它取决于当时所选择的路径，而且路由选择也不一定是对称的(从A到B的路由可能与从B到A的路由不同)，因此，PMTU在两个方向上不一定是一致的。<br>RFC1191描述了PMTU的发现机制，即确定路径MTU的方法。ICMP的不可到达错误采用的就是这种方法， traceroute程序也是用这种方法来确定到达目的节点的PMT的。</p>
<h2 id="MTU字节"><a href="#MTU字节" class="headerlink" title="MTU字节"></a>MTU字节</h2><p>在远端节点的配置响应中将包含在该信道使用的实际的MTU大小，信道的方向是流向本地节点，MTU值取在configReq中的MTU和远端节点的输出MTU能力中最小值。该MTU只能用于这个信道，不能用于相反方向的信道。<br>MTU字段：2个字节。</p>
<p>MTU字段表示发起请求方可以接受的最大的L2CAP分组净荷(按字节计)。MTU是非对称的，请求的发送方指定在该信道上它可以接收的MTU值。L2CAP的实现必须支持最小的48字节的MTU值。缺省值是672字节。</p>
<h2 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h2><p>MTU是网络调节的重要因素，因为包中的额外开销量相当高。高的MTU减少了头信息浪费的字节数。对大量数据传输尤其重要，而对小于MTU的传输没有影响。因此，注意配置传输大量数据流的服务器(如文件服务器和FTPH&amp;．务器)上的MTU。</p>
<p>选择MTU时，规则是选择传输中不需分段的最大MTU。如果网络使用一种媒体类型，缺省的设置就可以。选择比媒体最大值更小的MTU并没有好处，整个数据报会因为每个包的错误而重发。换言之，不能重发单个段。</p>
<h2 id="IP分片与重组"><a href="#IP分片与重组" class="headerlink" title="IP分片与重组"></a>IP分片与重组</h2><p>数据链路不同，最大传输单元( Maximum transmission Unit，MTU)也不同，由于IP协议是数据链路的上一层，所以它必须不受数据链路的MTU大小的影响能够加以利用。当IP数据报太大时，就要采用分片技术，以保证数据帧不大于要过的网络的MTU。</p>
<p>IP协议除了具有路由寻址功能外，另一个重要的功能就是IP数据报的分片处理。每个数据链路层能够确定发送的一个帧的最大长度称为最大传输单元。在Ethernet中，MTU为1500字节;在FDDI中，MTU为4352字节;在 IP over ATM中，MTU为9180字节。</p>
<p>如果要发送的IP数据报比数据链路层的MTU大，则无法发送该数据报。对于来自于上一层的IP协议，当要求发送的IP数据报比数据链路层的MTU大时，必把该数据报分割成多个IP数据报才能发送。另外，在进行通信的各台主机之间，存在着MTU不同的数据链路;在发送的过程中，也有MTU缩小的情况发生。当出现上述情况时，在发送过程中必须有一台能够进行分片处理的路由器。</p>
<p>接收端主机必须对经过分片处理后的IP数据报进行还原处理。在中继路由器中，虽然路由器进行了分片处理，但并不进行还原处理。另外，经分片处理的IP数据报只有经过还原处理后才能还原成原来的IP数据报，才可以向上一层的模块传递数据。</p>
<p><img src="/img/d009b3de9c82d158ccbfd28051420ed8bc3eb135e4e3.png" alt="d009b3de9c82d158ccbfd28051420ed8bc3eb135e4e3.png"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%9C%80%E5%A4%A7%E4%BC%A0%E8%BE%93%E5%8D%95%E5%85%83/9730690?fromtitle=mtu&fromid=508920">最大传输单元</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/29/%E6%9F%A5%E7%9C%8BLinux%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/29/%E6%9F%A5%E7%9C%8BLinux%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC/" class="post-title-link" itemprop="url">查看Linux系统版本</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-29 13:57:29" itemprop="dateCreated datePublished" datetime="2021-01-29T13:57:29+00:00">2021-01-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="查看Linux内核版本"><a href="#查看Linux内核版本" class="headerlink" title="查看Linux内核版本"></a>查看Linux内核版本</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/version</span><br><span class="line">uname -a</span><br></pre></td></tr></table></figure>
<h2 id="查看Linux系统版本"><a href="#查看Linux系统版本" class="headerlink" title="查看Linux系统版本"></a>查看Linux系统版本</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这个命令适用于所有的Linux发行版，包括RedHat、SUSE、Debian…等发行版。</span></span><br><span class="line"><span class="comment"># 如果未安装，需要命令：yum install redhat-lsb -y</span></span><br><span class="line">lsb_release -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只适合Redhat系的Linux</span></span><br><span class="line">cat /etc/redhat-release</span><br><span class="line">file /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 适用于所有的Linux发行版</span></span><br><span class="line">cat /etc/issue</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/18/Git%E5%8F%96%E6%B6%88%E6%96%87%E4%BB%B6%E8%B7%9F%E8%B8%AA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/18/Git%E5%8F%96%E6%B6%88%E6%96%87%E4%BB%B6%E8%B7%9F%E8%B8%AA/" class="post-title-link" itemprop="url">Git取消文件跟踪</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-18 10:05:02" itemprop="dateCreated datePublished" datetime="2021-01-18T10:05:02+00:00">2021-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached .  <span class="comment"># 不删除本地文件</span></span><br><span class="line">git rm -r --f . 　　  <span class="comment"># 删除本地文件</span></span><br><span class="line">git rm --cached 1.txt  <span class="comment"># 删除readme1.txt的跟踪，并保留在本地。</span></span><br><span class="line">git rm --f 1.txt    <span class="comment"># 删除readme1.txt的跟踪，并且删除本地文件。</span></span><br></pre></td></tr></table></figure>
<p>已经被纳入了版本管理中，则修改 <code>.gitignore</code> 是无效的。</p>
<p>解决方法就是先把本地缓存删除（改变成未track状态），然后再提交：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached .</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交暂存区到本地仓库中</span></span><br><span class="line">git commit -m <span class="string">&#x27;update .gitignore&#x27;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/16/Python3%E5%AD%A6%E4%B9%A0-%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/16/Python3%E5%AD%A6%E4%B9%A0-%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">Python3学习-函数</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-16 15:22:55" itemprop="dateCreated datePublished" datetime="2021-01-16T15:22:55+00:00">2021-01-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python3/" itemprop="url" rel="index"><span itemprop="name">Python3</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h2><p>自定义函数规则：</p>
<ul>
<li>函数代码块以 def 关键词开头，后接函数标识符名称和圆括号 ()。</li>
<li>任何传入参数和自变量必须放在圆括号中间，圆括号之间可以用于定义参数。</li>
<li>函数的第一行语句可以选择性地使用文档字符串—用于存放函数说明。</li>
<li>函数内容以冒号 : 起始，并且缩进。</li>
<li>return [表达式] 结束函数，选择性地返回一个值给调用方，不带表达式的 return 相当于返回 None。</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> 函数名(<span class="params">参数</span>):</span></span><br><span class="line">	函数体</span><br><span class="line">	<span class="keyword">return</span> 返回值</span><br><span class="line"></span><br><span class="line"><span class="comment"># 空函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> 函数名():</span></span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不确定参数的个数,使用不定长参数，在参数名前加 * 进行声明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> 函数名(<span class="params">*参数名</span>):</span></span><br><span class="line">	函数体</span><br><span class="line"></span><br><span class="line"><span class="comment"># lambda 定义匿名函数</span></span><br><span class="line"><span class="keyword">lambda</span> 参数 : 表达式</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 空函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_empty</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 无返回值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testprint</span>(<span class="params">name</span>):</span></span><br><span class="line">    print(<span class="string">&#x27;Hello&#x27;</span>, name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 有返回值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_sum</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    s = x + y</span><br><span class="line">    print(<span class="string">&#x27;s--&gt;&#x27;</span>, s)</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 不定长参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_variable</span>(<span class="params">*params</span>):</span></span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> params:</span><br><span class="line">        print(p)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匿名函数</span></span><br><span class="line">test_sub = <span class="keyword">lambda</span> x, y: x - y</span><br></pre></td></tr></table></figure>
<h2 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testprint</span>(<span class="params"> <span class="built_in">str</span> </span>):</span></span><br><span class="line">   <span class="comment"># 打印任何传入的字符串</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="built_in">str</span>)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">testprint(<span class="string">&quot;调用自定义函数!&quot;</span>)</span><br><span class="line">testprint(<span class="string">&quot;再次调用同一函数&quot;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h2><p>在 python 中，类型属于对象，变量是没有类型的</p>
<p><strong>可更改(mutable)与不可更改(immutable)对象</strong></p>
<p>在 python 中，strings, tuples, 和 numbers 是不可更改的对象，而 list,dict 等则是可以修改的对象。</p>
<ul>
<li>不可变类型：变量赋值 a=5 后再赋值 a=10，这里实际是新生成一个 int 值对象 10，再让 a 指向它，而 5 被丢弃，不是改变 a 的值，相当于新生成了 a。</li>
<li>可变类型：变量赋值 la=[1,2,3,4] 后再赋值 la[2]=5 则是将 list la 的第三个元素值更改，本身la没有动，只是其内部的一部分值被修改了。</li>
</ul>
<p>python 函数的参数传递：</p>
<ul>
<li>不可变类型：类似 C++ 的值传递，如 整数、字符串、元组。如 fun(a)，传递的只是 a 的值，没有影响 a 对象本身。如果在 fun(a)）内部修改 a 的值，则是新生成来一个 a。</li>
<li>可变类型：类似 C++ 的引用传递，如 列表，字典。如 fun(la)，则是将 la 真正的传过去，修改后 fun 外部的 la 也会受影响</li>
</ul>
<p><strong>函数调用可以使用关键字参数来确定传入的参数值，并且不需要使用指定顺序：</strong></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testprint</span>(<span class="params"><span class="built_in">str</span></span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的字符串&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="built_in">str</span>)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#调用testprint函数</span></span><br><span class="line">testprint( <span class="built_in">str</span> = <span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不需要使用指定顺序</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testprint</span>(<span class="params"> name, age</span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的字符串&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;名字: &quot;</span>, name)</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;年龄: &quot;</span>, age)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#调用testprint函数</span></span><br><span class="line">testprint( age=<span class="number">20</span>, name=<span class="string">&quot;jun&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数:"></a>默认参数:</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testprint</span>(<span class="params">name, age = <span class="number">35</span></span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的字符串&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;名字: &quot;</span>, name)</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;年龄: &quot;</span>, age)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用</span></span><br><span class="line">testprint(name=<span class="string">&quot;jun&quot;</span> )</span><br></pre></td></tr></table></figure>
<h3 id="不定长参数"><a href="#不定长参数" class="headerlink" title="不定长参数"></a>不定长参数</h3><p>如果在函数调用时没有指定参数，它就是一个空元组,可以不向函数传递未命名的变量。</p>
<p>加星号 <code>*</code> 的参数会以元组(tuple)的形式导入:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testprint</span>(<span class="params">arg1, *vartuple </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的参数&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;输出: &quot;</span>)</span><br><span class="line">   <span class="built_in">print</span> (arg1)</span><br><span class="line">   <span class="built_in">print</span> (vartuple)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用testprint 函数</span></span><br><span class="line">testprint(<span class="number">10</span>)</span><br><span class="line">testprint(<span class="number">70</span>, <span class="number">60</span>, <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明函数时，参数中星号 * 可以单独出现，</span></span><br><span class="line"><span class="comment"># 如果单独出现星号 * 后的参数必须用关键字传入。</span></span><br><span class="line"><span class="comment"># 例如:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">a,b,*,c</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a+b+c</span><br><span class="line"></span><br><span class="line">f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)   <span class="comment"># 报错</span></span><br><span class="line">f(<span class="number">1</span>,<span class="number">2</span>,c=<span class="number">3</span>) <span class="comment"># 正常</span></span><br></pre></td></tr></table></figure>
<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><p>语法：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> [arg1 [,arg2,.....argn]]:expression</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span> = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用sum函数</span></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;相加后的值为 : &quot;</span>, <span class="built_in">sum</span>( <span class="number">10</span>, <span class="number">20</span> ))</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;相加后的值为 : &quot;</span>, <span class="built_in">sum</span>( <span class="number">20</span>, <span class="number">20</span> ))</span><br></pre></td></tr></table></figure>
<h3 id="强制位置参数"><a href="#强制位置参数" class="headerlink" title="强制位置参数"></a>强制位置参数</h3><p>Python3.8 新增了一个函数形参语法 / 用来指明函数形参必须使用指定位置参数，不能使用关键字参数的形式。</p>
<p>在以下的例子中，形参 a 和 b 必须使用指定位置参数，c 或 d 可以是位置形参或关键字形参，而 e 或 f 要求为关键字形参:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">a, b, /, c, d, *, e, f</span>):</span></span><br><span class="line">    print(a, b, c, d, e, f)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 正确使用方法:</span></span><br><span class="line">f(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, d=<span class="number">40</span>, e=<span class="number">50</span>, f=<span class="number">60</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误使用方法:</span></span><br><span class="line">f(<span class="number">10</span>, b=<span class="number">20</span>, c=<span class="number">30</span>, d=<span class="number">40</span>, e=<span class="number">50</span>, f=<span class="number">60</span>)   <span class="comment"># b 不能使用关键字参数的形式</span></span><br><span class="line">f(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>, f=<span class="number">60</span>)           <span class="comment"># e 必须使用关键字参数的形式</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/16/Python3%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E5%8F%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/16/Python3%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E5%8F%A5/" class="post-title-link" itemprop="url">Python3学习-基本语句</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-16 11:35:24" itemprop="dateCreated datePublished" datetime="2021-01-16T11:35:24+00:00">2021-01-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python3/" itemprop="url" rel="index"><span itemprop="name">Python3</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h2><p>if、elif、else 来进行逻辑判断</p>
<p>格式：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 判断条件<span class="number">1</span>:</span><br><span class="line">    执行语句<span class="number">1.</span>..</span><br><span class="line"><span class="keyword">elif</span> 判断条件<span class="number">2</span>:</span><br><span class="line">    执行语句<span class="number">2.</span>..</span><br><span class="line"><span class="keyword">elif</span> 判断条件<span class="number">3</span>:</span><br><span class="line">    执行语句<span class="number">3.</span>..</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    执行语句<span class="number">4.</span>..</span><br></pre></td></tr></table></figure>
<h2 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h2><h3 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h3><p>for 循环可以遍历任何序列</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;Python&#x27;</span></span><br><span class="line"><span class="keyword">for</span> s <span class="keyword">in</span> <span class="built_in">str</span>:</span><br><span class="line">    print(s)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>,<span class="number">9</span>) :</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">P</span><br><span class="line">y</span><br><span class="line">t</span><br><span class="line">h</span><br><span class="line">o</span><br><span class="line">n</span><br></pre></td></tr></table></figure>
<h3 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">m = <span class="number">10</span></span><br><span class="line"><span class="keyword">while</span> m &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">sum</span> = <span class="built_in">sum</span> + m</span><br><span class="line">    m = m - <span class="number">1</span></span><br><span class="line">print(<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure>
<p><strong>while 循环使用 else 语句</strong></p>
<p>在 while … else 在条件语句为 false 时执行 else 的语句块。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> &lt;expr&gt;:</span><br><span class="line">    &lt;statement(s)&gt;</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    &lt;additional_statement(s)&gt;</span><br></pre></td></tr></table></figure>
<h3 id="break"><a href="#break" class="headerlink" title="break"></a>break</h3><p>break 用在 for 循环和 while 循环语句中，用来终止整个循环。</p>
<h3 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h3><p>continue 用在 for 循环和 while 循环语句中，用来终止本次循环。</p>
<h3 id="pass-语句"><a href="#pass-语句" class="headerlink" title="pass 语句"></a>pass 语句</h3><p>pass 是空语句，它不做任何事情，一般用做占位语句，作用是保持程序结构的完整性。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/13/MySQL-GRANT%E5%91%BD%E4%BB%A4-%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/13/MySQL-GRANT%E5%91%BD%E4%BB%A4-%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83/" class="post-title-link" itemprop="url">MySQL GRANT命令-用户授权</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-13 15:20:34" itemprop="dateCreated datePublished" datetime="2021-01-13T15:20:34+00:00">2021-01-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySql/" itemprop="url" rel="index"><span itemprop="name">MySql</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="GRANT语法"><a href="#GRANT语法" class="headerlink" title="GRANT语法"></a>GRANT语法</h2><p>在 MySQL 中，拥有 GRANT 权限的用户才可以执行 GRANT 语句，其语法格式如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GRANT priv_type [(column_list)] ON database.table</span><br><span class="line">TO user [IDENTIFIED BY [PASSWORD] <span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">[, user[IDENTIFIED BY [PASSWORD] <span class="string">&#x27;password&#x27;</span>]] ...</span><br><span class="line">[WITH with_option [with_option]...]</span><br></pre></td></tr></table></figure>
<p>实例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GRANT SELECT,INSERT,DELETE,UPDATE ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;192.125.30.123&#x27;</span> IDENTIFIED BY <span class="string">&#x27;123456&#x27;</span> WITH GRANT OPTION;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新</span></span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<p>取消权限：</p>
<p><code>revoke all on *.* from root@localhost;</code></p>
<ul>
<li>priv_type 参数表示权限类型；</li>
<li>columns_list 参数表示权限作用于哪些列上，省略该参数时，表示作用于整个表；</li>
<li>database.table 用于指定权限的级别；</li>
<li>user 参数表示用户账户，由用户名和主机名构成，格式是“‘username’@’hostname’”；</li>
<li>IDENTIFIED BY 参数用来为用户设置密码；</li>
<li>password 参数是用户的新密码。</li>
</ul>
<p>WITH 关键字后面带有一个或多个 with_option 参数。这个参数有 5 个选项，详细介绍如下：</p>
<ul>
<li>GRANT OPTION：被授权的用户可以将这些权限赋予给别的用户；</li>
<li>MAX_QUERIES_PER_HOUR count：设置每个小时可以允许执行 count 次查询；</li>
<li>MAX_UPDATES_PER_HOUR count：设置每个小时可以允许执行 count 次更新；</li>
<li>MAX_CONNECTIONS_PER_HOUR count：设置每小时可以建立 count 个连接;</li>
<li>MAX_USER_CONNECTIONS count：设置单个用户可以同时具有的 count 个连接。</li>
</ul>
<p>GRANT 语句中可用于指定权限级别的值有以下几类格式：</p>
<ul>
<li>*：表示当前数据库中的所有表。</li>
<li><em>.</em>：表示所有数据库中的所有表。</li>
<li>db_name.*：表示某个数据库中的所有表，db_name 指定数据库名。</li>
<li>db_name.tbl_name：表示某个数据库中的某个表或视图，db_name 指定数据库名，tbl_name 指定表名或视图名。</li>
<li>db_name.routine_name：表示某个数据库中的某个存储过程或函数，routine_name 指定存储过程名或函数名。</li>
<li>TO 子句：如果权限被授予给一个不存在的用户，MySQL 会自动执行一条 CREATE USER 语句来创建这个用户，但同时必须为该用户设置密码。</li>
</ul>
<h2 id="数据库权限的权限类型"><a href="#数据库权限的权限类型" class="headerlink" title="数据库权限的权限类型"></a>数据库权限的权限类型</h2><table>
<thead>
<tr>
<th align="left">权限名称</th>
<th align="center">对应user表中的字段</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">SELECT</td>
<td align="center">Select_priv</td>
<td align="center">表示授予用户可以使用 SELECT 语句访问特定数据库中所有表和视图的权限。</td>
</tr>
<tr>
<td align="left">INSERT</td>
<td align="center">Insert_priv</td>
<td align="center">表示授予用户可以使用 INSERT 语句向特定数据库中所有表添加数据行的权限。</td>
</tr>
<tr>
<td align="left">DELETE</td>
<td align="center">Delete_priv</td>
<td align="center">表示授予用户可以使用 DELETE 语句删除特定数据库中所有表的数据行的权限。</td>
</tr>
<tr>
<td align="left">UPDATE</td>
<td align="center">Update_priv</td>
<td align="center">表示授予用户可以使用 UPDATE 语句更新特定数据库中所有数据表的值的权限。</td>
</tr>
<tr>
<td align="left">REFERENCES</td>
<td align="center">References_priv</td>
<td align="center">表示授予用户可以创建指向特定的数据库中的表外键的权限。</td>
</tr>
<tr>
<td align="left">CREATE</td>
<td align="center">Create_priv</td>
<td align="center">表示授权用户可以使用 CREATE TABLE 语句在特定数据库中创建新表的权限。</td>
</tr>
<tr>
<td align="left">ALTER</td>
<td align="center">Alter_priv</td>
<td align="center">表示授予用户可以使用 ALTER TABLE 语句修改特定数据库中所有数据表的权限。</td>
</tr>
<tr>
<td align="left">SHOW VIEW</td>
<td align="center">Show_view_priv</td>
<td align="center">表示授予用户可以查看特定数据库中已有视图的视图定义的权限。</td>
</tr>
<tr>
<td align="left">CREATE ROUTINE</td>
<td align="center">Create_routine_priv</td>
<td align="center">表示授予用户可以为特定的数据库创建存储过程和存储函数的权限。</td>
</tr>
<tr>
<td align="left">ALTER ROUTINE</td>
<td align="center">Alter_routine_priv</td>
<td align="center">表示授予用户可以更新和删除数据库中已有的存储过程和存储函数的权限。</td>
</tr>
<tr>
<td align="left">INDEX</td>
<td align="center">Index_priv</td>
<td align="center">表示授予用户可以在特定数据库中的所有数据表上定义和删除索引的权限。</td>
</tr>
<tr>
<td align="left">DROP</td>
<td align="center">Drop_priv</td>
<td align="center">表示授予用户可以删除特定数据库中所有表和视图的权限。</td>
</tr>
<tr>
<td align="left">CREATE TEMPORARY TABLES</td>
<td align="center">Create_tmp_table_priv</td>
<td align="center">表示授予用户可以在特定数据库中创建临时表的权限。</td>
</tr>
<tr>
<td align="left">CREATE VIEW</td>
<td align="center">Create_view_priv</td>
<td align="center">表示授予用户可以在特定数据库中创建新的视图的权限。</td>
</tr>
<tr>
<td align="left">EXECUTE ROUTINE</td>
<td align="center">Execute_priv</td>
<td align="center">表示授予用户可以调用特定数据库的存储过程和存储函数的权限。</td>
</tr>
<tr>
<td align="left">LOCK TABLES</td>
<td align="center">Lock_tables_priv</td>
<td align="center">表示授予用户可以锁定特定数据库的已有数据表的权限。</td>
</tr>
<tr>
<td align="left">ALL 或 ALL PRIVILEGES 或 SUPER</td>
<td align="center">Super_priv</td>
<td align="center">表示以上所有权限/超级权限</td>
</tr>
</tbody></table>
<h2 id="表权限的权限类型"><a href="#表权限的权限类型" class="headerlink" title="表权限的权限类型"></a>表权限的权限类型</h2><table>
<thead>
<tr>
<th align="left">权限名称</th>
<th align="center">对应user表中的字段</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">SELECT</td>
<td align="center">Select_priv</td>
<td align="center">授予用户可以使用 SELECT 语句进行访问特定表的权限</td>
</tr>
<tr>
<td align="left">INSERT</td>
<td align="center">Insert_priv</td>
<td align="center">授予用户可以使用 INSERT 语句向一个特定表中添加数据行的权限</td>
</tr>
<tr>
<td align="left">DELETE</td>
<td align="center">Delete_priv</td>
<td align="center">授予用户可以使用 DELETE 语句从一个特定表中删除数据行的权限</td>
</tr>
<tr>
<td align="left">DROP</td>
<td align="center">Drop_priv</td>
<td align="center">授予用户可以删除数据表的权限</td>
</tr>
<tr>
<td align="left">UPDATE</td>
<td align="center">Update_priv</td>
<td align="center">授予用户可以使用 UPDATE 语句更新特定数据表的权限</td>
</tr>
<tr>
<td align="left">ALTER</td>
<td align="center">Alter_priv</td>
<td align="center">授予用户可以使用 ALTER TABLE 语句修改数据表的权限</td>
</tr>
<tr>
<td align="left">REFERENCES</td>
<td align="center">References_priv</td>
<td align="center">授予用户可以创建一个外键来参照特定数据表的权限</td>
</tr>
<tr>
<td align="left">CREATE</td>
<td align="center">Create_priv</td>
<td align="center">授予用户可以使用特定的名字创建一个数据表的权限</td>
</tr>
<tr>
<td align="left">INDEX</td>
<td align="center">Index_priv</td>
<td align="center">授予用户可以在表上定义索引的权限</td>
</tr>
<tr>
<td align="left">ALL 或 ALL PRIVILEGES 或 SUPER</td>
<td align="center">Super_priv</td>
<td align="center">所有的权限名</td>
</tr>
</tbody></table>
<h2 id="列权限的权限类型"><a href="#列权限的权限类型" class="headerlink" title="列权限的权限类型"></a>列权限的权限类型</h2><p>值只能指定为 SELECT、INSERT 和 UPDATE，同时权限的后面需要加上 列名 列表 column-list</p>
<h2 id="用户权限类型"><a href="#用户权限类型" class="headerlink" title="用户权限类型"></a>用户权限类型</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建新的用户，并授予 数据有查询、插入权限，并授予 GRANT 权限</span></span><br><span class="line">GRANT SELECT,INSERT SLAVE ON *.*  TO  <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123456&#x27;</span> WITH GRANT OPTION;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询用户权限</span></span><br><span class="line">SHOW GRANTS FOR <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新</span></span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/13/Linux%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E4%B8%ADsocket%E7%8A%B6%E6%80%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/13/Linux%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E4%B8%ADsocket%E7%8A%B6%E6%80%81/" class="post-title-link" itemprop="url">Linux查看系统中socket状态</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-13 11:03:05" itemprop="dateCreated datePublished" datetime="2021-01-13T11:03:05+00:00">2021-01-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="IPv4查看"><a href="#IPv4查看" class="headerlink" title="IPv4查看"></a>IPv4查看</h2><p><code>cat /proc/net/sockstat</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sockets: used 230</span><br><span class="line">TCP: inuse 30 orphan 0 tw 2 alloc 36 mem 2</span><br><span class="line">UDP: inuse 3 mem 0</span><br><span class="line">UDPLITE: inuse 0</span><br><span class="line">RAW: inuse 0</span><br><span class="line">FRAG: inuse 0 memory 0</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li>sockets: used：已使用的所有协议套接字总量</li>
<li>TCP: inuse：正在使用（正在侦听）的TCP套接字数量。其值≤ netstat –lnt | grep ^tcp | wc –l</li>
<li>TCP: orphan：无主（不属于任何进程）的TCP连接数（无用、待销毁的TCP socket数）</li>
<li>TCP: tw：等待关闭的TCP连接数。其值等于netstat –ant | grep TIME_WAIT | wc –l</li>
<li>TCP：alloc(allocated)：已分配（已建立、已申请到sk_buff）的TCP套接字数量。其值等于netstat –ant | grep ^tcp | wc –l</li>
<li>TCP：mem：套接字缓冲区使用量（单位不详。用scp实测，速度在4803.9kB/s时：其值=11，netstat –ant 中相应的22端口的Recv-Q＝0，Send-Q≈400）</li>
<li>UDP：inuse：正在使用的UDP套接字数量</li>
<li>RAW：</li>
<li>FRAG：使用的IP段数量</li>
</ul>
<h2 id="IPv6查看"><a href="#IPv6查看" class="headerlink" title="IPv6查看"></a>IPv6查看</h2><p><code>cat /proc/net/sockstat6</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/11/TCP%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/11/TCP%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE/" class="post-title-link" itemprop="url">TCP传输控制协议</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-11 15:05:11" itemprop="dateCreated datePublished" datetime="2021-01-11T15:05:11+00:00">2021-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TCP%E5%8D%8F%E8%AE%AE/" itemprop="url" rel="index"><span itemprop="name">TCP协议</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="TCP-报文格式简介"><a href="#TCP-报文格式简介" class="headerlink" title="TCP 报文格式简介"></a>TCP 报文格式简介</h2><ul>
<li>TCP 报文由 <code>TCP Header</code> 和 <code>TCP</code> 数据组成。</li>
<li><strong>TCP Header 的最大长度为 60 字节(byte)</strong>，而<strong>必须要有的固定长度</strong>也就是图一的前5层的<strong>20字节(byte)</strong>，每层占有 <code>32bit</code>，也就是 <code>32/8=4</code> 字节，5层，<code>5*4 = 20</code> 字节，那么第六层的可选项和填充也就是<strong>Tcp Options字段最大为60-20=40字节(byte)</strong>。填充是为了使TCP首部为4字节（32bit）的整数倍。</li>
</ul>
<h2 id="TCP首部格式"><a href="#TCP首部格式" class="headerlink" title="TCP首部格式"></a>TCP首部格式</h2><p><img src="/img/tcp2.png" alt="tcp2.png"></p>
<p><strong>Source Port</strong>：源端口，16位(bit)，2个字节(byte)。<br><strong>Destination Port</strong>：目的端口，16位，2个字节。<br><strong>Sequence Number</strong>：序号，发送数据包中的第一个字节的序列号，32位。<br><strong>Acknowledgment Number</strong>：确认序列号，32位。<br><strong>Data Offset</strong>：数据偏移，4位，该字段的值是TCP首部（包括选项）长度除以4。<br><strong>标志位</strong>：6位，URG 表示 <code>Urgent Pointer</code> 字段有意义：<br><code>ACK</code> 表示 <code>Acknowledgment Number</code> 字段有意义<br><code>PSH</code> 表示 <code>Push</code> 功能，RST 表示复位 TCP 连接<br><code>SYN</code> 表示 <code>SYN</code> 报文（在建立 TCP 连接的时候使用）<br><code>FIN</code> 表示没有数据需要发送了（在关闭 TCP 连接的时候使用）<br><strong>Window</strong>：窗口，表示接收缓冲区的空闲空间，16位，2个字节，用来告诉TCP连接对端自己能够接收的最大数据长度。<br><strong>Checksum</strong>：校验和，16位，2个字节。<br><strong>Urgent Pointers</strong>：紧急指针，16位,2个字节，只有 URG 标志位被设置时该字段才有意义，表示紧急数据相对序列号（Sequence Number字段的值）的偏移。<br><strong>选项和填充</strong>：最常见的可选字段是最长报文大小，又称为 MSS（Maximum Segment Size），每个连接方通常都在通信的第一个报文段（为建立连接而设置SYN标志为1的那个段）中指明这个选项，它表示本端所能接受的最大报文段的长度。选项长度不一定是32位的整数倍，所以要加填充位，即在这个字段中加入额外的零，以保证TCP头是32的整数倍。<br><strong>数据</strong>：TCP 报文段中的数据部分是可选的。在一个连接建立和一个连接终止时，双方交换的报文段仅有 TCP 首部。如果一方没有数据要发送，也使用没有任何数据的首部来确认收到的数据。在处理超时的许多情况中，也会发送不带任何数据的报文段。</p>
<h2 id="TCP-Options字段"><a href="#TCP-Options字段" class="headerlink" title="TCP Options字段"></a>TCP Options字段</h2><p>Tcp Options 字段的最大长度为40字节。Tcp Options 字段的一般数据结构如图所示：</p>
<ul>
<li>Kind(1字节)</li>
<li>Length(1字节)</li>
<li>Info(n字节)</li>
</ul>
<p>选项的第一个字段 kind 说明选项的类型。有的 TCP 选项没有后面两个字段，仅包含1字节的kind字段。第二个字段length（如果有的话）指定该选项的总长度，该长度包括kind字段和length字段占据的2字节。第三个字段 info（如果有的话）是选项的具体信息。</p>
<p><img src="/img/tcpoptions.png" alt="tcpoptions.png"></p>
<ul>
<li>第一个kind= 2，表示最大报文段长度（Max Segment Size，MSS），TCP 模块通常将 MSS 设置为（MTU-40, MTU[Maximum Transmission Unit，缩写 MTU，中文名是：最大传输单元]）字节（减掉的这40字节包括20字节的TCP头部和20字节的IP头部）。这样携带 TCP 报文段的IP数据报的长度就不会超过 MTU（假设TCP头部和IP头部都不包含选项字段，并且这也是一般情况），从而避免本机发生IP分片。对以太网而言，MSS 值是1460（1500-40）字节。</li>
<li>kind= 4，表示支持 SACK，SACK Block（收到乱序数据）。</li>
<li>kind = 8，代表 Timestamps，即时间戳，启用 Timestamp Option 后，每个 TCP Segment 中都会带有 Timestamp Option，其中包含了两个 32bit 的 Timestamp 也就是各四个字节的 Timestamp Value（TSval）和 Timestamp Echo Reply（TSecr）。发送方在发送报文段时把当前时钟的时间值放入时间戳字段，接收方在确认该报文段时把时间戳字段值复制到时间戳回送回答字段。因此，发送方在收到确认报文后，可以准确计算出RTT。</li>
</ul>
<h2 id="工作方式"><a href="#工作方式" class="headerlink" title="工作方式"></a>工作方式</h2><h2 id="建立连接"><a href="#建立连接" class="headerlink" title="建立连接"></a>建立连接</h2><p><img src="/img/tcp1.gif" alt="tcp1"></p>
<p>TCP是因特网中的传输层协议，使用三次握手协议建立连接。当主动方发出 <code>SYN</code> 连接请求后，等待对方回答 <code>SYN+ACK</code>，并最终对对方的 <code>SYN</code> 执行 <code>ACK</code> 确认。</p>
<p>TCP三次握手的过程如下：</p>
<ul>
<li>客户端发送 <code>SYN（SEQ=x）</code> 报文给服务器端，进入 <code>SYN_SEND</code> 状态。</li>
<li>服务器端收到 <code>SYN</code> 报文，回应一个 <code>SYN （SEQ=y）ACK（ACK=x+1）</code> 报文，进入 <code>SYN_RECV</code> 状态。</li>
<li>客户端收到服务器端的 <code>SYN</code> 报文，回应一个 <code>ACK（ACK=y+1）</code> 报文，进入 <code>Established(已获确认的)</code> 状态。</li>
</ul>
<p>三次握手完成，TCP客户端和服务器端成功地建立连接，可以开始传输数据了。</p>
<h3 id="连接终止"><a href="#连接终止" class="headerlink" title="连接终止"></a>连接终止</h3><p><img src="/img/tcp3.gif" alt="tcp3.gif"></p>
<p>建立一个连接需要三次握手，而终止一个连接要经过四次握手，这是由TCP的 <code>半关闭</code>（<code>half-close</code>）造成的。</p>
<ul>
<li>（1）某个应用进程首先调用 <code>close</code>，称该端执行 <code>主动关闭（active close）</code>。该端的TCP于是发送一个 <code>FIN</code> 分节，表示数据发送完毕。</li>
<li>（2） 接收到这个 <code>FIN</code> 的对端执行 <code>被动关闭（passive close）</code>，这个 <code>FIN</code> 由TCP确认。</li>
</ul>
<p>注意：<code>FIN</code> 的接收也作为一个文件结束符（<code>end-of-file</code>）传递给接收端应用进程，放在已排队等候该应用进程接收的任何其他数据之后，因为，<code>FIN</code> 的接收意味着接收端应用进程在相应连接上再无额外数据可接收。</p>
<ul>
<li>（3） 一段时间后，接收到这个文件结束符的应用进程将调用 <code>close</code> 关闭它的套接字。这导致它的 <code>TCP</code> 也发送一个 <code>FIN</code>。</li>
<li>（4） 接收这个最终 <code>FIN</code> 的原发送端TCP（即执行主动关闭的那一端）确认这个 <code>FIN</code>。</li>
</ul>
<p>既然每个方向都需要一个<code>FIN</code>和一个 <code>ACK</code> ，因此通常需要4个分节。</p>
<p>注意：<br>（1） <code>通常</code> 是指，某些情况下，步骤1的 <code>FIN</code> 随数据一起发送，另外，步骤2和步骤3发送的分节都出自执行被动关闭那一端，有可能被合并成一个分节。<br>（2） 在 步骤2 与 步骤3 之间，从执行 被动关闭一端 到 执行主动关闭一端 流动数据是可能的，这称为 <code>半关闭</code>（half-close）。<br>（3） 当一个Unix进程无论自愿地（调用exit或从main函数返回）还是非自愿地（收到一个终止本进程的信号）终止时，所有打开的描述符都被关闭，这也导致仍然打开的任何TCP连接上也发出一个<code>FIN</code>。<br>无论是客户还是服务器，任何一端都可以执行主动关闭。通常情况是，客户执行主动关闭，但是某些协议，例如，HTTP/1.0却由服务器执行主动关闭。</p>
<h2 id="TCP重连"><a href="#TCP重连" class="headerlink" title="TCP重连"></a>TCP重连</h2><p><img src="/img/tcp%E9%87%8D%E8%BF%9E.png" alt="tcp重连.png"></p>
<p>四元组：源IP地址、目的IP地址、源端口、目的端口<br>五元组：源IP地址、目的IP地址、协议号、源端口、目的端口<br>七元组：源IP地址、目的IP地址、协议号、源端口、目的端口、服务类型、接口索引</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Hollake/article/details/89327474">Tcp报文简介以及头部选项字段(Tcp Options字段)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/blakegao/article/details/19419237">常用的TCP Option</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/mary19920410/article/details/77255967">浅析TCP中时间戳选项timestamp</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2021/01/08/Linux-TcpDump%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/08/Linux-TcpDump%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">Linux TcpDump工具</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-08 17:40:49" itemprop="dateCreated datePublished" datetime="2021-01-08T17:40:49+00:00">2021-01-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-28 09:53:45" itemprop="dateModified" datetime="2021-02-28T09:53:45+00:00">2021-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TcpDump/" itemprop="url" rel="index"><span itemprop="name">TcpDump</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>TcpDump 使用了独立于系统的 libpcap 的接口。libpcap 是linux平台下的网络数据包捕获函数包，大多数网络监控软件都以它为基础。tcpdump 调用libpcap 的接口在 linux 系统链路层抓包。而linux本身指定的许多访问控制规则都是基于三层或三层以上的过滤规则，所以 tcpdump 可以抓取过滤规则之前的数据包。使用tcpdump 需要有root权限。</p>
<h2 id="网卡基础知识"><a href="#网卡基础知识" class="headerlink" title="网卡基础知识"></a>网卡基础知识</h2><h3 id="网卡的不同接受模式"><a href="#网卡的不同接受模式" class="headerlink" title="网卡的不同接受模式"></a>网卡的不同接受模式</h3><ul>
<li>广播模式：该模式下网卡能接收网络中的广播信息。</li>
<li>组播模式：该模式下网卡能接收网络中的组播信息。</li>
<li>直接模式：该模式下网卡能接收网络中目的地址为自己的数据包。</li>
<li>混杂模式：该模式下网卡能接收网络中一切通过该网卡的数据包。</li>
</ul>
<p>注：网卡混杂模式：是网卡的一种工作模式，一般在抓取网卡数据包时使用。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">device eth0 entered promiscuous mode <span class="comment"># 是指网卡 eth0 进入了混杂模式。</span></span><br><span class="line">device eth0 left promiscuous mode <span class="comment"># 网卡 eth0 离开了混杂模式。</span></span><br><span class="line">ifconfig eth0 promisc <span class="comment"># 设置网卡eth0为混杂模式</span></span><br><span class="line">ifconfig eth0 -promisc <span class="comment"># 取消网卡eth0的混杂模式</span></span><br></pre></td></tr></table></figure>
<h3 id="网络中数据包的分类"><a href="#网络中数据包的分类" class="headerlink" title="网络中数据包的分类"></a>网络中数据包的分类</h3><ul>
<li>广播包：指IP子网内广播的数据包。适用范围较小只在本地子网有效。通过路由器和网络设备控制传输。</li>
<li>单播包：发送者和每一接受者中点对点的网络连接。</li>
<li>组播包：借助组播路由协议建立树形路由，在尽可能远的分岔路口才开始复制和奋发。（224.0.0.0~224.0.0.255是预留的组播地址）</li>
</ul>
<h3 id="数据包接收流程"><a href="#数据包接收流程" class="headerlink" title="数据包接收流程"></a>数据包接收流程</h3><ul>
<li>网卡收到数据包，获取数据包中的目的MAC地址。</li>
<li>根据网卡驱动设置的网卡接受模式去判断是否接受该数据。</li>
<li>若接受该数据：发出中断信号通知CPU；CPU收到中断信号后根据发出该中断信号的网卡驱动程序的网卡驱动程序地址调用网卡驱动程序；网卡驱动程序处理数据；驱动程序将数据放入信号堆栈；系统接触到数据。</li>
<li>若不接受该数据：网卡直接丢弃该数据；系统不会接触到数据。</li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解锁</span></span><br><span class="line"><span class="comment"># 如果不解锁，可能造成错误：Couldn&#x27;t find user &#x27;tcpdump&#x27;</span></span><br><span class="line">chattr -i /etc/passwd /etc/shadow /etc/group /etc/gshadow</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">yum install tcpdump</span><br></pre></td></tr></table></figure>
<h2 id="tcpdump命令格式"><a href="#tcpdump命令格式" class="headerlink" title="tcpdump命令格式"></a>tcpdump命令格式</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tcpdump [ -DenNqvX ] [ -c count ] [ -F file ] [ -i interface ] [ -r file ]</span><br><span class="line">        [ -s snaplen ] [ -w file ] [ expression ]</span><br></pre></td></tr></table></figure>
<ul>
<li>-a 尝试将网络和广播地址转换成名称。</li>
<li>-c&lt;数据包数目&gt; 收到指定的数据包数目后，就停止进行倾倒操作。</li>
<li>-d 把编译过的数据包编码转换成可阅读的格式，并倾倒到标准输出。</li>
<li>-dd 把编译过的数据包编码转换成C语言的格式，并倾倒到标准输出。</li>
<li>-ddd 把编译过的数据包编码转换成十进制数字的格式，并倾倒到标准输出。</li>
<li>-e 在每列倾倒资料上显示连接层级的文件头。</li>
<li>-f 用数字显示网际网络地址。</li>
<li>-F&lt;表达文件&gt; 指定内含表达方式的文件。</li>
<li>-i&lt;网络界面&gt; 使用指定的网络截面送出数据包。</li>
<li>-l 使用标准输出列的缓冲区。</li>
<li>-n 不把主机的网络地址转换成名字。</li>
<li>-N 不列出域名。</li>
<li>-O 不将数据包编码最佳化。</li>
<li>-p 不让网络界面进入混杂模式。</li>
<li>-q 快速输出，仅列出少数的传输协议信息。</li>
<li>-r&lt;数据包文件&gt; 从指定的文件读取数据包数据。</li>
<li>-s&lt;数据包大小&gt; 设置每个数据包的大小。</li>
<li>-S 用绝对而非相对数值列出TCP关联数。</li>
<li>-t 在每列倾倒资料上不显示时间戳记。</li>
<li>-tt 在每列倾倒资料上显示未经格式化的时间戳记。</li>
<li>-T&lt;数据包类型&gt; 强制将表达方式所指定的数据包转译成设置的数据包类型。</li>
<li>-v 详细显示指令执行过程。</li>
<li>-vv 更详细显示指令执行过程。</li>
<li>-vvv：产生比-vv更详细的输出。</li>
<li>-x 用十六进制字码列出数据包资料。</li>
<li>-w&lt;数据包文件&gt; 把数据包数据写入指定的文件。</li>
</ul>
<h2 id="常用实例"><a href="#常用实例" class="headerlink" title="常用实例"></a>常用实例</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 监听特定主机</span></span><br><span class="line">tcpdump host 182.254.38.55</span><br><span class="line"></span><br><span class="line"><span class="comment"># 特定来源</span></span><br><span class="line">tcpdump src host hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 特定目标地址</span></span><br><span class="line">tcpdump dst host hostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 特定端口</span></span><br><span class="line">tcpdump port 3000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监听TCP/UDP</span></span><br><span class="line">tcpdump tcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 来源主机+端口+TCP</span></span><br><span class="line"><span class="comment"># 监听来自主机 10.207.22.254 在端口 8011 上的TCP数据包</span></span><br><span class="line">tcpdump tcp port 8011 and src host 10.207.22.254</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监听特定主机之间的通信</span></span><br><span class="line">tcpdump ip host 210.27.48.1 and 210.27.48.2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存到本地</span></span><br><span class="line"><span class="comment"># 备注：tcpdump 默认会将输出写到缓冲区，只有缓冲区内容达到一定的大小，或者tcpdump退出时，才会将输出写到本地磁盘</span></span><br><span class="line">tcpdump -n -vvv -c 1000 -w /ldjc/data.pcap</span><br></pre></td></tr></table></figure>
<h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><p>TCP协议行的典型格式如下：</p>
<p>[Timestamp] [Protocol] [Src IP].[Src Port] &gt; [Dst IP].[Dst Port]: [Flags], [Seq], [Ack], [Win Size], [Options], [Data Length]</p>
<p>让我们逐个字段进行说明，并解释以下内容：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">21:53:20.460144 IP 192.168.182.166.57494 &gt; 35.222.85.5.80: Flags [P.], seq 1:88, ack 1, win 29200,  </span><br><span class="line">options [nop,nop,TS val 1067794587 ecr 2600218930], length 87</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">21:53:20.460144 - 捕获的数据包的时间戳为本地时间，并使用以下格式：hours：minutes：seconds.frac，</span><br><span class="line">        其中frac是自午夜以来的几分之一秒。</span><br><span class="line">IP - 分组协议。 在这种情况下，IP表示Internet协议版本4（IPv4）。</span><br><span class="line">192.168.182.166.57494 - 源IP地址和端口，以点（.）分隔。</span><br><span class="line">35.222.85.5.80 - 目的IP地址和端口，以点号（.）分隔。</span><br></pre></td></tr></table></figure>
<p>TCP 标志字段。 在此示例中，[P.] 表示推送确认数据包，用于确认前一个数据包并发送数据。 其他典型标志字段值如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[.] - ACK (Acknowledgment)</span><br><span class="line">[S] - SYN (Start Connection)</span><br><span class="line">[P] - PSH (Push Data)</span><br><span class="line">[F] - FIN (Finish Connection)</span><br><span class="line">[R] - RST (Reset Connection)</span><br><span class="line">[S.] - SYN-ACK (SynAcK Packet)</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">seq 1:88 - 序列号在first：last表示法中。 它显示了数据包中包含的数据数量。 </span><br><span class="line">        除了数据流中的第一个数据包（其中这些数字是绝对的）以外，所有后续数据包均用作相对字节位置。 </span><br><span class="line">        在此示例中，数字为1:88，表示此数据包包含数据流的字节1至88。 使用-S选项可打印绝对序列号。</span><br><span class="line">ack 1 - 确认号（acknowledgment number）是此连接另一端所期望的下一个数据的序列号。</span><br><span class="line">win 29200 - 窗口号是接收缓冲区中可用字节的数目。</span><br><span class="line">options [nop,nop,TS val 1067794587 ecr 2600218930] - TCP选项。 </span><br><span class="line">        使用 nop 或 “ no operation” 填充使TCP报头为4字节的倍数。 </span><br><span class="line">        TS val 是TCP时间戳，而 ecr 表示回显应答。 请访问 IANA 文档以获取有关 TCP 选项的更多信息。</span><br><span class="line">length 87 - 有效载荷数据的长度</span><br></pre></td></tr></table></figure>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/godop/article/details/80986966">tcpdump抓包wireshark分析</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/chinaltx/article/details/87469933">一文搞定tcpdump基本用法</a></p>
<p><a target="_blank" rel="noopener" href="https://www.linuxidc.com/Linux/2020-02/162226.htm">Linux下抓包命令tcpdump详解</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chyingp/p/linux-command-tcpdump.html">Linux基础：用tcpdump抓包</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8d9accf1d2f1">聊聊 tcpdump 与 Wireshark 抓包分析</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">syxdevcode</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">354</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">112</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">155</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/syxdevcode" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;syxdevcode" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">syxdevcode</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
