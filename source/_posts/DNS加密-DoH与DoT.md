---
title: DNS加密-DoH与DoT
date: 2021-09-07 13:05:55
tags:
- Windows
- 网络基础
- 计算机基础
- DoH
- DNS
- DoT
- 网络协议
categories:
- DNS 
---

## DNS

dns端口号是域名系统 (`Domain Name System`) 的缩写，该系统用于命名组织到域层次结构中的计算机和网络服务。在Internet上域名与IP地址之间是一一对应的，域名虽然便于人们记忆，但机器之间只能互相认识IP地址，它们之间的转换工作称为域名解析，域名解析需要由专门的域名解析服务器来完成。

DNS协议运行在UDP协议之上，使用端口号53。在传输层TCP提供端到端可靠的服务,在UDP端提供尽力交付的服务。其控制端口作用于UDP端口53。

**缺点：**

传统的DNS查询和应答采用大都采用UDP明文传输，存在网络监听、DNS劫持、中间设备干扰的风险。

从安全角度来看，请求传输时通常不进行任何加密，任何人都可以读取的 DNS 其实是不安全的。这意味着网络罪犯可以很容易地使用自己的服务器拦截受害者的 DNS，将用户的请求跳转到钓鱼网站上，这些网站发布恶意软件，或在正常网站上投放大量广告吸引用户，这种行为我们称之为 DNS 劫持。

## DoT

`DoT` 全称是 `DNS over TLS`，它使用 `TLS` 协议来传输 `DNS` 协议。`TLS` 协议是目前互联网最常用的安全加密协议之一，我们访问 `HTTPS` 的安全基础就是基于 `TLS` 协议的。相比于之前使用无连接无加密的 `UDP` 模式， `TLS` 本身已经实现了保密性与完整性。

## DoH

`DoH` 全称是 `DNS over HTTPS`，它使用 `HTTPS` 来传输 `DNS` 协议。`DoH` 的安全原理与 `DoT` 一样，他们之间的区别只在于：`DoH` 有了 `HTTP` 格式封装，更加通用。

## 区别

`DoT` 在专用端口上通过 `TLS` 连接 `DNS` 服务器，而 `DoH` 是基于使用 `HTTP` 应用程序层协议，将查询发送到 `HTTPS` 端口上的特定 `HTTP` 端点,这里造成的外界感知就是端口号的不同，`DoT` 的端口号是 `853`，`DoH` 端口号 `443`。
