<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"syxdevcode.github.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="syxdevcode的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="syxdevcode博客">
<meta property="og:url" content="https://syxdevcode.github.com/page/20/index.html">
<meta property="og:site_name" content="syxdevcode博客">
<meta property="og:description" content="syxdevcode的个人博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="syxdevcode">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://syxdevcode.github.com/page/20/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>syxdevcode博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">syxdevcode博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/syxdevcode" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/27/Linux-lvdisplay%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/27/Linux-lvdisplay%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux lvdisplay命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-27 13:09:55" itemprop="dateCreated datePublished" datetime="2020-08-27T13:09:55+00:00">2020-08-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" itemprop="url" rel="index"><span itemprop="name">Linux基础命令</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>651</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><code>lvdisplay</code> 命令用于显示 <code>LVM</code> 逻辑卷空间大小、读写状态和快照信息等属性。如果省略”逻辑卷”参数，则 <code>lvdisplay</code> 命令显示所有的逻辑卷属性。否则，仅显示指定的逻辑卷属性。</p>
<p>LVM 是 <code>Logical Volume Manager</code>（逻辑卷管理）的简写，它是Linux环境下对磁盘分区进行管理的一种机制。</p>
<p><strong>语法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lvdisplay (参数)</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<p>逻辑卷：指定要显示属性的逻辑卷对应的设备文件。</p>
<p><strong>实例</strong></p>
<p>使用lvdisplay命令显示指定逻辑卷的属性。在命令行中输入下面的命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#显示逻辑卷属性</span></span><br><span class="line">lvdisplay /dev/mapper/vg_ren-LogVol06_u01</span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/vg_ren/LogVol06_u01</span><br><span class="line">  LV Name                LogVol06_u01</span><br><span class="line">  VG Name                vg_ren</span><br><span class="line">  LV UUID                xMhOr0-M11J-X410-BLmE-0zVw-ojqJ-yiH1yd</span><br><span class="line">  LV Write Access        <span class="built_in">read</span>/write</span><br><span class="line">  LV Creation host, time ren-sj0001, 2020-01-19 11:18:05 +0800</span><br><span class="line">  LV Status              available</span><br><span class="line">  <span class="comment"># open                 1</span></span><br><span class="line">  LV Size                300.00 GiB</span><br><span class="line">  Current LE             76800</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently <span class="built_in">set</span> to     256</span><br><span class="line">  Block device           251:3</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://man.linuxde.net/lvdisplay">lvdisplay命令</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/27/Linux-lsblk%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/27/Linux-lsblk%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux lsblk命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-27 09:38:04" itemprop="dateCreated datePublished" datetime="2020-08-27T09:38:04+00:00">2020-08-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" itemprop="url" rel="index"><span itemprop="name">Linux基础命令</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><code>lsblk</code> 命令用于列出所有可用块设备的信息，而且还能显示他们之间的依赖关系，但是它不会列出 <code>RAM盘</code> 的信息。块设备有 <code>硬盘</code>，<code>闪存盘</code>，<code>cd-ROM</code> 等等。<code>lsblk</code> 命令包含在 <code>util-linux-ng</code> 包中，现在该包改名为 <code>util-linux</code>。这个包带了几个其它工具，如<code>dmesg</code>。要安装<code>lsblk</code>，请在此处下载 <code>util-linux</code>包。Fedora用户可以通过命令 <code>sudo yum install util-linux-ng</code> 来安装该包。</p>
<p>选项：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-a, --all            显示所有设备。</span><br><span class="line">-b, --bytes          以bytes方式显示设备大小。</span><br><span class="line">-d, --nodeps         不显示 slaves 或 holders。</span><br><span class="line">-D, --discard        <span class="built_in">print</span> discard capabilities。</span><br><span class="line">-e, --exclude &lt;list&gt; 排除设备 (default: RAM disks)。</span><br><span class="line">-f, --fs             显示文件系统信息。</span><br><span class="line">-h, --<span class="built_in">help</span>           显示帮助信息。</span><br><span class="line">-i, --ascii          use ascii characters only。</span><br><span class="line">-m, --perms          显示权限信息。</span><br><span class="line">-l, --list           使用列表格式显示。</span><br><span class="line">-n, --noheadings     不显示标题。</span><br><span class="line">-o, --output &lt;list&gt;  输出列。</span><br><span class="line">-P, --pairs          使用key=<span class="string">&quot;value&quot;</span>格式显示。</span><br><span class="line">-r, --raw            使用原始格式显示。</span><br><span class="line">-t, --topology       显示拓扑结构信息。</span><br></pre></td></tr></table></figure>

<p>显示说明：</p>
<ul>
<li><strong>NAME</strong>：这是块设备名。</li>
<li><strong>MAJ</strong>: MIN：本栏显示主要和次要设备号。</li>
<li><strong>RM</strong>：本栏显示设备是否可移动设备。注意，在本例中设备sdb和sr0的RM值等于1，这说明他们是可移动设备。</li>
<li><strong>SIZE</strong>：本栏列出设备的容量大小信息。例如298.1G表明该设备大小为298.1GB，而1K表明该设备大小为1KB。</li>
<li><strong>RO</strong>：该项表明设备是否为只读。在本案例中，所有设备的RO值为0，表明他们不是只读的。</li>
<li><strong>TYPE</strong>：本栏显示块设备是否是磁盘或磁盘上的一个分区。在本例中，sda和sdb是磁盘，而sr0是只读存储（rom）。</li>
<li><strong>MOUNTPOINT</strong>：本栏指出设备挂载的挂载点。</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认选项不会列出所有空设备，使用 -a 显示空设备。</span></span><br><span class="line">lsblk -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出一个特定设备的拥有关系，同时也可以列出组和模式.</span></span><br><span class="line">lsblk -m</span><br><span class="line"></span><br><span class="line"><span class="comment"># 该命令也可以只获取指定设备的信息，</span></span><br><span class="line"><span class="comment"># 可以通过在提供给lsblk命令的选项后指定设备名来实现</span></span><br><span class="line"><span class="comment"># 以字节显示你的磁盘驱动器大小</span></span><br><span class="line">lsblk -b /dev/sda</span><br><span class="line"><span class="comment"># 等价于</span></span><br><span class="line">lsblk --bytes /dev/sda</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取SCSI设备的列表</span></span><br><span class="line">lsblk -S</span><br><span class="line"></span><br><span class="line"><span class="comment"># lsblk列出SCSI设备，而-s是逆序选项（将设备和分区的组织关系逆转过来显示）</span></span><br><span class="line">lsblk -s</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://man.linuxde.net/lsblk">Linux lsblk命令</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/27/mysql%E4%B8%ADbinlog-format%E6%A0%BC%E5%BC%8F%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/27/mysql%E4%B8%ADbinlog-format%E6%A0%BC%E5%BC%8F%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">mysql中binlog format格式简介</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-27 09:34:41" itemprop="dateCreated datePublished" datetime="2020-08-27T09:34:41+00:00">2020-08-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySql/" itemprop="url" rel="index"><span itemprop="name">MySql</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看binlog的格式的脚本</span></span><br><span class="line">show GLOBAL variables like <span class="string">&#x27;%binlog_format%&#x27;</span>;</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| binlog_format | ROW   |</span><br><span class="line">+---------------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure>

<p>mysql复制主要有三种方式：<br>基于SQL语句的复制(<code>statement-based replication, SBR</code>)<br>基于行的复制(<code>row-based replication, RBR</code>)<br>混合模式复制(<code>mixed-based replication, MBR</code>)。</p>
<p>对应的 <code>binlog</code> 的格式也有三种：<code>STATEMENT</code>，<code>ROW</code>，<code>MIXED</code>。</p>
<h3 id="STATEMENT模式（SBR）"><a href="#STATEMENT模式（SBR）" class="headerlink" title="STATEMENT模式（SBR）"></a>STATEMENT模式（SBR）</h3><p>每一条会修改数据的sql语句会记录到 <code>binlog</code> 中。优点是并不需要记录每一条sql语句和每一行的数据变化，减少了 <code>binlog</code> 日志量，节约IO，提高性能。缺点是在某些情况下会导致<code>master-slave</code> 中的数据不一致(如 <code>sleep()</code> 函数， <code>last_insert_id()</code>，以及 <code>user-defined functions(udf)</code> 等会出现问题)</p>
<h3 id="ROW模式（RBR）"><a href="#ROW模式（RBR）" class="headerlink" title="ROW模式（RBR）"></a>ROW模式（RBR）</h3><p>不记录每条sql语句的上下文信息，仅需记录哪条数据被修改了，修改成什么样了。而且不会出现某些特定情况下的存储过程、或 <code>function</code>、或 <code>trigger</code> 的调用和触发无法被正确复制的问题。缺点是会产生大量的日志，尤其是 <code>alter table</code> 的时候会让日志暴涨。</p>
<h3 id="MIXED模式（MBR）"><a href="#MIXED模式（MBR）" class="headerlink" title="MIXED模式（MBR）"></a>MIXED模式（MBR）</h3><p>以上两种模式的混合使用，一般的复制使用 <code>STATEMENT</code> 模式保存 <code>binlog</code> ，对于 <code>STATEMENT</code> 模式无法复制的操作使用ROW模式保存 <code>binlog</code>，MySQL会根据执行的SQL语句选择日志保存方式。</p>
<p><code>binlog</code> 复制配置</p>
<p>在mysql的配置文件my.cnf中，可以通过一下选项配置 <code>binglog</code> 相关</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># binlog日志格式，mysql默认采用ROW，建议使用mixed</span><br><span class="line">binlog_format=MIXED</span><br><span class="line"></span><br><span class="line"># binlog日志文件</span><br><span class="line">log-bin=/usr/local/mysql/binlogs/bin-log</span><br><span class="line"></span><br><span class="line"># binlog过期清理时间</span><br><span class="line">expire_logs_days=7</span><br><span class="line"></span><br><span class="line"># binlog每个日志文件大小</span><br><span class="line">max_binlog_size=100m</span><br><span class="line"></span><br><span class="line"># binlog缓存大小</span><br><span class="line">binlog_cache_size=4m</span><br><span class="line"></span><br><span class="line"># 最大binlog缓存大小</span><br><span class="line">max_binlog_cache_size=512m</span><br></pre></td></tr></table></figure>

<p><strong>MIXED说明</strong></p>
<p>对于执行的SQL语句中包含 <code>now()</code> 这样的时间函数，会在日志中产生对应的 <code>unix_timestamp()*1000</code> 的时间字符串，<code>slave</code> 在完成同步时，取用的是 <code>sqlEvent</code> 发生的时间来保证数据的准确性。另外对于一些功能性函数 <code>slave</code> 能完成相应的数据同步，而对于上面指定的一些类似于 <code>UDF</code> 函数，导致 <code>Slave</code>无法知晓的情况，则会采用 <code>ROW</code> 格式存储这些 <code>Binlog</code> ，以保证产生的 <code>Binlog</code> 可以供 <code>Slave</code> 完成数据同步。</p>
<p>比较以下 <code>SBR</code> 和 <code>RBR</code> 两种模式各自的优缺点：</p>
<p><strong>SBR 的优点：</strong></p>
<ul>
<li>历史悠久，技术成熟</li>
<li><code>binlog</code> 文件较小</li>
<li><code>binlog</code> 中包含了所有数据库更改信息，可以据此来审核数据库的安全等情况</li>
<li><code>binlog</code> 可以用于实时的还原，而不仅仅用于复制</li>
<li>主从版本可以不一样，从服务器版本可以比主服务器版本高</li>
</ul>
<p><strong>SBR 的缺点：</strong></p>
<p>不是所有的 <code>UPDATE</code> 语句都能被复制，尤其是包含不确定操作的时候。<br>调用具有不确定因素的 <code>UDF</code> 时复制也可能出问题<br>使用以下函数的语句也无法被复制：</p>
<ul>
<li>LOAD_FILE()</li>
<li>UUID()</li>
<li>USER()</li>
<li>FOUND_ROWS()</li>
<li>SYSDATE() (除非启动时启用了 <code>--sysdate-is-now</code> 选项)</li>
</ul>
<p>SBR：</p>
<ul>
<li><code>INSERT ... SELECT</code> 会产生比 <code>RBR</code> 更多的行级锁</li>
<li>复制需要进行全表扫描(<code>WHERE</code> 语句中没有使用到索引)的 <code>UPDATE</code> 时，需要比 <code>RBR</code> 请求更多的行级锁</li>
<li>对于有 <code>AUTO_INCREMENT</code> 字段的 <code>InnoDB</code> 表而言，<code>INSERT</code> 语句会阻塞其他 <code>INSERT</code> 语句</li>
<li>对于一些复杂的语句，在从服务器上的耗资源情况会更严重，而 <code>RBR</code> 模式下，只会对那个发生变化的记录产生影响</li>
<li>存储函数(不是存储过程)在被调用的同时也会执行一次 <code>NOW()</code> 函数，这个可以说是坏事也可能是好事</li>
<li>确定了的 <code>UDF</code> 也需要在从服务器上执行</li>
<li>数据表必须几乎和主服务器保持一致才行，否则可能会导致复制出错</li>
<li>执行复杂语句如果出错的话，会消耗更多资源</li>
</ul>
<p><strong>RBR 的优点：</strong></p>
<p>任何情况都可以被复制，这对复制来说是最安全可靠的<br>和其他大多数数据库系统的复制技术一样<br>多数情况下，从服务器上的表如果有主键的话，复制就会快了很多<br>复制以下几种语句时的行锁更少：</p>
<ul>
<li>INSERT … SELECT</li>
<li>包含 <code>AUTO_INCREMENT</code> 字段的 <code>INSERT</code></li>
<li>没有附带条件或者并没有修改很多记录的 <code>UPDATE</code> 或 <code>DELETE</code> 语句</li>
<li>执行 <code>INSERT</code>，<code>UPDATE</code>，<code>DELETE</code> 语句时锁更少</li>
<li>从服务器上采用多线程来执行复制成为可能</li>
</ul>
<p><strong>RBR 的缺点：</strong></p>
<ul>
<li><code>binlog</code> 大了很多</li>
<li>复杂的回滚时 <code>binlog</code> 中会包含大量的数据</li>
<li>主服务器上执行 <code>UPDATE</code> 语句时，所有发生变化的记录都会写到 <code>binlog</code> 中，而 <code>SBR</code> 只会写一次，这会导致频繁发生 <code>binlog</code> 的并发写问题</li>
<li><code>UDF</code> 产生的大 <code>BLOB</code> 值会导致复制变慢</li>
<li>无法从 <code>binlog</code> 中看到都复制了写什么语句</li>
<li>当在非事务表上执行一段堆积的SQL语句时，最好采用 <code>SBR</code> 模式，否则很容易导致主从服务器的数据不一致情况发生</li>
</ul>
<p>另外，针对系统库 <code>mysql</code> 里面的表发生变化时的处理规则如下：</p>
<ul>
<li>如果是采用 <code>INSERT</code>，<code>UPDATE</code>，<code>DELETE</code> 直接操作表的情况，则日志格式根据 <code>binlog_format</code> 的设定而记录</li>
<li>如果是采用 <code>GRANT</code>，<code>REVOKE</code>，<code>SET PASSWORD</code> 等管理语句来做的话，那么无论如何都采用 <code>SBR</code> 模式记录</li>
</ul>
<p>注：采用 <code>RBR</code> 模式后，能解决很多原先出现的主键重复问题。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/langtianya/p/5504774.html">mysql中binlog_format模式与配置详解</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/26/IDE%E3%80%81SATA%E3%80%81SCSI%E3%80%81SAS%E3%80%81FC%E3%80%81SSD%E7%A1%AC%E7%9B%98%E7%B1%BB%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/26/IDE%E3%80%81SATA%E3%80%81SCSI%E3%80%81SAS%E3%80%81FC%E3%80%81SSD%E7%A1%AC%E7%9B%98%E7%B1%BB%E5%9E%8B/" class="post-title-link" itemprop="url">IDE、SATA、SCSI、SAS、FC、SSD硬盘类型</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-26 17:35:10" itemprop="dateCreated datePublished" datetime="2020-08-26T17:35:10+00:00">2020-08-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A1%AC%E7%9B%98/" itemprop="url" rel="index"><span itemprop="name">硬盘</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>9.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>9 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="硬盘接口的分类"><a href="#硬盘接口的分类" class="headerlink" title="硬盘接口的分类"></a>硬盘接口的分类</h2><p>硬盘接口通常分为五种类型：IDE接口、SATA接口、SCSI接口、SAS接口、光纤通道(FC)。</p>
<h2 id="硬盘的分类"><a href="#硬盘的分类" class="headerlink" title="硬盘的分类"></a>硬盘的分类</h2><p>硬盘分为固态硬盘（SSD 盘）、机械硬盘（HDD）、混合硬盘（HHD）三种。</p>
<p>SSD采用闪存颗粒来存储，HDD采用磁性碟片来存储，混合硬盘(HHD: Hybrid Hard Disk)是把磁性硬盘和闪存集成到一起的一种硬盘。绝大多数硬盘都是固定硬盘，被永久性地密封固定在硬盘驱动器中。</p>
<p>IDE是俗称的并口，SATA是俗称的串口，这两种硬盘是个人电脑和低端服务器常见的硬盘。<br>SCSI是 <code>小型计算机系统专用接口</code> 的简称，SCSI硬盘就是采用这种接口的硬盘。SAS就是串口的SCSI接口。一般服务器硬盘采用这两类接口，其性能比上述两种硬盘要高，稳定性更强，但是价格高，容量小，噪音大。</p>
<p>FC是光纤通道，和SCIS接口一样，光纤通道最初也不是为硬盘设计开发的接口技术，是专门为网络系统设计的，但随着存储系统对速度的需求，才逐渐应用到硬盘系统中。</p>
<p>SSD也称作电子硬盘或者固态电子盘，是由控制单元和固态存储单元（DRAM或FLASH芯片）组成的硬盘。</p>
<p>固态硬盘的接口规范和定义、功能及使用方法上与普通硬盘的相同，在产品外形和尺寸上也与普通硬盘一致。新一代的固态硬盘普遍采用SATA-2接口，但其成本较高。</p>
<h2 id="IDE-ATA"><a href="#IDE-ATA" class="headerlink" title="IDE/ATA"></a>IDE/ATA</h2><p><code>IDE（ Integrated Drive Electronics 集成驱动器电子）</code>的缩写，它的本意是指把控制器与盘体集成在一起的硬盘驱动器，是一种硬盘的传输接口，它有另一个名称叫做 <code>ATA（Advanced Technology Attachment）</code>，这两个名词都有厂商在用，指的是相同的东西。</p>
<p><code>ATA（Advanced Technology Attachment）</code>高技术配置，一般来说，ATA是一种控制器技术，而 <code>IDE（Integrated Drive Electronics）</code> 是一个匹配它的磁盘驱动器技术，ATA和IDE通常可以互换使用。ATA下一步的技术是SATA（Serial ATA），串行ATA。有了SATA之后，原来的 <code>ATA</code>又被称为 <code>PATA（Parallel ATA</code>），并行ATA。一般意义上，<code>IDE</code> 和 <code>PATA</code> 是说的同一种东西，它们的进化型是SATA。</p>
<p>IDE的规格后来有所进步，而推出了 <code>EIDE（Enhanced IDE）</code> 的规格名称，而这个规格同时又被称为 <code>Fast ATA</code>。所不同的是 <code>Fast ATA</code> 是专指硬盘接口，而 <code>EIDE</code> 还制定了连接光盘等非硬盘产品的标准。而这个连接非硬盘类的IDE标准，又称为ATAPI接口。而之后再推出更快的接口，名称都只剩下ATA的字样，像是 <code>Ultra ATA、ATA/66、ATA/100</code> 等。</p>
<p>早期的IDE接口有两种传输模式，一个是 <code>PIO（Programming I/O）</code>模式，另一个是 <code>DMA（Direct Memory Access）</code>。虽然DMA模式系统资源占用少，但需要额外的驱动程序或设置，因此被接受的程度比较低。后来在对速度要求愈来愈高的情况下，DMA模式由于执行效率较好，操作系统开始直接支持，而且厂商更推出了愈来愈快的DMA模式传输速度标准。而从英特尔的430TX芯片组开始，就提供了对Ultra DMA 33的支持，提供了最大33MB/sec的的数据传输率，以后又很快发展到了ATA 66，ATA 100以及迈拓提出的ATA 133标准，分别提供66MB/sec，100MB/sec以及133MB/sec的最大数据传输率。</p>
<p>值得注意的是，迈拓提出的ATA 133标准并没能获得业界的广泛支持，硬盘厂商中只有迈拓自己才采用ATA 133标准，而日立（IBM），希捷和西部数据则都采用 <code>ATA 100</code> 标准，芯片组厂商中也只有 <code>VIA，SIS，ALi</code>  以及 <code>nViidia</code> 对次标准提供支持，芯片组厂商中英特尔则只支持 <code>ATA 100</code> 标准。</p>
<p>各种IDE标准都能很好的向下兼容，例如 <code>ATA 133</code> 兼容 <code>ATA 66/100</code> 和 <code>Ultra DMA33</code> ，而 <code>ATA 100</code> 也兼容 <code>Ultra DMA 33/66</code> 。</p>
<p>要特别注意的是，对 <code>ATA 66</code> 以及以上的IDE接口传输标准而言，必须使用专门的80芯IDE排线，其与普通的40芯IDE排线相比，增加了40条地线以提高信号的稳定性。</p>
<p><img src="/img/29144617-8c1ec011bbc84e0d8b9c138ea67c9003.png" alt="29144617-8c1ec011bbc84e0d8b9c138ea67c9003.png"></p>
<p>特点：</p>
<p>一般使用16-bit数据总线, 每次总线处理时传送2个字节。PATA接口一般是100Mbytes/sec带宽，数据总线必须锁定在50MHz，为了减小滤波设计的复杂性，PATA使用Ultra总线，通过“双倍数据比率”或者2个边缘(上升沿和下降沿)时钟机制用来进行DMA传输。这样在数据滤波的上升沿和下降沿都采集数据，就降低一半所需要的滤波频率。这样带宽就是:25MHz 时钟频率x 2 双倍时钟频率x 16 位/每一个边缘/ 8 位/每个字节= 100 Mbytes/sec。</p>
<p>优点:</p>
<p>自问世以来，一直以其价廉、稳定性好、标准化程度高等特点，深得广大中低端用户的青睐，甚至在某些高端应用领域，如服务器应用中也有一定的市场。</p>
<p>缺点:</p>
<p>随着CPU时钟频率和内存带宽的不断提升，其接口协议PATA(Paralle ATA)逐渐显现出不足来。一方面，硬盘制造技术的成熟使ATA硬盘的单位价格逐渐降低，另一方面，由于采用并行总线接口，传输数据和信号的总线是复用的，因此传输速率会受到一定的限制。如果要提高传输的速率，那么传输的数据和信号往往会产生干扰，从而导致错误。</p>
<p>在当今的许多大型企业中，PATA现有的传输速率已经逐渐不能满足用户的需求。</p>
<h2 id="SATA"><a href="#SATA" class="headerlink" title="SATA"></a>SATA</h2><p>使用 <code>SATA（Serial ATA）</code>口的硬盘又叫 <code>串口硬盘</code>。2001年，由Intel、APT、Dell、IBM、希捷、迈拓这几大厂商组成的Serial ATA委员会正式确立了Serial ATA 1.0规范。</p>
<p>SATA以它串行的数据发送方式得名。在数据传输的过程中，数据线和信号线独立使用，并且传输的时钟频率保持独立，因此同以往的PATA相比，SATA的传输速率可以达到并行的30倍。可以说:SATA技术并不是简单意义上的PATA技术的改进，而是一种全新的总线架构。</p>
<p><img src="/img/29144621-4227c55b80804e9f9d0d73170f719fb0.png" alt="29144621-4227c55b80804e9f9d0d73170f719fb0.png"></p>
<p>2002年，虽然串行ATA的相关设备还未正式上市，但Serial ATA委员会已抢先确立了Serial ATA 2.0规范（SATA II）。</p>
<p>Serial ATA采用串行连接方式，串行ATA总线使用嵌入式时钟信号，具备了更强的纠错能力，与以往相比其最大的区别在于能对传输指令（不仅仅是数据）进行检查，如果发现错误会自动矫正，这在很大程度上提高了数据传输的可靠性。<strong>串行接口还具有结构简单、支持热插拔的优点。</strong></p>
<p>串口硬盘是一种完全不同于并行ATA的新型硬盘接口类型，由于采用串行方式传输数据而知名。相对于并行ATA来说，就具有非常多的优势。</p>
<ul>
<li>1，Serial ATA以连续串行的方式传送数据，一次只会传送1位数据。这样能减少SATA接口的针脚数目，使连接电缆数目变少，效率也会更高。</li>
<li>2，实际上，Serial ATA 仅用四支针脚就能完成所有的工作，分别用于连接电缆、连接地线、发送数据和接收数据，同时这样的架构还能降低系统能耗和减小系统复杂性。</li>
<li>Serial ATA的起点更高、发展潜力更大，Serial ATA 1.0定义的数据传输率可达150MB/s；这比最快的并行ATA（即ATA/133）所能达到133MB/s的最高数据传输率还高；而在Serial ATA 2.0的数据传输率达到300MB/s；最终SATA将实现600MB/s的最高数据传输率。</li>
</ul>
<p>在选购主板时，其实并无必要太在意IDE接口传输标准有多快，其实在ATA 100，ATA 133以及SATA 150下硬盘性能都差不多，因为受限于硬盘的机械结构和数据存取方式，硬盘的性能瓶颈是硬盘的内部数据传输率而非外部接口标准，目前主流硬盘的内部数据传输率离ATA 100的100MB/sec都还差得很远。</p>
<h2 id="SATA-II"><a href="#SATA-II" class="headerlink" title="SATA II"></a>SATA II</h2><p>SATA的速度是每秒1.5Gbps(150MB/sec)，SATA2（Serial ATA 2.0规范）的速度是每秒3Gbps(300MB/sec)。SATA II接口主板能插SATA硬盘，SATA接口主板不能插 SATA II 盘硬，这都是向下兼容的。</p>
<p>SATA II是在SATA的基础上发展起来的，其主要特征是外部传输率从SATA的1.5G进一步提高到了3G，此外还包括NCQ（Native Command Queuing，原生命令队列）、端口多路器（Port Multiplier）、交错启动（Staggered Spin-up）等一系列的技术特征。单纯的外部传输率达到3Gbps并不是真正的SATA II。</p>
<p>SATA II的关键技术就是3Gbps的外部传输率和NCQ技术。 NCQ技术可以对硬盘的指令执行顺序进行优化，避免像传统硬盘那样机械地按照接收指令的先后顺序移动磁头读写硬盘的不同位置，与此相反，它会在接收命令后对其进行排序，排序后的磁头将以高效率的顺序进行寻址，从而避免磁头反复移动带来的损耗，延长硬盘寿命。</p>
<p>另外并非所有的SATA硬盘都可以使用NCQ技术，除了硬盘本身要支持 NCQ之外，也要求主板芯片组的SATA控制器支持NCQ。此外，NCQ技术不支持FAT文件系统，只支持NTFS文件系统。</p>
<p>由于SATA设备市场比较混乱，不少SATA设备提供商在市场宣传中滥用 <code>SATA II</code> 的现象愈演愈烈，例如某些号称 <code>SATA II</code> 的硬盘却仅支持3Gbps而不支持NCQ，而某些只具有1.5Gbps的硬盘却又支持NCQ。所以，由希捷(Seagate)所主导的 <code>SATA-IO</code> ( <code>Serial ATA International Organization</code>，<code>SATA国际组织</code>，原SATA工作组)又宣布了SATA 2.5规范，收录了原先SATA II所具有的大部分功能——从3Gbps和NCQ到交错启动(Staggered Spin-up)、热插拔(Hot Plug)、端口多路器(Port Multiplier)以及比较新的eSATA(External SATA，外置式SATA接口)等等。</p>
<p>值得注意的是，部分采用较早的仅支持1.5Gbps的南桥芯片(例如VIA VT8237和NVIDIA nForce2 MCP-R/MCP-Gb)的主板在使用SATA II硬盘时，可能会出现找不到硬盘或蓝屏的情况。不过大部分硬盘厂商都在硬盘上设置了一个速度选择跳线，以便强制选择1.5Gbps或3Gbps的工作模式(少数硬盘厂商则是通过相应的工具软件来设置)，只要把硬盘强制设置为1.5Gbps，SATA II硬盘照样可以在老主板上正常使用。</p>
<p>SATA硬盘在设置RAID模式时，一般都需要安装主板芯片组厂商所提供的驱动，但也有少数较老的SATA RAID控制器在打了最新补丁的某些版本的Windows XP系统里不需要加载驱动就可以组建RAID。</p>
<h2 id="SCSI"><a href="#SCSI" class="headerlink" title="SCSI"></a>SCSI</h2><p>SCSI的英文全称为 <code>Small Computer System Interface</code>（小型计算机系统接口），是同IDE（ATA）完全不同的接口，IDE接口是普通PC的标准接口，而SCSI并不是专门为硬盘设计的接口，是一种广泛应用于小型机上的高速数据传输技术。SCSI接口具有应用范围广、多任务、带宽大、CPU占用率低，以及热插拔等优点，但较高的价格使得它很难如IDE硬盘般普及，因此SCSI硬盘主要应用于中、高端服务器和高档工作站中。</p>
<p><img src="/img/29144631-d4cf3905a28f480a876dd7e5ac503ca4.png" alt="29144631-d4cf3905a28f480a876dd7e5ac503ca4.png"></p>
<p><img src="/img/29144633-e02259701add495aaf74ff2b2192eee6.png" alt="29144633-e02259701add495aaf74ff2b2192eee6.png"></p>
<p>优点:</p>
<p>系统占用率极低，转速快，传输率高.</p>
<p>缺点:</p>
<p>价格高、安装不便、还需要设置及其安装驱动程序，因此这种接口的硬盘大多用于服务器等高端应用场合。</p>
<h2 id="SAS"><a href="#SAS" class="headerlink" title="SAS"></a>SAS</h2><p>SAS(Serial Attached SCSI)即串行连接SCSI，是新一代的SCSI技术。和现在流行的Serial ATA(SATA)硬盘相同，都是采用串行技术以获得更高的传输速度，并通过缩短连结线改善内部空间等。SAS是并行SCSI接口之后开发出的全新接口。此接口的设计是为了改善存储系统的效能、可用性和扩充性，并且提供与SATA硬盘的兼容性。</p>
<p>SAS的接口技术可以向下兼容SATA。具体来说，二者的兼容性主要体现在物理层和协议层的兼容。</p>
<ul>
<li><p>1，在物理层，SAS接口和SATA接口完全兼容，SATA硬盘可以直接使用在SAS的环境中，从接口标准上而言，SATA是SAS的一个子标准，因此SAS控制器可以直接操控SATA硬盘，但是SAS却不能直接使用在SATA的环境中，因为SATA控制器并不能对SAS硬盘进行控制；</p>
</li>
<li><p>2，在协议层，SAS由3种类型协议组成，根据连接的不同设备使用相应的协议进行数据传输。其中串行SCSI协议(SSP)用于传输SCSI命令；SCSI管理协议(SMP)用于对连接设备的维护和管理；SATA通道协议(STP)用于SAS和SATA之间数据的传输。因此在这3种协议的配合下，SAS可以和SATA以及部分SCSI设备无缝结合。</p>
</li>
</ul>
<p>SAS系统的背板(Backplane)既可以连接具有双端口、高性能的SAS驱动器，也可以连接高容量、低成本的SATA驱动器。所以SAS驱动器和SATA驱动器可以同时存在于一个存储系统之中。但需要注意的是，SATA系统并不兼容SAS，所以SAS驱动器不能连接到SATA背板上。由于SAS系统的兼容性，使用户能够运用不同接口的硬盘来满足各类应用在容量上或效能上的需求，因此在扩充存储系统时拥有更多的弹性，让存储设备发挥最大的投资效益。</p>
<p>在系统中，每一个SAS端口可以最多可以连接16256个外部设备，并且SAS采取直接的点到点的串行传输方式，传输的速率高达3Gbps，估计以后会有6Gbps乃至12Gbps的高速接口出现。</p>
<p>SAS的接口也做了较大的改进，它同时提供了3.5英寸和2.5英寸的接口，因此能够适合不同服务器环境的需求。</p>
<p>SAS依靠SAS扩展器来连接更多的设备，目前的扩展器以12端口居多，不过根据板卡厂商产品研发计划显示，未来会有28、36端口的扩展器引入，来连接SAS设备、主机设备或者其他的SAS扩展器。</p>
<p>和传统并行SCSI接口比较起来，SAS不仅在接口速度上得到显著提升(现在主流Ultra 320 SCSI速度为320MB/sec，而SAS才刚起步速度就达到300MB/sec，未来会达到600MB/sec甚至更多)，而且由于采用了串行线缆，不仅可以实现更长的连接距离，还能够提高抗干扰能力，并且这种细细的线缆还可以显著改善机箱内部的散热情况。</p>
<p>SAS目前的不足主要有以下方面：</p>
<ul>
<li>1，硬盘、控制芯片种类少：</li>
</ul>
<p>只有希捷、迈拓以及富士通等为数不多的硬盘厂商推出了SAS接口硬盘，品种太少，其他厂商的SAS硬盘多数处在产品内部测试阶段。此外周边的SAS控制器芯片或者一些SAS转接卡的种类更是不多，多数集中在LSI以及Adaptec公司手中。</p>
<ul>
<li>2，硬盘价格太贵：</li>
</ul>
<p>比起同容量的Ultra 320 SCSI硬盘，SAS硬盘要贵了一倍还多。一直居高不下的价格直接影响了用户的采购数量和渠道的消化数量，而无法形成大批量生产的SAS 硬盘，其成本的压力又会反过来促使价格无法下降。</p>
<p>如果用户想要做个简单的RAID级别，那么不仅需要购买多块SAS硬盘，还要购买昂贵的RAID卡，价格基本上和硬盘相当。</p>
<ul>
<li>3， 实际传输速度变化不大：</li>
</ul>
<p>SAS硬盘的接口速度并不代表数据传输速度，受到硬盘机械结构限制，现在SAS硬盘的机械结构和SCSI硬盘几乎一样。目前数据传输的瓶颈集中在由硬盘内部机械机构、硬盘存储技术、磁盘转速，所决定的硬盘内部数据传输速度，也就是80MBsec左右，SAS硬盘的性能提升不明显。</p>
<ul>
<li>4， 用户追求成熟、稳定的产品：</li>
</ul>
<p>从现在已经推出的产品来看，SAS硬盘更多的被应用在高端4路服务器上，而4路以上服务器用户并非一味追求高速度的硬盘接口技术，最吸引他们的应该是成熟、稳定的硬件产品，虽然SAS接口服务器和SCSI接口产品在速度、稳定性上差不多，但目前的技术和产品都还不够成熟。</p>
<p>不过随着英特尔等主板芯片组制造商、希捷等硬盘制造商以及众多的服务器制造商的大力推动，SAS的相关产品技术会逐步成熟，价格也会逐步滑落，早晚都会成为服务器硬盘的主流接口。</p>
<h2 id="FC"><a href="#FC" class="headerlink" title="FC"></a>FC</h2><p>光纤通道的英文拼写是Fiber Channel，和SCIS接口一样光纤通道最初也不是为硬盘设计开发的接口技术，是专门为网络系统设计的，但随着存储系统对速度的需求，才逐渐应用到硬盘系统中。光纤通道硬盘是为提高多硬盘存储系统的速度和灵活性才开发的，它的出现大大提高了多硬盘系统的通信速度。光纤通道的主要特性有：热插拔性、高速带宽、远程连接、连接设备数量大等。</p>
<p>FC硬盘是指采用FC-AL( Fiber Channel  Arbitrated  Loop，光纤通道仲裁环) 接口模式的磁盘。FC-AL使光纤通道能够直接作为硬盘连接接口，为高吞吐量性能密集型系统的设计者开辟了一条提高I/O性能水平的途径。目前高端存储产品使用的都是FC接口的硬盘。 </p>
<p>FC硬盘名称由于通过光学物理通道进行工作，因此起名为光纤硬盘，现在也支持铜线物理通道。就像是IEEE-1394, Fibre Channel 实际上定义为SCSI-3标准一类，属于SCSI的同胞兄弟。作为串行接口FC-AL峰值可以达到2Gbits/s甚至是4Gbits/s。而且通过光学连接设备最大传输距离可以达到10KM。通过FC-loop可以连接127个设备，也就是为什么基于FC硬盘的存储设备通常可以连接几百颗甚至千颗硬盘提供大容量存储空间。 </p>
<p>关于光纤硬盘以其的优越的性能、稳定的传输，在企业存储高端应用中担当重要角色。业界普遍关注的焦点在于光纤接口的带宽。最早普及使用的光纤接口带宽为1Gb，随后2Gb带宽光纤产品统治市场已经长达三年时间。现在的带宽标准是4Gb，目前普遍厂商都已经采用4Gb相关产品。8Gb光纤产品也将在不久的将来取代4Gb光纤成为市场主流。 </p>
<p>4Gb是以2Gb为基础延伸的传输协议，可以向下兼容1Gb和2Gb，所使用的光纤线材、连接端口也都相同，意味着使用者在导入4Gb设备时，不需为了兼容性问题更换旧有的设备，不但可以保护既有的投资，也可以采取渐进式升级的方式，逐步淘汰旧有的2Gb设备。</p>
<p>光纤通道是为在像服务器这样的多硬盘系统环境而设计，能满足高端工作站、服务器、海量存储子网络、外设间通过集线器、交换机和点对点连接进行双向、串行数据通讯等系统对高数据传输率的要求。</p>
<h2 id="SSD"><a href="#SSD" class="headerlink" title="SSD"></a>SSD</h2><p>固态硬盘（Solid State Disk或Solid State Drive），也称作电子硬盘或者固态电子盘，是由控制单元和固态存储单元（DRAM或FLASH芯片）组成的硬盘。存储单元负责存储数据，控制单元负责读取、写入数据。拥有速度快，耐用防震，无噪音，重量轻等优点。固态硬盘的接口规范和定义、功能及使用方法上与普通硬盘的相同，在产品外形和尺寸上也与普通硬盘一致。由于固态硬盘没有普通硬盘的旋转介质，因而抗震性极佳。其芯片的工作温度范围很宽（-40~85℃）。目前广泛应用于军事、车载、工控、视频监控、网络监控、网络终端、电力、医疗、航空等、导航设备等领域。目前由于成本较高，正在逐渐普及到DIY市场。</p>
<p>由于固态硬盘技术与传统硬盘技术不同，所以产生了不少新兴的存储器厂商。厂商只需购买NAND存储器，再配合适当的控制芯片，就可以制造固态硬盘了。新一代的固态硬盘普遍采用SATA-2接口。</p>
<p>固态硬盘的存储介质分为两种，一种是采用闪存（FLASH芯片）作为存储介质，另外一种是采用DRAM作为存储介质。</p>
<p>SSD固态优点： 
　　</p>
<ul>
<li>第一，SSD不需要机械结构，完全的半导体化，不存在数据查找时间、延迟时间和磁盘寻道时间，数据存取速度快，读取数据的能力在230M/s以上，最高的可达500M/s以上。 </li>
<li>第二，SSD全部采用闪存芯片，经久耐用，防震抗摔，即使发生与硬物碰撞，数据丢失的可能性也能够降到最小。 </li>
<li>第三，得益于无机械部件及FLASH闪存芯片，SSD没有任何噪音，功耗低。 </li>
<li>第四，质量轻，比常规1.8英寸硬盘重量轻20-30克，使得便携设备搭载多块SSD成为可能。同时因其完全半导体化，无结构限制，可根据实际情况设计成各种不同接口、形状的特殊电子硬盘。</li>
</ul>
<p>SSD的劣势
　　</p>
<ul>
<li><p>固态硬盘成本高。 </p>
</li>
<li><p>固态硬盘的寿命有限 对于采用Nand Flash作为存储介质的SSD来说，怀疑其使用寿命也不是没有道理的，理论上MLC的写入寿命为1万次，SLC的写入寿命为10万次。但是否意味着一个 固态硬盘的寿命只有2到3年呢，这个也不一定。英特尔表示保证能在未来5年里，每天可以向其MLC SSD产品中写入100GB的数据，并且保证其数据的完整性。如果不是写入太频繁的话，正常使用用5年以上是没有问题的。</p>
</li>
<li><p><strong>（1）基于闪存的固态硬盘（IDE FLASH DISK、Serial ATA Flash Disk）</strong></p>
</li>
</ul>
<p>采用FLASH芯片作为存储介质，这也是我们通常所说的SSD。它的外观可以被制作成多种模样，例如：笔记本硬盘、微硬盘、存储卡、优盘等样式。这种SSD固态硬盘最大的优点就是可以移动，而且数据保护不受电源控制，能适应于各种环境，但是使用年限不高，适合于个人用户使用。</p>
<p>在基于闪存的固态硬盘中，存储单元又分为两类：SLC（Single Layer Cell 单层单元）和MLC（Multi-Level Cell多层单元）。</p>
<p>SLC的特点是成本高、容量小、但是速度快，而MLC的特点是容量大成本低，但是速度慢。MLC的每个单元是2bit的，相对SLC来说整整多了一倍。不过，由于每个MLC存储单元中存放的资料较多，结构相对复杂，出错的几率会增加，必须进行错误修正，这个动作导致其性能大幅落后于结构简单的SLC闪存。此外，SLC闪存的优点是复写次数高达100000次，比MLC闪存高10倍。此外，为了保证MLC的寿命，控制芯片都校验和智能磨损平衡技术算法，使得每个存储单元的写入次数可以平均分摊，达到100万小时故障间隔时间(MTBF)。</p>
<ul>
<li><strong>（2）基于DRAM的固态硬盘</strong></li>
</ul>
<p>采用DRAM作为存储介质，目前应用范围较窄。它仿效传统硬盘的设计、可被绝大部分操作系统的文件系统工具进行卷设置和管理，并提供工业标准的PCI和FC接口用于连接主机或者服务器。应用方式可分为SSD硬盘和SSD硬盘阵列两种。它是一种高性能的存储器，而且使用寿命很长，美中不足的是需要独立电源来保护数据安全。</p>
<p>单纯硬盘的硬盘接口协议也不是衡量一个存储系统性能指标的唯一要素，除了硬盘性能指标以外，存储系统的硬件设计，前端主机接口等性能指标也同样对存储系统的整体性能影响巨大。<br>如果需要应用于I/O负载较轻的应用比如文件共享、FTP、音频存储、数据备份等可以考虑基于SATA硬盘的阵列。如果I/O负载较重的FTP、VOD、EMAIL、Web、数据库应用，那么可以考虑基于SAS/FC硬盘的存储系统。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>单纯硬盘的硬盘接口协议也不是衡量一个存储系统性能指标的唯一要素，除了硬盘性能指标以外，存储系统的硬件设计，前端主机接口等性能指标也同样对存储系统的整体性能影响巨大。<br>如果需要应用于I/O负载较轻的应用比如文件共享、FTP、音频存储、数据备份等可以考虑基于 <code>SATA</code> 硬盘的阵列。<br>如果I/O负载较重的FTP、VOD、EMAIL、Web、数据库应用，那么可以考虑基于 <code>SAS/FC</code> 硬盘的存储系统。 </p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaodoujiaohome/p/11732687.html">硬盘基础知识（HDD、SSD、IDE、PATA、SATA、SCSI、SAS）</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/tianlesoftware/article/details/6009110">IDE、SATA、SCSI、SAS、FC、SSD硬盘类型介绍</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/sammyliu/p/5729026.html">识别 Linux上的设备（磁盘）类型</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kylingx/p/11704994.html">ovirt磁盘类型（IDE, virtio, virtio-scsi）</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/26/Linux%E8%BD%AF%E7%A1%AC%E9%93%BE%E6%8E%A5%E4%B9%8B-ln%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/26/Linux%E8%BD%AF%E7%A1%AC%E9%93%BE%E6%8E%A5%E4%B9%8B-ln%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux软硬链接之-ln命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-26 09:37:02" itemprop="dateCreated datePublished" datetime="2020-08-26T09:37:02+00:00">2020-08-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" itemprop="url" rel="index"><span itemprop="name">Linux基础命令</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Linux具有为一个文件起多个名字的功能，称为链接。被链接的文件可以存放在相同的目录下，但是必须有不同的文件名，而不用在硬盘上为同样的数据重复备份。另外，被链接的文件也可以有相同的文件名，但是存放在不同的目录下，这样只要对一个目录下的该文件进行修改，就可以完成对所有目录下同名链接文件的修改。对于某个文件的各链接文件，我们可以给它们指定不同的存取权限，以控制对信息的共享和增强安全性。</p>
<p>Linux链接分两种，</p>
<ul>
<li>硬链接（Hard Link）；</li>
<li>软链接，即符号链接（Symbolic Link）。默认情况下，ln命令产生硬链接。</li>
</ul>
<p>硬链接的意思是一个档案可以有多个名称，而软链接的方式则是产生一个特殊的档案，该档案的内容是指向另一个档案的位置信息。<strong>硬链接是存在同一个文件系统中，而软链接却可以跨越不同的文件系统。</strong></p>
<p><strong>不论是硬链接或软链接都不会将原本的档案复制一份，只会占用非常少量的磁碟空间。</strong></p>
<h3 id="软连接"><a href="#软连接" class="headerlink" title="软连接"></a>软连接</h3><ul>
<li>软链接，以路径的形式存在。类似于Windows操作系统中的快捷方式</li>
<li>软链接可以 跨文件系统 ，硬链接不可以</li>
<li>软链接可以对一个不存在的文件名进行链接</li>
<li>软链接可以对目录进行链接</li>
</ul>
<h3 id="硬链接"><a href="#硬链接" class="headerlink" title="硬链接"></a>硬链接</h3><ul>
<li>硬链接，以文件副本的形式存在。但不占用实际空间。</li>
<li>不允许给目录创建硬链接</li>
<li>硬链接只有在同一个文件系统中才能创建</li>
<li>硬链接只能在同一个分区内建立。</li>
</ul>
<p>硬连接指通过索引节点来进行连接。在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为 <code>索引节点号(Inode Index)</code>。多个文件名指向同一索引节点是存在的。一般这种连接就是硬连接。硬连接的作用是允许一个文件拥有多个有效路径名，这样用户就可以建立硬连接到重要文件，以防止<code>误删</code> 的功能。 </p>
<p>硬连接 inode 会指向文件内容所在的数据块。与此同时，该文件内容所在的数据块的引用计数会加 1。当此数据块的引用计数大于等于 2 时，则表示有多个文件同时指向了这一数据块。一个文件修改，多个文件都会生效。当删除其中某个文件时，对另一个文件不会有影响，仅仅是数据块的引用计数减 1。当引用计数为 0 时，则系统才会清除此数据块。</p>
<p>因为对应该目录的索引节点有一个以上的连接。只删除一个连接并不影响索引节点本身和其它的连接，只有当最后一个连接被删除后，文件的数据块及目录的连接才会被释放。</p>
<p>硬连接 inode 会指向文件内容所在的数据块。与此同时，该文件内容所在的数据块的引用计数会加 1。当此数据块的引用计数大于等于 2 时，则表示有多个文件同时指向了这一数据块。一个文件修改，多个文件都会生效。当删除其中某个文件时，对另一个文件不会有影响，仅仅是数据块的引用计数减 1。当引用计数为 0 时，则系统才会清除此数据块。</p>
<p><strong>所以，文件真正删除的条件是与之相关的所有硬连接文件均被删除。</strong></p>
<h2 id="ln命令"><a href="#ln命令" class="headerlink" title="ln命令"></a>ln命令</h2><p>ln命令为某一个文件在另外一个位置建立一个同步的链接。</p>
<p>语法：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> [参数] [源文件或目录] [目标文件或目录]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 其中参数的格式为</span></span><br><span class="line"><span class="built_in">ln</span> [-bdfinsvF] [-S backup-suffix] [-V &#123;numbered,existing,simple&#125;] [--<span class="built_in">help</span>] [--version] [--]</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除，覆盖目标文件之前的备份；</span></span><br><span class="line">-b 或 --backup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立目录的硬连接；</span></span><br><span class="line">-d 或 -F 或 --directory</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强行建立文件或目录的连接，不论文件或目录是否存在；</span></span><br><span class="line">-f 或 --force</span><br><span class="line"></span><br><span class="line"><span class="comment"># 覆盖既有文件之前先询问用户；</span></span><br><span class="line">-i 或 --interactive</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把符号连接的目的目录视为一般文件；</span></span><br><span class="line">-n 或 --no-dereference</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对源文件建立软链接（符号连接），而非硬连接；</span></span><br><span class="line">-s 或 --symbolic</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用 -b 参数备份目标文件后，备份文件的字尾会被加上一个备份字符串，</span></span><br><span class="line"><span class="comment"># 预设的备份字符串是符号 ~，用户可通过 -S 参数来改变它；</span></span><br><span class="line">-S&lt;字尾备份字符串&gt; 或 --suffix=&lt;字尾备份字符串&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示指令执行过程；</span></span><br><span class="line">-v 或 --verbose</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用 -b 参数备份目标文件后，备份文件的字尾会被加上一个备份字符串，</span></span><br><span class="line"><span class="comment"># 这个字符串不仅可用 -S 参数变更，当使用 -V 参数&lt;备份方式&gt; </span></span><br><span class="line"><span class="comment"># 指定不同备份方式时，也会产生不同字尾的备份字符串；</span></span><br><span class="line">-V&lt;备份方式&gt; 或 --version-control=&lt;备份方式&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在线帮助；</span></span><br><span class="line">--<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示版本信息。</span></span><br><span class="line">--version</span><br></pre></td></tr></table></figure>

<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p><strong>建立硬链接</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建文件</span></span><br><span class="line"><span class="built_in">touch</span> source.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建硬链接</span></span><br><span class="line"><span class="built_in">ln</span> source.txt hardsource.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># -i 选项表示列出每个文件的 inode 节点 ID</span></span><br><span class="line"><span class="comment"># 可以发现 source.txt 和 hardsource.txt 的 inode 号完全一致，</span></span><br><span class="line"><span class="comment"># 说明它们都指向了同一个数据块。</span></span><br><span class="line"><span class="built_in">ls</span> -il</span><br><span class="line">总用量 0</span><br><span class="line">1042588 -rw-r--r-- 2 root root 0 8月  26 10:55 hardsource.txt</span><br><span class="line">1042588 -rw-r--r-- 2 root root 0 8月  26 10:55 source.txt</span><br></pre></td></tr></table></figure>

<p><strong>软连接</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建软链接</span></span><br><span class="line"><span class="built_in">ln</span> -s source.txt softsource.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出 文件列表</span></span><br><span class="line"><span class="comment"># 注意：软链接文件的权限栏首字符为 l（L的小写字母），这也是软链接文件区别于普通文件的地方之一。</span></span><br><span class="line"><span class="built_in">ls</span> -il</span><br><span class="line">总用量 0</span><br><span class="line">1042588 -rw-r--r-- 2 root root  0 8月  26 10:55 hardsource.txt</span><br><span class="line">1042589 lrwxrwxrwx 1 root root 10 8月  26 10:59 softsource.txt -&gt; source.txt</span><br><span class="line">1042588 -rw-r--r-- 2 root root  0 8月  26 10:55 source.txt</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/25/Linux%E7%8B%AC%E7%AB%8B%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/25/Linux%E7%8B%AC%E7%AB%8B%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86/" class="post-title-link" itemprop="url">Linux独立服务管理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-25 13:54:29" itemprop="dateCreated datePublished" datetime="2020-08-25T13:54:29+00:00">2020-08-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E6%9C%8D%E5%8A%A1/" itemprop="url" rel="index"><span itemprop="name">Linux服务</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="独立服务启动管理"><a href="#独立服务启动管理" class="headerlink" title="独立服务启动管理"></a>独立服务启动管理</h2><h3 id="使用-etc-init-d-目录中的启动脚本来启动独立的服务"><a href="#使用-etc-init-d-目录中的启动脚本来启动独立的服务" class="headerlink" title="使用/etc/init.d/目录中的启动脚本来启动独立的服务"></a>使用/etc/init.d/目录中的启动脚本来启动独立的服务</h3><p>所有独立服务的启动脚本都存放在 <code>/etc/init.d/</code> 目录中，调用这些脚本就可以启动独立的服务（推荐启动方式）。</p>
<p>命令格式如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d 独立服务名 start | stop |status | restart |...</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li>start：启动服务；</li>
<li>stop：停止服务；</li>
<li>status：查看服务状态；</li>
<li>restart：重启动服务；</li>
</ul>
<h3 id="使用service命令来启动独立的服务"><a href="#使用service命令来启动独立的服务" class="headerlink" title="使用service命令来启动独立的服务"></a>使用service命令来启动独立的服务</h3><p>CentOS 可以依赖 <code>service</code> 命令来启动独立的服务。<code>service</code> 命令实际上只是一个脚本，这个脚本仍然需要调用 <code>/etc/init.d/</code> 中的启动脚本来启动独立的服务。</p>
<p><strong>注意：</strong>service 命令是红帽系列 Linux 的专有命令，其他的 Linux 发行版本不一定拥有这条命令。</p>
<p>命令格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">service 独立服务名 start | stop | restart |...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有独立服务的启动状态</span></span><br><span class="line">service --status -all</span><br></pre></td></tr></table></figure>

<h2 id="独立服务的自启动管理"><a href="#独立服务的自启动管理" class="headerlink" title="独立服务的自启动管理"></a>独立服务的自启动管理</h2><h3 id="chkconfig-服务自启动管理命令"><a href="#chkconfig-服务自启动管理命令" class="headerlink" title="chkconfig 服务自启动管理命令"></a>chkconfig 服务自启动管理命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig [--level 运行级别] [独立服务名] [on|off]</span><br></pre></td></tr></table></figure>

<p>如果在 0~6 这 7 个运行级别中服务都显示”关闭”，则该服务不自启动。如果在某个运行级别中显示”启用”，则代表在进入这个运行级别时，该服务开机自启动。</p>
<h3 id="修改-etc-rc-d-rc-local-文件，设置服务自启动"><a href="#修改-etc-rc-d-rc-local-文件，设置服务自启动" class="headerlink" title="修改 /etc/rc.d/rc.local 文件，设置服务自启动"></a>修改 /etc/rc.d/rc.local 文件，设置服务自启动</h3><p>在文件 <code>/etc/rc.d/rc.local</code> 中加入服务的启动命令。这个文件是在系统启动时，在输入用户名和密码之前最后读取的文件（注意：<code>/etc/rc.d/rc.local</code> 和 <code>/etc/rc.local</code> 文件是软链接，修改哪个文件都可以）。这个文件中有什么命令，都会在系统启动时调用。</p>
<p>推荐使用这种方法管理服务的自启动，有两点好处：</p>
<ul>
<li>第一，如果都采用这种方法管理服务的自启动，当我们碰到一台陌生的服务器时，只要查看这个文件就知道这台服务器到底自启动了哪些服务，便于集中管理。</li>
<li>第二，chkconfig 命令只能识别 RPM 包默认安装的服务，而不能识别源码包安装的服务。 源码包安装的服务的自启动也是通过 <code>/etc/rc.d/rc.local</code> 文件实现的，所以不会出现同一台服务器自启动了两种安装方法的同一个服务。</li>
</ul>
<p><strong>注意</strong> 修改 <code>/etc/rc.d/rc.local</code> 配置文件的自启动方法和 <code>chkconfig</code> 命令的自启动方法是两种不同的自启动方法。所以，就算通过修改 <code>/etc/rc.d/rc.local</code> 配置文件的方法让某个独立的服务自启动了，执行 <code>chkconfig --list</code> 命令并不到有什么变化。</p>
<h3 id="使用-ntsysv-命令管理自启动"><a href="#使用-ntsysv-命令管理自启动" class="headerlink" title="使用 ntsysv 命令管理自启动"></a>使用 ntsysv 命令管理自启动</h3><p>ntsysv 命令调用窗口模式来管理服务的自启动</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令格式</span></span><br><span class="line">ntsysv [--level 运行级别]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只设定2、3、5级别的服务自启动</span></span><br><span class="line">ntsysv --level 235</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按默认的运行级别设置服务自启动</span></span><br><span class="line">ntsysv</span><br></pre></td></tr></table></figure>

<p>执行命令后，会和 setup 命令类似，出现命令界面</p>
<p><img src="/img/2-1Q02415591C13.jpg" alt="2-1Q02415591C13.jpg"></p>
<ul>
<li>上下键：在不同服务之间移动；</li>
<li>空格键：选定或取消服务的自启动。也就是在服务之前是否输入”*”；</li>
<li>Tab键：在不同项目之间切换；</li>
<li>F1键：显示服务的说明；</li>
</ul>
<p><strong>总结：</strong>只要是 RPM 包默认安装的服务都能被 <code>ntsysv</code> 命令管理,包括 <code>独立服务的自启动</code>，<code>基于 xinetd 服务的自启动</code>。</p>
<p><strong>注意：</strong> <code>ntsysv</code> 命令是红帽系列 Linux 的专有命令，其他的 Linux 发行版本不一定拥有这条命令，而且条命令也不能管理源码包安装的服务。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/1053.html">Linux独立服务管理</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/25/Linux-chkconfig%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/25/Linux-chkconfig%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">Linux-chkconfig命令详解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-25 13:04:55" itemprop="dateCreated datePublished" datetime="2020-08-25T13:04:55+00:00">2020-08-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" itemprop="url" rel="index"><span itemprop="name">Linux基础命令</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><code>chkconfig</code> 命令主要用来检查，设置，更新（启动或停止）系统的各种服务和查询系统服务的运行级信息。</p>
<p>这是Red Hat公司遵循GPL规则所开发的程序，它可查询操作系统在每一个执行等级中会执行哪些系统服务，其中包括各类常驻服务。<br>注意： <code>chkconfig</code> 不是立即自动禁止或激活一个服务，它只是简单的改变了符号连接。</p>
<p><strong>语法</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chkconfig [--add][--del][--list] [系统服务] </span><br><span class="line">chkconfig [--level &lt;等级代号&gt;] [系统服务] [on/off/reset]</span><br></pre></td></tr></table></figure>

<p><strong>参数：</strong></p>
<p><code>--add</code> ：增加所指定的系统服务，让 <code>chkconfig</code> 指令得以管理它，并同时在系统启动的叙述文件内增加相关数据。<br><code>--del</code> ：删除所指定的系统服务，不再由 <code>chkconfig</code> 指令管理，并同时在系统启动的叙述文件内删除相关数据。<br><code>--level&lt;等级代号&gt;</code> ：指定读系统服务要在哪一个执行等级中开启或关毕。</p>
<p><strong>用法</strong></p>
<ul>
<li><code>chkconfig</code> 在没有参数运行时，显示用法。</li>
<li>如果加上服务名，那么就检查这个服务是否在当前运行级启动。如果是，返回 <code>true</code> ，否则返回 <code>false</code> 。</li>
<li>如果在服务名后面指定了 <code>on，off</code> 或者 <code>reset</code>，那么 <code>chkconfig</code> 会改变指定服务的启动信息。</li>
<li><code>on</code> 和 <code>off</code> 分别指服务被启动和停止，<code>reset</code> 指重置服务的启动信息，无论有问题的初始化脚本指定了什么。</li>
<li><code>on</code> 和 <code>off</code> 开关，系统默认只对运行级 <code>2，3，4，5</code> 有效，但是reset可以对所有运行级有效。</li>
</ul>
<p>等级0表示：表示关机<br>等级1表示：单用户模式<br>等级2表示：无网络连接的多用户命令行模式<br>等级3表示：有网络连接的多用户命令行模式<br>等级4表示：不可用<br>等级5表示：带图形界面的多用户模式<br>等级6表示：重新启动</p>
<p><strong>注意：</strong> <code>level</code> 选项可以指定要查看的运行级而不一定是当前运行级。对于每个运行级，只能有一个启动脚本或者停止脚本。当切换运行级时， <code>init</code> 不会重新启动已经启动的服务，也不会再次去停止已经停止的服务。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示所有运行级系统服务的运行状态信息（on或off）。</span></span><br><span class="line"><span class="comment"># 如果指定了name，那么只显示指定的服务在不同运行级的状态。</span></span><br><span class="line">chkconfig --list [name]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加一项新的服务。chkconfig确保每个运行级有一项启动(S)或者杀死(K)入口。</span></span><br><span class="line"><span class="comment"># 如有缺少，则会从缺省的init脚本自动建立。在chkconfig工具服务列表中增加此服务，</span></span><br><span class="line"><span class="comment"># 此时服务会被在 `/etc/rc.d/rcN.d` 中赋予 `K/S` 入口了；</span></span><br><span class="line">chkconfig --add name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除服务，并把相关符号连接从/etc/rc[0-6].d删除。</span></span><br><span class="line">chkconfig --del name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置某一服务在指定的运行级是被启动，停止还是重置。</span></span><br><span class="line">chkconfig [--level levels] name</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/25/Linux%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E5%88%86%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/25/Linux%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E5%88%86%E7%B1%BB/" class="post-title-link" itemprop="url">Linux系统服务分类</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-25 10:48:50" itemprop="dateCreated datePublished" datetime="2020-08-25T10:48:50+00:00">2020-08-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E6%9C%8D%E5%8A%A1/" itemprop="url" rel="index"><span itemprop="name">Linux服务</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>系统服务是在后台运行的应用程序，并且可以提供一些本地系统或网络的功能。我们把这些应用程序称作服务，也就是 <code>Service</code>。或者 <code>Daemon</code> ，<code>Daemon</code> 的英文原意是”守护神”，在这里是”守护进程”的意思。守护进程就是为了实现服务、功能的进程。例如：httpd 守护进程（Daemon）启动 apache 服务的进程，守护进程就是服务在后台运行的真实进程。</p>
<h2 id="守护进程"><a href="#守护进程" class="headerlink" title="守护进程"></a>守护进程</h2><p>Linux系统上提供服务的程序是由运行在后台的守护进程（Daemon）来执行。一个实际运行中的Linux系统一般会有多个这样的程序在运行。这些后台守护进程在系统开机后就运行了，并且在时刻地监听前台客户地服务请求，一旦客户发出了服务请求，守护进程便为它们提供服务。Windows系统中的守护进程被称为 <code>服务</code>。</p>
<p>按照服务类型，守护进程可以分为如下两类：</p>
<ul>
<li>系统守护进程：如 <code>crond(周期任务)</code>、<code>rsyslogd(日志服务)</code>、<code>cpus</code>等；</li>
<li>网络守护进程：如 <code>sshd</code>、<code>httpd</code>、<code>xinetd（托管）</code>等。</li>
</ul>
<p><strong>系统守护进程</strong></p>
<p>系统初始化进程是一个特殊的的守护进程，其PID为1，它是所有其他守护进程的父进程或者祖先进程。也就是说，系统上所有的守护进程都是由系统初始化进程进行管理的（如启动、停止等）。</p>
<p>在Linux的发展历史过程中，使用过3种Linux初始化系统。</p>
<p>SysVinit</p>
<p>为 UNIX System V 系统创建的；<br>RHEL/CentOS 5及之前的版本一直使用。</p>
<p>Upstart</p>
<p>由Ubuntu创建的；<br>RHEL/CentOS 6 使用Upstart。</p>
<p>Systemd</p>
<p>先进的初始化系统；<br>RHEL/CentOS 7使用Systemd。</p>
<p><strong>独立启动的守护进程</strong>：stand-alone，每个特定服务都有单独的守护进程，这个处理单一服务的始终存在的进程就是独立启动的守护进程。<br><strong>超级守护进程</strong>：多个服务统一由一个进程管理，该进程可以管理多个服务。<br><code>Xinetd</code>：即 <code>extended internet daemon</code>，是新一代的网络守护进程服务程序，又叫超级Internet服务器，常用来管理多种轻量级Internet服务。Xinetd提供类似于 <code>inetd+tcp_wrapper</code> 的功能，但是更加强大和安全。</p>
<h2 id="服务分类"><a href="#服务分类" class="headerlink" title="服务分类"></a>服务分类</h2><p>Linux 中的服务按照安装方法不同可以分为 <code>RPM 包默认安装的服务</code>和 <code>源码包安装</code> 的服务两大类。其中，RPM 包默认安装的服务又因为启动与自启动管理方法不同，分为 <code>独立的服务</code> 和 <code>基于 xinetd 的服务</code> 。服务分类的关系图，如图所示</p>
<p><img src="/img/2-1Q02413195AP.jpg" alt="2-1Q02413195AP.jpg"></p>
<p>Linux 中常见的软件包有两种：</p>
<ul>
<li>一种是 RPM 包；</li>
<li>另一种是源码包。</li>
</ul>
<p>通过 <code>RPM 包安装</code> 的系统服务就是 RPM 包默认安装的服务（因为 Linux 光盘中全是 RPM 包，Linux 系统也是通过 RPM 包安装的，所以我们把 RPM 包又叫作 <code>系统默认包</code> ），<br>通过 <code>源码包安装</code> 的系统服务就是源码包安装的服务。</p>
<p><strong>特点</strong></p>
<ul>
<li>源码包是开源的，自定义性强，通过编译安装更加适合系统，但是安装速度较慢，编译时容易报错。</li>
<li>RPM 包是经过编译的软件包，安装更快速，不易报错，但不再是开源的。</li>
</ul>
<p><strong>区别</strong></p>
<p>最主要的区别就是安装位置不同，源码包安装到我们手工指定的位置当中，而 RPM 包安装到系统默认位置当中（可以通过 <code>rpm -ql 包名</code> 命令查询）。</p>
<p>也就是说，RPM 包安装到系统默认位置，可以被服务管理命令识别；但是源码包安装到手工指定位置，当然就不能被服务管理命令识别了（可以手工修改为被服务管理命令识别）。</p>
<p>所以，RPM 包默认安装的服务和源码包安装的服务的管理方法不同，我们把它们当成不同的服务分类。服务分类说明如下。</p>
<p>RPM 包默认安装的服务。这些服务是通过 RPM 包安装的，可以被服务管理命令识别。</p>
<p>这些服务又可以分为两种：</p>
<ul>
<li><p><strong>独立的服务</strong>：就是独立启动的意思，这种服务可以自行启动，而不用依赖其他的管理服务。因为不依赖其他的管理服务，所以，当客户端请求访问时，独立的服务响应请求更快速。目前，Linux 中的大多数服务都是独立的服务，如 <code>apache服务</code>、<code>FTP服务</code>、<code>Samba服务</code> 等。</p>
</li>
<li><p><strong>基于 xinetd 的服务</strong>：这种服务就不能独立启动了，而要依靠管理服务来调用。这个负责管理的服务就是 <code>xinetd</code> 服务。<code>xinetd</code> 服务是系统的超级守护进程，其作用就是管理不能独立启动的服务。当有客户端请求时，先请求 <code>xinetd</code> 服务，由 <code>xinetd</code> 服务去唤醒相对应的服务。当客户端请求结束后，被唤醒的服务会关闭并释放资源。这样做的好处是只需要持续启动 <code>xinetd</code> 服务，而其他基于 <code>xinetd</code> 的服务只有在需要时才被启动，不会占用过多的服务器资源。但是这种服务由于在有客户端请求时才会被唤醒，所以响应时间相对较长。</p>
</li>
</ul>
<p><strong>源码包安装的服务：</strong> 这些服务是通过源码包安装的，所以安装位置都是手工指定的。由于不能被系统中的服务管理命令直接识别，所以这些服务的启动与自启动方法一般都是源码包设计好的。每个源码包的启动脚本都不一样，一般需要查看说明文档才能确定。</p>
<h2 id="查询服务"><a href="#查询服务" class="headerlink" title="查询服务"></a>查询服务</h2><h3 id="区分已安装的服务"><a href="#区分已安装的服务" class="headerlink" title="区分已安装的服务"></a>区分已安装的服务</h3><ul>
<li><strong>源码包安装</strong>的服务是不能被服务管理命令直接找到的，而且一般会安装到 <code>/usr/local/</code> 目录中。</li>
<li><strong>RPM 包默认安装</strong>的服务都会安装到系统默认位置，所以是可以被服务管理命令（如 <code>service</code>、<code>chkconfig</code>）识别的。</li>
</ul>
<p><strong>区分RPM 包默认安装的独立的服务和基于 xinetd 的服务</strong></p>
<p><code>chkconfig</code> 是管理 RPM 包默认安装的服务的自启动的命令，这里仅利用这条命令的查看功能。使用这条命令还能看到 RPM 包默认安装的所有服务。命令格式如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出系统中RPM包默认安装的所有服务的自启动状态</span></span><br><span class="line">chkconfig --list [服务名]</span><br><span class="line"><span class="comment"># 独立的服务</span></span><br><span class="line">abrt-ccpp 0:关闭 1:关闭 2:关闭 3:启用 4:关闭 5:启用 6:关闭</span><br><span class="line">abrt-oops 0:关闭 1:关闭 2:关闭 3:启用 4:关闭 5:启用 6:关闭</span><br><span class="line">udev-post 0:关闭 1:启用 2:启用 3：启用 4:启用 5:启用 6:关闭</span><br><span class="line">xinetd 0:关闭 1:关闭 2:关闭 3:启用 4:启用 5:启用 6:关闭</span><br><span class="line">ypbind 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</span><br><span class="line"><span class="comment"># 基于 xinetd 的服务：</span></span><br><span class="line">chargen-dgram：关闭</span><br><span class="line">chargen-stream：关闭</span><br><span class="line">cvs：关闭</span><br><span class="line">daytime-dgram：关闭</span><br></pre></td></tr></table></figure>

<p>选项：</p>
<ul>
<li>–list：列出 RPM 包默认安装的所有服务的自启动状态；</li>
</ul>
<p>在刚刚的独立的服务之下出现了一些基于 xinetd 的服务，这些服务没有自己的运行级别，因为它们不是独立的服务，到底在哪个运行级别可以自启动，则要看 xinetd 服务是在哪个运行级别自启动的。</p>
<p>注：在 Linux 中基于 <code>xinetd</code> 的服务越来越少，原先很多基于 <code>xinetd</code> 的服务在新版本的 Linux 中已经变成了独立的服务。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/1048.html">Linux系统服务及其分类</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/21/linux%20Xinetd%E6%9C%8D%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/21/linux%20Xinetd%E6%9C%8D%E5%8A%A1/" class="post-title-link" itemprop="url">linux Xinetd服务</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-21 17:50:29" itemprop="dateCreated datePublished" datetime="2020-08-21T17:50:29+00:00">2020-08-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E6%9C%8D%E5%8A%A1/" itemprop="url" rel="index"><span itemprop="name">Linux服务</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Linux进程概念"><a href="#Linux进程概念" class="headerlink" title="Linux进程概念"></a>Linux进程概念</h2><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><code>xinetd</code> （ <code>extended internet daemon</code> ）是新一代的网络守护进程服务程序，又叫超级 <code>Internet</code> 服务器,常用来管理多种轻量级 <code>Internet</code> 服务。<br>xinetd提供类似于 <code>inetd+tcp_wrapper</code> 的功能，但是更加强大和安全。</p>
<p>基于 <code>xinetd</code> 的服务有启动管理和自启动管理之分，而且不管是启动管理还是自启动管理，都只有一种方法，相比独立的服务简单一些。</p>
<p>基于 <code>xinetd</code> 的服务没有自己独立的启动脚本程序，是需要依赖 <code>xinetd</code> 的启动脚本来启动的。<code>xinetd</code> 本身是独立的服务，所以 <code>xinetd</code> 服务自己的启动方法和独立服务的启动方法是一致的。</p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><h3 id="强大的存取控制功能"><a href="#强大的存取控制功能" class="headerlink" title="强大的存取控制功能"></a>强大的存取控制功能</h3><ul>
<li>内置对恶意用户和善意用户的差别待遇设定。</li>
<li>使用libwrap支持，其效能更甚于tcpd。</li>
<li>可以限制连接的等级，基于主机的连接数和基于服务的连接数。</li>
<li> 设置特定的连接时间。</li>
<li>将某个服务设置到特定的主机以提供服务。</li>
</ul>
<h3 id="有效防止DoS攻击"><a href="#有效防止DoS攻击" class="headerlink" title="有效防止DoS攻击"></a>有效防止DoS攻击</h3><ul>
<li>可以限制连接的等级。</li>
<li>可以限制一个主机的最大连接数，从而防止某个主机独占某个服务。</li>
<li>可以限制日志文件的大小，防止磁盘空间被填满。</li>
</ul>
<h3 id="强大的日志功能"><a href="#强大的日志功能" class="headerlink" title="强大的日志功能"></a>强大的日志功能</h3><ul>
<li>可以为每一个服务就syslog设定日志等级。</li>
<li>如果不使用syslog，也可以为每个服务建立日志文件。</li>
<li>可以记录请求的起止时间以决定对方的访问时间。</li>
<li>可以记录试图非法访问的请求。</li>
</ul>
<h3 id="转向功能"><a href="#转向功能" class="headerlink" title="转向功能"></a>转向功能</h3><p>可以将客户端的请求转发到另一台主机去处理。</p>
<h3 id="支持IPv6"><a href="#支持IPv6" class="headerlink" title="支持IPv6"></a>支持IPv6</h3><p>xinetd自 <code>xinetd 2.1.8.8pre*</code> 起的版本就支持IPv6，可以通过在./configure脚本中使用 <code>with-inet6 capability</code> 选项来完成。注意，要使这个生效，核心和网络必须支持IPv6。当然IPv4仍然被支持。</p>
<h3 id="与客户端的交互功能"><a href="#与客户端的交互功能" class="headerlink" title="与客户端的交互功能"></a>与客户端的交互功能</h3><p>无论客户端请求是否成功，xinetd都会有提示告知连接状态。</p>
<h2 id="Xinetd的缺点"><a href="#Xinetd的缺点" class="headerlink" title="Xinetd的缺点"></a>Xinetd的缺点</h2><p>当前，它最大的缺点是对RPC支持的不稳定性，但是可以启动protmap，使它与xinetd共存来解决这个问题。</p>
<h2 id="使用xinetd启动守护进程"><a href="#使用xinetd启动守护进程" class="headerlink" title="使用xinetd启动守护进程"></a>使用xinetd启动守护进程</h2><p>原则上任何系统服务都可以使用 <code>xinetd</code> ，然而最适合的应该是那些常用的网络服务，同时，这个服务的请求数目和频繁程度不会太高。像 <code>DNS</code> 和 <code>Apache</code> 就不适合采用这种方式，而像 <code>FTP</code>、<code>Telnet</code>、<code>SSH</code> 等就适合使用 <code>xinetd</code> 模式，系统默认使用 <code>xinetd</code> 的服务可以分为如下几类。</p>
<ul>
<li>标准Internet服务：telnet、ftp。</li>
<li>信息服务：finger、netstat、systat。</li>
<li>邮件服务：imap、imaps、pop2、pop3、pops。</li>
<li>RPC服务：rquotad、rstatd、rusersd、sprayd、walld。</li>
<li>BSD服务：comsat、exec、login、ntalk、shell、talk。</li>
<li>内部服务：chargen、daytime、echo、servers、services、time。</li>
<li>安全服务：irc。</li>
<li>其他服务：name、tftp、uucp。</li>
</ul>
<p>具体可以使用 <code>xinetd</code> 的服务在 <code>/etc/services</code> 文件中指出。这个文件的节选内容如下所示：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/services:</span></span><br><span class="line"><span class="comment"># $Id: services,v 1.40 2004/09/23 05:45:18 notting Exp $</span></span><br><span class="line"><span class="comment"># service-name  port/protocol  [aliases ...]   [# comment]</span></span><br><span class="line">tcpmux      1/tcp               <span class="comment"># TCP port service multiplexer</span></span><br><span class="line">tcpmux      1/udp               <span class="comment"># TCP port service multiplexer</span></span><br><span class="line">rje     5/tcp                   <span class="comment"># Remote Job Entry</span></span><br><span class="line">rje     5/udp                   <span class="comment"># Remote Job Entry</span></span><br><span class="line"><span class="built_in">echo</span>        7/tcp</span><br><span class="line"><span class="built_in">echo</span>        7/udp</span><br><span class="line">discard     9/tcp       sink null</span><br><span class="line">discard     9/udp       sink null</span><br></pre></td></tr></table></figure>

<p>Internet网络服务文件中，记录网络服务名和它们对应使用的端口号及协议。文件中的每一行对应一种服务，它由4个字段组成，中间用Tab键或空格键分隔，分别表示 <code>服务名称</code>、 <code>使用端口</code>、 <code>协议名称</code> 及 <code>别名</code> 。</p>
<p>在一般情况下，不要修改该文件的内容，因为这些设置都是Internet标准的设置。一旦修改，可能会造成系统冲突，使用户无法正常访问资源。Linux系统的端口号的范围为 <code>0~65535</code>，不同范围的端口号有不同的意义。</p>
<ul>
<li>0：不使用。</li>
<li>1~1 023：系统保留，只能由root用户使用。</li>
<li>1 024~4 999：由客户端程序自由分配。</li>
<li>5 000~65 535：由服务器程序自由分配。</li>
</ul>
<h2 id="etc-xinetd-conf和-etc-xinetd-d"><a href="#etc-xinetd-conf和-etc-xinetd-d" class="headerlink" title="/etc/xinetd.conf和/etc/xinetd.d/*"></a>/etc/xinetd.conf和/etc/xinetd.d/*</h2><h3 id="etc-xinetd-conf"><a href="#etc-xinetd-conf" class="headerlink" title="/etc/xinetd.conf"></a>/etc/xinetd.conf</h3><p>xinetd的配置文件是/etc/xinetd.conf，但是它只包括几个默认值及/etc/xinetd.d目录中的配置文件。如果要启用或禁用某项xinetd服务，编辑位于/etc/xinetd.d目录中的配置文件。</p>
<p><code>/etc/xinetd.conf</code> 有许多选项，下面是RHEL 4.0的 <code>/etc/xinetd.conf</code> 。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Simple configuration file for xinetd</span></span><br><span class="line"><span class="comment"># Some defaults, and include /etc/xinetd.d/</span></span><br><span class="line">defaults</span><br><span class="line">&#123;</span><br><span class="line">    instances             = 60</span><br><span class="line">    log_type               = SYSLOG authpriv</span><br><span class="line">    log_on_success       = HOST PID</span><br><span class="line">    log_on_failure       = HOST</span><br><span class="line">    cps                   = 25 30</span><br><span class="line">&#125;</span><br><span class="line">includedir /etc/xinetd.d</span><br></pre></td></tr></table></figure>

<ul>
<li>instances = 60：表示最大连接进程数为60个。</li>
<li>log_type = SYSLOG authpriv：表示使用syslog进行服务登记。</li>
<li>log_on_success= HOST PID：表示设置成功后记录客户机的IP地址的进程ID。</li>
<li>log_on_failure = HOST：表示设置失败后记录客户机的IP地址。</li>
<li>cps = 25 30：表示每秒25个入站连接，如果超过限制，则等待30秒。主要用于对付拒绝服务攻击。</li>
<li>includedir /etc/xinetd.d：表示告诉xinetd要包含的文件或目录是/etc/xinetd.d。</li>
</ul>
<h3 id="etc-xinetd-d"><a href="#etc-xinetd-d" class="headerlink" title="/etc/xinetd.d/*"></a>/etc/xinetd.d/*</h3><p>下面以 <code>/etc/xinetd.d/</code> 中的一个文件（rsync）为例。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">service rsync</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">disable</span> = <span class="built_in">yes</span></span><br><span class="line">    socket_type      = stream</span><br><span class="line">    <span class="built_in">wait</span>              = no</span><br><span class="line">    user              = root</span><br><span class="line">    server           = /usr/bin/rsync</span><br><span class="line">    log_on_failure += USERID</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面说明每一行选项的含义。</p>
<ul>
<li>disable = yes：表示禁用这个服务。</li>
<li>socket_type = stream：表示服务的数据包类型为stream。</li>
<li>wait = no：表示不需等待，即服务将以多线程的方式运行。</li>
<li>user = root：表示执行此服务进程的用户是root。</li>
<li>server = /usr/bin/rsync：启动脚本的位置。</li>
<li>log_on_failure += USERID：表示设置失败时，UID添加到系统登记表。</li>
</ul>
<h3 id="配置xinetd"><a href="#配置xinetd" class="headerlink" title="配置xinetd"></a>配置xinetd</h3><p>格式：</p>
<p><code>/etc/xinetd.conf</code> 中的每一项具有下列形式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">service service-name</span><br><span class="line">&#123;</span><br><span class="line">……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中 <code>service</code> 是必需的关键字，且属性表必须用大括号括起来。每一项都定义了由 <code>service-name</code> 定义的服务。</p>
<p><code>service-name</code> 是任意的，但通常是标准网络服务名，也可增加其他非标准的服务，只要它们能通过网络请求激活，包括 <code>localhost</code> 自身发出的网络请求。有很多可以使用的属性，稍后将描述必需的属性和属性的使用规则。</p>
<p>操作符可以是=、+=或-=。所有属性可以使用=，其作用是分配一个或多个值，某些属性可以使用+=或-=，其作用分别是将其值增加到某个现存的值表中，或将其值从现存值表中删除。</p>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>相关的配置文件如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/xinetd.conf</span><br><span class="line">/etc/xinetd.d/*   //该目录下的所有文件</span><br><span class="line">/etc/hosts.allow</span><br><span class="line">/etc/hosts.deny</span><br></pre></td></tr></table></figure>

<h3 id="disabled与enabled"><a href="#disabled与enabled" class="headerlink" title="disabled与enabled"></a>disabled与enabled</h3><p>前者的参数是禁用的服务列表，后者的参数是启用的服务列表。他们的共同点是格式相同（属性名、服务名列表与服务中间用空格分开，例如 <code>disabled = in.tftpd in.rexecd</code> ），此外，它们都是作用于全局的。如果在disabled列表中被指定，那么无论包含在列表中的服务是否有配置文件和如何设置，都将被禁用；如果enabled列表被指定，那么只有列表中的服务才可启动，如果enabled没有被指定，那么disabled指定的服务之外的所有服务都可以启动。</p>
<h3 id="注意问题"><a href="#注意问题" class="headerlink" title="注意问题"></a>注意问题</h3><ul>
<li>在重新配置的时候，下列的属性不能被改变：<code>socket_type</code>、<code>wait</code>、<code>protocol</code>、<code>type</code>；</li>
<li>如果 <code>only_from</code> 和 <code>no_access</code> 属性没有被指定（无论在服务项中直接指定还是通过默认项指定），那么对该服务的访问IP将没有限制；</li>
<li>地址校验是针对IP地址而不是针对域名地址。</li>
</ul>
<h3 id="xinetd防止拒绝服务攻击（Denial-of-Services）的原因"><a href="#xinetd防止拒绝服务攻击（Denial-of-Services）的原因" class="headerlink" title="xinetd防止拒绝服务攻击（Denial of Services）的原因"></a>xinetd防止拒绝服务攻击（Denial of Services）的原因</h3><ul>
<li><strong>限制同时运行的进程数</strong></li>
</ul>
<p>通过设置instances选项设定同时运行的并发进程数：</p>
<p><code>instances＝20</code></p>
<p>当服务器被请求连接的进程数达到20个时，xinetd将停止接受多出部分的连接请求。直到请求连接数低于设定值为止。</p>
<ul>
<li><strong>限制一个IP地址的最大连接数</strong></li>
</ul>
<p>通过限制一个主机的最大连接数，从而防止某个主机独占某个服务。</p>
<p><code>per_source＝5</code></p>
<p>这里每个IP地址的连接数是5个。</p>
<ul>
<li><strong>限制日志文件大小，防止磁盘空间被填满</strong></li>
</ul>
<p>许多攻击者知道大多数服务需要写入日志。入侵者可以构造大量的错误信息并发送出来，服务器记录这些错误，可能就造成日志文件非常庞大，甚至会塞满硬盘。同时会让管理员面对大量的日志，而不能发现入侵者真正的入侵途径。因此，限制日志文件大小是防范拒绝服务攻击的一个方法。</p>
<p><code>log_type FILE.1 /var/log/myservice.log 8388608 15728640</code></p>
<p>这里设置的日志文件FILE.1临界值为8MB，到达此值时，syslog文件会出现告警，到达15MB，系统会停止所有使用这个日志系统的服务。</p>
<ul>
<li><strong>限制负载</strong></li>
</ul>
<p>xinetd还可以使用限制负载的方法防范拒绝服务攻击。用一个浮点数作为负载系数，当负载达到这个数目的时候，该服务将暂停处理后续的连接。</p>
<p><code>max_load = 2.8</code></p>
<p>上面的设定表示当一项系统负载达到2.8时，所有服务将暂时中止，直到系统负载下降到设定值以下。</p>
<p>说明  要使用这个选项，编译时应加入 <code>--with-loadavg</code> ，xinetd将处理 <code>max-load</code> 配置选项，从而在系统负载过重时关闭某些服务进程，来实现防范某些拒绝服务攻击。</p>
<ul>
<li><strong>限制所有服务器数目（连接速率）</strong></li>
</ul>
<p>xinetd可以使用cps选项设定连接速率，下面的例子：</p>
<p><code>cps = 25 60</code></p>
<p>上面的设定表示服务器最多启动25个连接，如果达到这个数目将停止启动新服务60秒。在此期间不接受任何请求。</p>
<ul>
<li><strong>限制对硬件资源的利用</strong></li>
</ul>
<p>通过rlimit_as和rlimit_cpu两个选项可以有效地限制一种服务对内存、中央处理器的资源占用：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rlimit_as = 8M</span><br><span class="line">rlimit_cpu=20</span><br></pre></td></tr></table></figure>

<p>上面的设定表示对服务器硬件资源占用的限制，最多可用内存为8MB，CPU每秒处理20个进程。</p>
<p>xinetd的一个重要功能是它能够控制从属服务可以利用的资源量，通过它的以上设置可以达到这个目的，有助于防止某个xinetd服务占用大量资源，从而导致“拒绝服务”情况的出现。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="http://blog.chinaunix.net/uid-21411227-id-1826885.html">什么是Xinetd</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/13525470/2060765">CentOS 7.3 Xinetd服务的安装与配置</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lzghxjt/article/details/83018710">Linux之Xinetd服务介绍</a></p>
<p><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/1054.html">Linux基于xinetd服务的管理方法详解</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/21/SELinux%E5%BC%80%E5%90%AF%E5%92%8C%E5%85%B3%E9%97%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/21/SELinux%E5%BC%80%E5%90%AF%E5%92%8C%E5%85%B3%E9%97%AD/" class="post-title-link" itemprop="url">SELinux开启和关闭</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-21 11:14:40" itemprop="dateCreated datePublished" datetime="2020-08-21T11:14:40+00:00">2020-08-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" itemprop="url" rel="index"><span itemprop="name">Linux基础命令</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>341</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="查看SELinux状态"><a href="#查看SELinux状态" class="headerlink" title="查看SELinux状态"></a>查看SELinux状态</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1, 如果SELinux status参数为enabled即为开启状态</span></span><br><span class="line">/usr/sbin/sestatus -v</span><br><span class="line">SELinux status:                 enabled</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2,也可以用这个命令检查</span></span><br><span class="line">getenforce</span><br></pre></td></tr></table></figure>

<h2 id="关闭SELinux方法"><a href="#关闭SELinux方法" class="headerlink" title="关闭SELinux方法"></a>关闭SELinux方法</h2><p><strong>临时关闭（不用重启机器）</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置SELinux 成为permissive模式</span></span><br><span class="line">setenforce 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置SELinux 成为enforcing模式</span></span><br><span class="line"><span class="comment">#setenforce 1</span></span><br></pre></td></tr></table></figure>

<p><strong>修改配置文件（需要重启机器）</strong></p>
<p>修改 <code>/etc/selinux/config</code> 文件</p>
<p>将 <code>SELINUX=enforcing</code> 改为 <code>SELINUX=disabled</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/selinux/config</span><br></pre></td></tr></table></figure>

<p>参考</p>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/LINUXjishu/192576.html">Linux下查看SELinux状态和关闭SELinux的方法</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/21/Linux%20rsync%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/21/Linux%20rsync%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux rsync命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-21 09:49:07" itemprop="dateCreated datePublished" datetime="2020-08-21T09:49:07+00:00">2020-08-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" itemprop="url" rel="index"><span itemprop="name">Linux基础命令</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>rsync命令是一个远程数据同步工具，可通过LAN/WAN快速同步多台主机间的文件。rsync使用所谓的“rsync算法”来使本地和远程两个主机之间的文件达到同步，这个算法只传送两个文件的不同部分，而不是每次都整份传送，因此速度相当快。 </p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1，拷贝本地文件。当SRC和DES路径信息都不包含有单个冒号&quot;:&quot;分隔符时，</span></span><br><span class="line"><span class="comment"># 就启动这种工作模式。</span></span><br><span class="line"><span class="comment"># rsync -a /data /backup</span></span><br><span class="line">rsync [OPTION]... SRC DEST</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2，使用一个远程shell程序(如rsh、ssh)来实现将本地机器的内容拷贝到远程机器。</span></span><br><span class="line"><span class="comment"># 当DST路径地址包含单个冒号&quot;:&quot;分隔符时启动该模式。</span></span><br><span class="line"><span class="comment"># rsync -avz *.c foo:src</span></span><br><span class="line">rsync [OPTION]... SRC [USER@]host:DEST</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3，使用一个远程shell程序(如rsh、ssh)来实现将远程机器的内容拷贝到本地机器。</span></span><br><span class="line"><span class="comment"># 当SRC地址路径包含单个冒号&quot;:&quot;分隔符时启动该模式。</span></span><br><span class="line"><span class="comment"># rsync -avz foo:src/bar /data</span></span><br><span class="line">rsync [OPTION]... [USER@]HOST:SRC DEST</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4，从远程rsync服务器中拷贝文件到本地机。</span></span><br><span class="line"><span class="comment"># 当SRC路径信息包含&quot;::&quot;分隔符时启动该模式。</span></span><br><span class="line"><span class="comment"># rsync -av root@192.168.78.192::www /databack</span></span><br><span class="line">rsync [OPTION]... [USER@]HOST::SRC DEST</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从本地机器拷贝文件到远程rsync服务器中。</span></span><br><span class="line"><span class="comment"># 当DST路径信息包含&quot;::&quot;分隔符时启动该模式。</span></span><br><span class="line"><span class="comment"># rsync -av /databack root@192.168.78.192::www</span></span><br><span class="line">rsync [OPTION]... SRC [USER@]HOST::DEST</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出远程机的文件列表。</span></span><br><span class="line"><span class="comment"># 这类似于rsync传输，不过只要在命令中省略掉本地机信息即可。</span></span><br><span class="line"><span class="comment"># rsync -v rsync://192.168.78.192/www</span></span><br><span class="line">rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]</span><br></pre></td></tr></table></figure>

<h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">-v, --verbose 详细模式输出。</span><br><span class="line">-q, --quiet 精简输出模式。</span><br><span class="line">-c, --checksum 打开校验开关，强制对文件传输进行校验。</span><br><span class="line">-a, --archive 归档模式，表示以递归方式传输文件，并保持所有文件属性，等于-rlptgoD。</span><br><span class="line">-r, --recursive 对子目录以递归模式处理。</span><br><span class="line">-R, --relative 使用相对路径信息。</span><br><span class="line">-b, --backup 创建备份，也就是对于目的已经存在有同样的文件名时，将老的文件重新命名为~filename。可以使用--suffix选项来指定不同的备份文件前缀。</span><br><span class="line">--backup-dir 将备份文件(如~filename)存放在在目录下。</span><br><span class="line">-suffix=SUFFIX 定义备份文件前缀。</span><br><span class="line">-u, --update 仅仅进行更新，也就是跳过所有已经存在于DST，并且文件时间晚于要备份的文件，不覆盖更新的文件。</span><br><span class="line">-l, --links 保留软链结。</span><br><span class="line">-L, --copy-links 想对待常规文件一样处理软链结。</span><br><span class="line">--copy-unsafe-links 仅仅拷贝指向SRC路径目录树以外的链结。</span><br><span class="line">--safe-links 忽略指向SRC路径目录树以外的链结。</span><br><span class="line">-H, --hard-links 保留硬链结。</span><br><span class="line">-p, --perms 保持文件权限。</span><br><span class="line">-o, --owner 保持文件属主信息。</span><br><span class="line">-g, --group 保持文件属组信息。</span><br><span class="line">-D, --devices 保持设备文件信息。</span><br><span class="line">-t, --<span class="built_in">times</span> 保持文件时间信息。</span><br><span class="line">-S, --sparse 对稀疏文件进行特殊处理以节省DST的空间。</span><br><span class="line">-n, --dry-run现实哪些文件将被传输。</span><br><span class="line">-w, --whole-file 拷贝文件，不进行增量检测。</span><br><span class="line">-x, --one-file-system 不要跨越文件系统边界。</span><br><span class="line">-B, --block-size=SIZE 检验算法使用的块尺寸，默认是700字节。</span><br><span class="line">-e, --rsh=<span class="built_in">command</span> 指定使用rsh、ssh方式进行数据同步。</span><br><span class="line">--rsync-path=PATH 指定远程服务器上的rsync命令所在路径信息。</span><br><span class="line">-C, --cvs-exclude 使用和CVS一样的方法自动忽略文件，用来排除那些不希望传输的文件。</span><br><span class="line">--existing 仅仅更新那些已经存在于DST的文件，而不备份那些新创建的文件。</span><br><span class="line">--delete 删除那些DST中SRC没有的文件。</span><br><span class="line">--delete-excluded 同样删除接收端那些被该选项指定排除的文件。</span><br><span class="line">--delete-after 传输结束以后再删除。</span><br><span class="line">--ignore-errors 及时出现IO错误也进行删除。</span><br><span class="line">--max-delete=NUM 最多删除NUM个文件。</span><br><span class="line">--partial 保留那些因故没有完全传输的文件，以是加快随后的再次传输。</span><br><span class="line">--force 强制删除目录，即使不为空。</span><br><span class="line">--numeric-ids 不将数字的用户和组<span class="built_in">id</span>匹配为用户名和组名。</span><br><span class="line">--<span class="built_in">timeout</span>=time ip超时时间，单位为秒。</span><br><span class="line">-I, --ignore-times 不跳过那些有同样的时间和长度的文件。</span><br><span class="line">--size-only 当决定是否要备份文件时，仅仅察看文件大小而不考虑文件时间。</span><br><span class="line">--modify-window=NUM 决定文件是否时间相同时使用的时间戳窗口，默认为0。</span><br><span class="line">-T --temp-dir=DIR 在DIR中创建临时文件。</span><br><span class="line">--compare-dest=DIR 同样比较DIR中的文件来决定是否需要备份。</span><br><span class="line">-P 等同于 --partial。</span><br><span class="line">--progress 显示备份过程。</span><br><span class="line">-z, --compress 对备份的文件在传输时进行压缩处理。</span><br><span class="line">--exclude=PATTERN 指定排除不需要传输的文件模式。</span><br><span class="line">--include=PATTERN 指定不排除而需要传输的文件模式。</span><br><span class="line">--exclude-from=FILE 排除FILE中指定模式的文件。</span><br><span class="line">--include-from=FILE 不排除FILE指定模式匹配的文件。</span><br><span class="line">--version 打印版本信息。</span><br><span class="line">--address 绑定到特定的地址。</span><br><span class="line">--config=FILE 指定其他的配置文件，不使用默认的rsyncd.conf文件。</span><br><span class="line">--port=PORT 指定其他的rsync服务端口。</span><br><span class="line">--blocking-io 对远程shell使用阻塞IO。</span><br><span class="line">-stats 给出某些文件的传输状态。</span><br><span class="line">--progress 在传输时现实传输过程。</span><br><span class="line">--log-format=formAT 指定日志文件格式。</span><br><span class="line">--password-file=FILE 从FILE中得到密码。</span><br><span class="line">--bwlimit=KBPS 限制I/O带宽，KBytes per second。</span><br><span class="line">-h, --<span class="built_in">help</span> 显示帮助信息。</span><br></pre></td></tr></table></figure>

<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h3 id="SSH方式"><a href="#SSH方式" class="headerlink" title="SSH方式"></a>SSH方式</h3><p>首先在服务端确定ssh服务状态：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看状态</span></span><br><span class="line">service sshd status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">service sshd start</span><br></pre></td></tr></table></figure>

<p><strong>使用rsync进行同步</strong></p>
<p>SSH方式是通过系统用户来进行备份的，如下，描述了整个的备份过程，以及总共备份数据的大小：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rsync -vzrtopg --progress -e ssh --delete work@172.16.78.192:/www/* /databack/experiment/rsync</span><br><span class="line">work@172.16.78.192<span class="string">&#x27;s password:</span></span><br></pre></td></tr></table></figure>

<h3 id="后台服务方式"><a href="#后台服务方式" class="headerlink" title="后台服务方式"></a>后台服务方式</h3><p>启动rsync服务，编辑 <code>/etc/xinetd.d/rsync</code> 文件，将其中的 <code>disable=yes</code> 改为 <code>disable=no</code> ，并重启 <code>xinetd</code> 服务，如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/xinetd.d/rsync</span><br><span class="line"></span><br><span class="line"><span class="comment">#default: off</span></span><br><span class="line"><span class="comment"># description: The rsync server is a good addition to an ftp server, as it \</span></span><br><span class="line"><span class="comment"># allows crc checksumming etc.</span></span><br><span class="line">service rsync &#123;</span><br><span class="line"><span class="built_in">disable</span> = no</span><br><span class="line">socket_type = stream</span><br><span class="line"><span class="built_in">wait</span> = no</span><br><span class="line">user = root</span><br><span class="line">server = /usr/bin/rsync</span><br><span class="line">server_args = --daemon</span><br><span class="line">log_on_failure += USERID</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启 xinetd:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/xinetd restart</span><br><span class="line">Stopping xinetd:                                           [  OK  ]</span><br><span class="line">Starting xinetd:                                           [  OK  ]</span><br></pre></td></tr></table></figure>

<p>创建配置文件，默认安装好rsync程序后，并不会自动创建rsync的主配置文件，需要手工来创建，其主配置文件为 <code>/etc/rsyncd.conf</code> ，创建该文件并插入如下内容：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> /etc/rsyncd.conf</span><br><span class="line">vim /etc/rsyncd.conf</span><br><span class="line"></span><br><span class="line">uid=root</span><br><span class="line">gid=root</span><br><span class="line">max connections=4</span><br><span class="line"><span class="built_in">log</span> file=/var/log/rsyncd.log</span><br><span class="line">pid file=/var/run/rsyncd.pid</span><br><span class="line">lock file=/var/run/rsyncd.lock</span><br><span class="line">secrets file=/etc/rsyncd.passwd</span><br><span class="line">hosts deny=172.16.78.0/22</span><br><span class="line"></span><br><span class="line">[www]</span><br><span class="line">comment= backup web</span><br><span class="line">path=/www</span><br><span class="line"><span class="built_in">read</span> only = no</span><br><span class="line">exclude=<span class="built_in">test</span></span><br><span class="line">auth <span class="built_in">users</span>=work</span><br></pre></td></tr></table></figure>

<p>创建密码文件，采用这种方式不能使用系统用户对客户端进行认证，所以需要创建一个密码文件，其格式为 <code>username:password</code>，用户名可以和密码可以随便定义，最好不要和系统帐户一致，同时要把创建的密码文件权限设置为600。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;work:abc123&quot;</span> &gt; /etc/rsyncd.passwd</span><br><span class="line"><span class="built_in">chmod</span> 600 /etc/rsyncd.passwd</span><br></pre></td></tr></table></figure>

<p>备份，完成以上工作，现在就可以对数据进行备份了，如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">rsync -avz --progress --delete work@172.16.78.192::www /databack/experiment/rsync</span><br><span class="line"></span><br><span class="line">Password:</span><br><span class="line">receiving file list ...</span><br><span class="line">6 files to consider</span><br><span class="line">./ files...</span><br><span class="line">a</span><br><span class="line">0 100% 0.00kB/s 528:20:41 (1, 50.0% of 6)</span><br><span class="line">b</span><br><span class="line">67 100% 65.43kB/s 0:00:00 (2, 66.7% of 6)</span><br><span class="line">c</span><br><span class="line">0 100% 0.00kB/s 528:20:41 (3, 83.3% of 6)</span><br><span class="line"><span class="built_in">dd</span></span><br><span class="line">100663296 100% 37.49MB/s 0:00:02 (4, 100.0% of 6)</span><br><span class="line">sent 172 bytes received 98276 bytes 17899.64 bytes/sec</span><br><span class="line">total size is 150995011 speedup is 1533.75</span><br></pre></td></tr></table></figure>

<p>恢复，当服务器的数据出现问题时，那么这时就需要通过客户端的数据对服务端进行恢复，但前提是服务端允许客户端有写入权限，否则也不能在客户端直接对服务端进行恢复，使用rsync对数据进行恢复的方法如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rsync -avz --progress /databack/experiment/rsync/ work@172.16.78.192::www</span><br><span class="line"></span><br><span class="line">Password:</span><br><span class="line">building file list ...</span><br><span class="line">6 files to consider</span><br><span class="line">./</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">67 100% 0.00kB/s 0:00:00 (2, 66.7% of 6)</span><br><span class="line">c</span><br><span class="line">sent 258 bytes received 76 bytes 95.43 bytes/sec</span><br><span class="line">total size is 150995011 speedup is 452080.87</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://man.linuxde.net/rsync">rsync命令</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/20/Linux%20rcp%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/20/Linux%20rcp%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux rcp命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-20 17:20:36" itemprop="dateCreated datePublished" datetime="2020-08-20T17:20:36+00:00">2020-08-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" itemprop="url" rel="index"><span itemprop="name">Linux基础命令</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>583</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Linux rcp命令用于复制远程文件或目录。</p>
<p>rcp指令用在远端复制文件或目录，如同时指定两个以上的文件或目录，且最后的目的地是一个已经存在的目录，则它会把前面指定的所有文件或目录复制到该目录中。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rcp [-<span class="built_in">pr</span>][源文件或目录][目标文件或目录]</span><br><span class="line">rcp [-<span class="built_in">pr</span>][源文件或目录...][目标文件]</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-p： 保留源文件或目录的属性，包括拥有者，所属群组，权限与时间。</span><br><span class="line">-r： 递归处理，将指定目录下的文件与子目录一并处理。</span><br></pre></td></tr></table></figure>

<p><strong>实例</strong></p>
<p>使用rcp指令复制远程文件到本地进行保存。</p>
<p>设本地主机当前账户为rootlocal，远程主机账户为root，要将远程主机（192.125.30.5）主目录下的文件”testfile” 复制到本地目录 “test” 中，则输入如下命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 复制远程文件到本地</span></span><br><span class="line">rcp root@192.125.30.5:./testfile testfile  </span><br><span class="line">rcp root@192.125.30.5:home/rootlocal/testfile testfile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 要求当前登录账户cmd 登录到远程主机  </span></span><br><span class="line">rcp 192.125.30.5:./testfile testfile</span><br></pre></td></tr></table></figure>

<p>注意：指令 <code>rcp</code> 执行以后不会有返回信息，仅需要在目录 “test” 下查看是否存在文件 “testfile”。<br>若存在，则表示远程复制操作成功，否则远程复制操作失败。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-rcp.html">Linux rcp命令</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/20/Linux%20scp%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/20/Linux%20scp%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux scp命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-20 16:41:05" itemprop="dateCreated datePublished" datetime="2020-08-20T16:41:05+00:00">2020-08-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" itemprop="url" rel="index"><span itemprop="name">Linux基础命令</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Linux scp 命令用于 Linux 之间复制文件和目录。<br>scp 是 secure copy 的缩写, scp 是 linux 系统下基于 ssh 登陆进行安全的远程文件拷贝命令。<br>scp 是加密的，rcp 是不加密的，scp 是 rcp 的加强版。</p>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp [-1246BCpqrv] [-c cipher] [-F ssh_config] [-i identity_file]</span><br><span class="line">[-l <span class="built_in">limit</span>] [-o ssh_option] [-P port] [-S program]</span><br><span class="line">[[user@]host1:]file1 [...] [[user@]host2:]file2</span><br></pre></td></tr></table></figure>

<p>简易写法:</p>
<p><code>scp [可选参数] file_source file_target</code></p>
<p>参数说明：</p>
<ul>
<li>-1： 强制scp命令使用协议ssh1</li>
<li>-2： 强制scp命令使用协议ssh2</li>
<li>-4： 强制scp命令只使用IPv4寻址</li>
<li>-6： 强制scp命令只使用IPv6寻址</li>
<li>-B： 使用批处理模式（传输过程中不询问传输口令或短语）</li>
<li>-C： 允许压缩。（将-C标志传递给ssh，从而打开压缩功能）</li>
<li>-p： 保留原文件的修改时间，访问时间和访问权限。</li>
<li>-q： 不显示传输进度条。</li>
<li>-r： 递归复制整个目录。</li>
<li>-v： 详细方式显示输出。scp和ssh(1)会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。</li>
<li>-c： cipher： 以cipher将数据传输进行加密，这个选项将直接传递给ssh。</li>
<li>-F： ssh_config： 指定一个替代的ssh配置文件，此参数直接传递给ssh。</li>
<li>-i： identity_file： 从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。</li>
<li>-l： limit： 限定用户所能使用的带宽，以Kbit/s为单位。</li>
<li>-o： ssh_option： 如果习惯于使用ssh_config(5)中的参数传递方式，</li>
<li>-P： port：注意是大写的P, port是指定数据传输用到的端口号</li>
<li>-S： program： 指定加密传输时所使用的程序。此程序必须能够理解ssh(1)的选项。</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h3 id="从本地复制到远程"><a href="#从本地复制到远程" class="headerlink" title="从本地复制到远程"></a>从本地复制到远程</h3><p><strong>文件复制</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1，2 指定了用户名，命令执行后需要再输入密码，</span></span><br><span class="line"><span class="comment"># 1，指定了远程的目录，文件名字不变</span></span><br><span class="line">scp local_file remote_username@remote_ip:remote_folder</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2，指定了文件名；</span></span><br><span class="line">scp local_file remote_username@remote_ip:remote_file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3，4指定用户名，命令执行后需要输入用户名和密码</span></span><br><span class="line"><span class="comment"># 3，指定了远程的目录，文件名字不变</span></span><br><span class="line">scp local_file remote_ip:remote_folder</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4，指定了文件名；</span></span><br><span class="line">scp local_file remote_ip:remote_file</span><br></pre></td></tr></table></figure>

<p><strong>复制目录</strong></p>
<p>命令格式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定了用户名，命令执行后需要再输入密码；</span></span><br><span class="line">scp -r local_folder remote_username@remote_ip:remote_folder</span><br><span class="line"></span><br><span class="line"><span class="comment"># 没有指定用户名，命令执行后需要输入用户名和密码；</span></span><br><span class="line">scp -r local_folder remote_ip:remote_folder </span><br></pre></td></tr></table></figure>

<h3 id="从远程复制到本地"><a href="#从远程复制到本地" class="headerlink" title="从远程复制到本地"></a>从远程复制到本地</h3><p>从远程复制到本地，只要将从本地复制到远程的命令的后2个参数调换顺序即可。</p>
<p>应用实例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp root@www.runoob.com:/home/root/others/music /home/space/music/1.mp3 </span><br><span class="line">scp -r www.runoob.com:/home/root/others/ /home/space/music/</span><br></pre></td></tr></table></figure>

<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>1.如果远程服务器防火墙有为scp命令设置了指定的端口，我们需要使用 -P 参数来设置命令的端口号。</p>
<p>命令格式如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#scp 命令使用端口号 4588</span></span><br><span class="line">scp -P 4588 remote@www.runoob.com:/usr/local/sin.sh /home/administrator</span><br></pre></td></tr></table></figure>

<p>2.使用scp命令要确保使用的用户具有可读取远程服务器相应文件的权限，否则scp命令是无法起作用的。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-scp.html">Linux scp命令</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/19/Mysql%E6%89%A7%E8%A1%8Cflush%20privileges%E6%8A%A5%E9%94%99%EF%BC%9ATable%20'mysql.servers'%20doesn't%20exist/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/19/Mysql%E6%89%A7%E8%A1%8Cflush%20privileges%E6%8A%A5%E9%94%99%EF%BC%9ATable%20'mysql.servers'%20doesn't%20exist/" class="post-title-link" itemprop="url">Mysql执行flush privileges报错：Table 'mysql.servers' doesn't exist</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-19 17:51:40" itemprop="dateCreated datePublished" datetime="2020-08-19T17:51:40+00:00">2020-08-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>mysql执行刷新权限报错：<code>Table &#39;mysql.servers&#39; doesn&#39;t exist</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; flush privileges;</span><br><span class="line">ERROR 1146 (42S02): Table <span class="string">&#x27;mysql.servers&#x27;</span> doesn<span class="string">&#x27;t exist</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">mysql&gt; show warnings;</span></span><br><span class="line"><span class="string">+---------+------+-------------------------------------+</span></span><br><span class="line"><span class="string">| Level   | Code | Message                             |</span></span><br><span class="line"><span class="string">+---------+------+-------------------------------------+</span></span><br><span class="line"><span class="string">| Warning | 1146 | Table &#x27;</span>mysql.servers<span class="string">&#x27; doesn&#x27;</span>t exist |</span><br><span class="line">+---------+------+-------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; drop table <span class="keyword">if</span> exists servers;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; CREATE TABLE `servers` (</span><br><span class="line">    -&gt; `Server_name` char(64) NOT NULL,</span><br><span class="line">    -&gt; `Host` char(64) NOT NULL,`Db` char(64) NOT NULL,</span><br><span class="line">    -&gt; `Username` char(64) NOT NULL,</span><br><span class="line">    -&gt; `Password` char(64) NOT NULL,</span><br><span class="line">    -&gt; `Port` int(4) DEFAULT NULL,</span><br><span class="line">    -&gt; `Socket` char(64) DEFAULT NULL,</span><br><span class="line">    -&gt; `Wrapper` char(64) NOT NULL,</span><br><span class="line">    -&gt; `Owner` char(64) NOT NULL,</span><br><span class="line">    -&gt; PRIMARY KEY (`Server_name`)</span><br><span class="line">    -&gt; ) ENGINE=MyISAM DEFAULT CHARSET=utf8 COMMENT=<span class="string">&#x27;MySQL Foreign Servers table&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>SQL脚本：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `servers` (</span><br><span class="line">`Server_name` <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`Host` <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,`Db` <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`Username` <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`Password` <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`Port` <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`Socket` <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`Wrapper` <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`Owner` <span class="type">char</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (`Server_name`)</span><br><span class="line">) ENGINE<span class="operator">=</span>MyISAM <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;MySQL Foreign Servers table&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ghjbk/p/13495761.html">ERROR 1146 (42S02): Table ‘mysql.servers’ doesn’t exist</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8af0b92e4fc8">MYSQL ERROR 1146 Table doesnt exist 解析</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2020/08/19/mysql5-7-X-CentOS7%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="syxdevcode的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/19/mysql5-7-X-CentOS7%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">mysql5.7.X-CentOS7主从复制配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-19 11:12:04" itemprop="dateCreated datePublished" datetime="2020-08-19T11:12:04+00:00">2020-08-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-08 08:44:00" itemprop="dateModified" datetime="2022-09-08T08:44:00+00:00">2022-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySql/" itemprop="url" rel="index"><span itemprop="name">MySql</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>7.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>主从复制（也称 Replication， AB 复制）允许将来自一个MySQL数据库服务器（主服务器）的数据复制到一个或多个MySQL数据库服务器（从服务器）。</p>
<p>复制是异步的 从站不需要永久连接以接收来自主站的更新，从服务器甚至可以通过拨号断断续续地连接主服务器。</p>
<p>根据配置，可以复制数据库中的所有数据库，所选数据库甚至选定的表。</p>
<p>有以下几种形式：</p>
<ul>
<li>一主一从</li>
<li>主主复制</li>
<li>一主多从—扩展系统读取的性能，因为读是在从库读取的；</li>
<li>多主一从—5.7开始支持</li>
<li>联级复制—</li>
</ul>
<p><strong>MySQL中复制的优点：</strong></p>
<p>1，横向扩展解决方案 - 在多个从站之间分配负载以提高性能。在此环境中，所有写入和更新都必须在主服务器上进行。但是，读取可以在一个或多个从设备上进行。该模型可以提高写入性能（因为主设备专用于更新），同时显着提高了越来越多的从设备的读取速度。<br>2，数据安全性 - 因为数据被复制到从站，并且从站可以暂停复制过程，所以可以在从站上运行备份服务而不会破坏相应的主数据。<br>3，分析 - 可以在主服务器上创建实时数据，而信息分析可以在从服务器上进行，而不会影响主服务器的性能。<br>4，远程数据分发 - 您可以使用复制为远程站点创建数据的本地副本，而无需永久访问主服务器。</p>
<p><strong>主要过程</strong></p>
<p>1、主服务器MySQL服务将所有的写操作记录在 binlog 日志中，并生成 log dump 线程，将 binlog 日志传给从服务器MySQL服务的 I/O 线程。<br>2、从服务器MySQL服务生成两个线程，一个是 I/O 线程，另一个是 SQL 线程。<br>3、从库 I/O 线程去请求主库的 binlog 日志，并将 binlog 日志中的文件写入 relaylog（中继日志）中。<br>4、从库的 SQL 线程会读取 relaylog 中的内容，并解析成具体的操作，来实现主从的操作一致，达到最终两个数据库数据一致的目的。</p>
<p><img src="/img/202051293523201.jpg" alt="202051293523201.jpg"></p>
<p>注意点：</p>
<ul>
<li>主从复制是异步的逻辑的 SQL 语句级的复制；</li>
<li>复制时，主库有一个 I/O 线程，从库有两个线程，及 I/O 和 SQL 线程；</li>
<li>实现主从复制的必要条件是主库要开启记录 binlog 的功能；</li>
<li>作为复制的所有 MySQL 节点的 server-id 都不能相同；</li>
<li>binlog 文件只记录对数据内容有更改的 SQL 语句，不记录任何查询语句。</li>
<li><strong>无法将主服务器配置为仅记录特定事件。</strong></li>
</ul>
<h2 id="二进制日志"><a href="#二进制日志" class="headerlink" title="二进制日志"></a>二进制日志</h2><p>mysqld将数字扩展名附加到二进制日志基本名称以生成二进制日志文件名。每次服务器创建新日志文件时，该数字都会增加，从而创建一系列有序的文件。每次启动或刷新日志时，服务器都会在系列中创建一个新文件。服务器还会在当前日志大小达到 <code>max_binlog_size</code> 参数设置的大小后自动创建新的二进制日志文件 。二进制日志文件可能会比 <code>max_binlog_size</code> 使用大型事务时更大， 因为事务是以一个部分写入文件，而不是在文件之间分割。</p>
<p>为了跟踪已使用的二进制日志文件， mysqld 还创建了一个二进制日志索引文件，其中包含所有使用的二进制日志文件的名称。默认情况下，它具有与二进制日志文件相同的基本名称，并带有扩展名 <code>.index</code>。在 mysqld 运行时，您不应手动编辑此文件。</p>
<p><code>二进制日志文件</code> 通常表示包含数据库事件的单个编号文件。<br><code>二进制日志</code> 表示含编号的二进制日志文件集加上索引文件。</p>
<p>SUPER 权限的用户可以使用 <code>SET sql_log_bin=0</code> 语句禁用其当前环境下自己的语句的二进制日志记录。</p>
<h2 id="配置部署"><a href="#配置部署" class="headerlink" title="配置部署"></a>配置部署</h2><p><strong>主从部署必要条件：</strong></p>
<ul>
<li>主库开启binlog日志（设置log-bin参数）</li>
<li>主从server-id不同</li>
<li>从库服务器能连通主库</li>
</ul>
<p><strong>主服务器：</strong></p>
<p>1、开启二进制日志<br>2、配置唯一的server-id<br>3、获得master二进制日志文件名及位置<br>4、创建一个用于slave和master通信的用户账号</p>
<p><strong>从服务器：</strong></p>
<p>1、配置唯一的server-id<br>2、使用master分配的用户账号读取master二进制日志<br>3、启用slave服务</p>
<h3 id="服务器配置"><a href="#服务器配置" class="headerlink" title="服务器配置"></a>服务器配置</h3><p><strong>主节点修改配置文件</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 服务器唯一ID，一般取IP最后一段</span></span><br><span class="line">server-id=1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 要同步的数据库(可以不指定)</span></span><br><span class="line">binlog-do-db=<span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 要生成二进制日志文件 主服务器一定要开启</span></span><br><span class="line">log-bin=/usr/local/mysql/binlogs/bin-log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不可以被从服务器复制的库</span></span><br><span class="line">binlog-ignore-db=mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># binlog日志格式，mysql默认采用ROW，建议使用mixed</span></span><br><span class="line">binlog_format=MIXED</span><br><span class="line"></span><br><span class="line"><span class="comment"># binlog日志文件</span></span><br><span class="line">log-bin=/usr/local/mysql/binlogs/bin-log</span><br><span class="line"></span><br><span class="line"><span class="comment"># binlog过期清理时间</span></span><br><span class="line">expire_logs_days=7</span><br><span class="line"></span><br><span class="line"><span class="comment"># binlog每个日志文件大小</span></span><br><span class="line">max_binlog_size=100m</span><br><span class="line"></span><br><span class="line"><span class="comment"># binlog缓存大小</span></span><br><span class="line">binlog_cache_size=4m</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最大binlog缓存大小</span></span><br><span class="line">max_binlog_cache_size=512m</span><br></pre></td></tr></table></figure>

<p>创建日志目录，并赋予权限：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /usr/local/mysql/binlogs</span><br><span class="line"><span class="built_in">chown</span> mysql.mysql /usr/local/mysql/binlogs</span><br></pre></td></tr></table></figure>

<p>重启：</p>
<p>/etc/init.d/mysqld restart</p>
<p>如果省略 <code>server-id</code>（或将其显式设置为默认值0），则主服务器拒绝来自从服务器的任何连接。</p>
<p>为了在使用带事务的 <code>InnoDB</code> 进行复制设置时尽可能提高持久性和一致性，<br>您应该在master <code>my.cnf</code> 文件中使用以下配置项：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">innodb_flush_log_at_trx_commit = 1</span><br><span class="line">sync_binlog = 1</span><br></pre></td></tr></table></figure>

<p>确保在主服务器上 <code>skip_networking</code> 选项处于 <code>OFF</code> 关闭状态, 这是默认值。<br>如果是启用的，则从站无法与主站通信，并且复制失败。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="string">&#x27;%skip_networking%&#x27;</span>;</span><br><span class="line">+-----------------+-------+</span><br><span class="line">| Variable_name   | Value |</span><br><span class="line">+-----------------+-------+</span><br><span class="line">| skip_networking | OFF   |</span><br><span class="line">+-----------------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure>

<p><strong>从服务器配置</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># my.cnf 文件</span></span><br><span class="line">[mysqld]</span><br><span class="line">server-id=2</span><br><span class="line"></span><br><span class="line"><span class="comment">#要同步的数据库 (可选)</span></span><br><span class="line">binlog-do-db=<span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#要生成二进制日志文件（可选）</span></span><br><span class="line">log-bin=mysql-bin</span><br></pre></td></tr></table></figure>

<p><strong>主服务器创建用于复制数据的用户</strong></p>
<p>语法：</p>
<p><code>grant 权限 on 数据库对象 to 用户</code></p>
<p><code>grant 权限1,权限2,…权限n on 数据库名称.表名称 to 用户名@用户地址 identified by ‘连接口令’ WITH GRANT OPTION;</code></p>
<p>示例：</p>
<p><code>GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION;</code></p>
<p>取消权限：<br><code>revoke all on *.* from root@localhost; </code></p>
<p>最后执行：<br><code>flush privileges</code>;</p>
<p><strong>GRANT：赋权命令</strong></p>
<p>ALL PRIVILEGES：当前用户的所有权限<br>ON：介词<br>*.*：当前用户对所有数据库和表的相应操作权限<br>TO：介词<br>‘root’@’%’：权限赋给root用户，所有ip都能连接<br>IDENTIFIED BY ‘123456’：连接时输入密码，密码为123456<br>WITH GRANT OPTION：允许级联赋权，表示该用户可以将自己拥有的权限授权给别人。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 连接到mysql，输入密码</span></span><br><span class="line">mysql -uroot -h 127.0.0.1 -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建用户</span></span><br><span class="line">create user <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">CREATE USER <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;%&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置用户权限</span></span><br><span class="line"><span class="comment"># 授予复制账号 REPLICATION CLIENT 权限，复制用户可以使用 </span></span><br><span class="line"><span class="comment"># SHOW MASTER STATUS, SHOW SLAVE STATUS 和 SHOW BINARY LOGS来确定复制状态。</span></span><br><span class="line"><span class="comment"># 授予复制账号 REPLICATION SLAVE 权限，复制才能真正地工作。</span></span><br><span class="line">grant replication slave,replication client on *.* to <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">GRANT REPLICATION SLAVE ON *.*  TO  <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看用户</span></span><br><span class="line">select host,user from user;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新权限</span></span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看用户权限</span></span><br><span class="line">show grants <span class="keyword">for</span> <span class="string">&#x27;slave&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>备份主服务器数据</strong></p>
<p>使用 scp 或 rsync 等工具，把备份出来的数据传输到从服务器中。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入 mysql 安装目录</span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/mysql/bin</span><br><span class="line"><span class="comment"># 如果不使用 --master-data 参数，则需要手动锁定单独会话中的所有表</span></span><br><span class="line">./mysqldump -u用户名 -p密码 --all-databases --master-data=1 &gt; dbdump.db</span><br><span class="line"><span class="comment"># 或 备份指定库</span></span><br><span class="line">./mysqldump -uroot -proot --databases db1 db2 &gt; dbdump.db</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"><span class="comment"># 1，加锁</span></span><br><span class="line">FLUSH TABLES WITH READ LOCK;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 将master中需要同步的db的数据dump出来</span></span><br><span class="line">./mysqldump -uroot -p testdb &gt; testdb.dump</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 将数据导入slave</span></span><br><span class="line">mysql -uroot -h192.123.75.69 -p testdb &lt; testdb.dump</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 解锁master</span></span><br><span class="line">UNLOCK TABLES;</span><br></pre></td></tr></table></figure>

<p><strong>从服务器开始复制</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 登录 主mysql</span></span><br><span class="line">mysql -uroot -h192.123.75.68 -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主服务器复制状态</span></span><br><span class="line">show master status\G</span><br><span class="line"></span><br><span class="line"><span class="comment"># 登录从服务器</span></span><br><span class="line"><span class="comment"># 连接主服务器及设置复制的起始节点</span></span><br><span class="line">change master to master_host=<span class="string">&#x27;192.123.75.68&#x27;</span>,</span><br><span class="line">master_port=3306,</span><br><span class="line">master_user=<span class="string">&#x27;slave&#x27;</span>,</span><br><span class="line">master_password=<span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">master_log_file=<span class="string">&#x27;bin-log.000001&#x27;</span>,</span><br><span class="line">master_log_pos=154;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始复制</span></span><br><span class="line">start slave;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 从 复制状态</span></span><br><span class="line"><span class="comment"># 输出结果中应该看到 I/O 线程和 SQL 线程都是 YES, 就表示成功。</span></span><br><span class="line">show slave status \G</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 主 复制状态</span></span><br><span class="line">show master status \G</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看数据表数据</span></span><br><span class="line">mysql&gt; show create table user\G</span><br></pre></td></tr></table></figure>

<p><strong>设置从库只读</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前只读的状态</span></span><br><span class="line">SHOW VARIABLES LIKE <span class="string">&#x27;%read_only%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置普通用户只读</span></span><br><span class="line">SET GLOBAL read_only=1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置超级用户只读</span></span><br><span class="line">SET GLOBAL super_read_only=1;</span><br></pre></td></tr></table></figure>

<p>复制相关命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 停止slave</span></span><br><span class="line">stop slave;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置slave</span></span><br><span class="line">reset slave;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启slave</span></span><br><span class="line">start slave;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看主从服务器进程</span></span><br><span class="line">show processlist;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定线程类型单独 暂停I/O或SQL线程</span></span><br><span class="line">STOP SLAVE IO_THREAD;</span><br><span class="line">STOP SLAVE SQL_THREAD;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定线程类型单独 启动I/O或SQL线程</span></span><br><span class="line">START SLAVE IO_THREAD;</span><br><span class="line">START SLAVE SQL_THREAD;</span><br></pre></td></tr></table></figure>

<p><strong>查看 binlog 日志</strong></p>
<p><code>show binlog events\G</code></p>
<ul>
<li>Log_name 是二进制日志文件的名称，一个事件不能横跨两个文件</li>
<li>Pos 这是该事件在文件中的开始位置</li>
<li>Event_type 事件的类型，事件类型是给slave传递信息的基本方法，每个新的binlog都以Format_desc类型开始，以Rotate类型结束</li>
<li>Server_id 创建该事件的服务器id</li>
<li>End_log_pos 该事件的结束位置，也是下一个事件的开始位置，因此事件范围为 <code>Pos~End_log_pos - 1</code></li>
<li>Info 事件信息的可读文本，不同的事件有不同的信息</li>
</ul>
<h2 id="复制原理实现细节"><a href="#复制原理实现细节" class="headerlink" title="复制原理实现细节"></a>复制原理实现细节</h2><p>MySQL复制功能使用三个线程实现，一个在主服务器上，两个在从服务器上：</p>
<ul>
<li><p><strong>Binlog转储线程</strong> 主设备创建一个线程，以便在从设备连接时将二进制日志内容发送到从设备。可以 <code>SHOW PROCESSLIST</code> 在主服务器的输出中将此线程标识为 <code>Binlog Dump</code> 线程。</p>
<p>  二进制日志转储线程获取主机二进制日志上的锁，用于读取要发送到从机的每个事件。一旦读取了事件，即使在事件发送到从站之前，锁也会被释放。</p>
</li>
<li><p><strong>从属 I/O线程</strong> 在从属服务器上发出 <code>START SLAVE</code> 语句时，从属服务器会创建一个 <code>I/O</code> 线程，该线程连接到主服务器并要求主服务器发送其在二进制日志中的更新记录。</p>
<p>  从属 <code>I/O</code> 线程读取主 <code>Binlog Dump</code> 线程发送的更新，并将它们复制到包含从属中继日志的本地文件。</p>
<p>  此线程的状态显示为 <code>Slave_IO_running</code> 输出 <code>SHOW SLAVE STATUS</code> 或 <code>Slave_running</code> 输出中的状态 <code>SHOW STATUS</code> 。</p>
</li>
<li><p><strong>从属SQL线程</strong> 从属设备创建一个SQL线程来读取由从属 <code>I/O</code> 线程写入的中继日志，并执行其中包含的事件。</p>
<p>  当从属服务器从放的事件，追干上主服务器的事件后，从属服务器的 <code>I/O</code> 线程将会处于休眠状态，直到主服务器的事件有更新时，被主服务器发送的信号唤醒。</p>
<p>  每个 主/从 连接有三个线程。具有多个从站的主站为每个当前连接的从站创建一个二进制日志转储线程，每个从站都有自己的 <code>I/O</code>和SQL线程。</p>
</li>
</ul>
<p>从站使用两个线程将读取更新与主站分开并将它们执行到独立任务中。因此，如果语句执行缓慢，则不会减慢读取语句的任务。例如，如果从服务器尚未运行一段时间，则当从服务器启动时，其 <code>I/O</code> 线程可以快速从主服务器获取所有二进制日志内容，即使SQL线程远远落后。如果从服务器在SQL线程执行了所有获取的语句之前停止，则 <code>I/O</code> 线程至少已获取所有内容，以便语句的安全副本本地存储在从属的中继日志中，准备在下次执行时执行 <code>SLAVE</code>开始。</p>
<p>主服务器上，输入 <code>SHOW PROCESSLIST</code> 如下所示：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> processlist\G</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">     Id: <span class="number">69</span></span><br><span class="line">   <span class="keyword">User</span>: slave</span><br><span class="line">   Host: <span class="number">192.123</span><span class="number">.75</span><span class="number">.69</span>:<span class="number">55453</span></span><br><span class="line">     db: <span class="keyword">NULL</span></span><br><span class="line">Command: Binlog Dump</span><br><span class="line">   <span class="type">Time</span>: <span class="number">63184</span></span><br><span class="line">  State: Master has sent <span class="keyword">all</span> binlog <span class="keyword">to</span> slave; waiting <span class="keyword">for</span> more updates</span><br><span class="line">   Info: <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure>

<p>该线程是 <code>Binlog Dump</code> 为连接的从属服务的复制线程。该 <code>State</code> 信息表明所有未完成的更新已发送到从站，并且主站正在等待更多更新发生。如果 <code>Binlog Dump</code> 在主服务器上看不到任何 线程，则表示复制未运行，说明目前没有连接任何从站。</p>
<h2 id="配置多线程复制"><a href="#配置多线程复制" class="headerlink" title="配置多线程复制"></a>配置多线程复制</h2><p>多线程复制在 5.6 中被引入，并且在 5.7 中得到了进一步的完善。5.7 中是基于逻辑时钟的方式进行的多线程复制。</p>
<h3 id="临时配置"><a href="#临时配置" class="headerlink" title="临时配置"></a>临时配置</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1，从库上查看默认的多线程复制类型</span></span><br><span class="line">mysql&gt; show variables like <span class="string">&quot;slave_parallel_type&quot;</span>;</span><br><span class="line">+---------------------+----------+</span><br><span class="line">| Variable_name       | Value    |</span><br><span class="line">+---------------------+----------+</span><br><span class="line">| slave_parallel_type | DATABASE |</span><br><span class="line">+---------------------+----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2，停止之前可以查看目前的线程数</span></span><br><span class="line"></span><br><span class="line">show processlist;</span><br><span class="line">stop slave;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3，配置并发线程的方式</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span> global slave_parallel_type = <span class="string">&quot;logical_clock&quot;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4，配置并发数量</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span> global slave_parallel_workers = 4;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like <span class="string">&quot;slave_parallel_workers&quot;</span>;</span><br><span class="line">+------------------------+-------+</span><br><span class="line">| Variable_name          | Value |</span><br><span class="line">+------------------------+-------+</span><br><span class="line">| slave_parallel_workers | 16     |</span><br><span class="line">+------------------------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5，启动从服务器的复制链路</span></span><br><span class="line">mysql&gt; start slave;</span><br></pre></td></tr></table></figure>

<h3 id="永久生效"><a href="#永久生效" class="headerlink" title="永久生效"></a>永久生效</h3><p>vim /usr/local/mysql/my.cnf</p>
<p>在 [mysqld] 下添加：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">slave-parallel-type=LOGICAL_CLOCK</span><br><span class="line">slave-parallel-workers=16</span><br><span class="line">master_info_repository=TABLE</span><br><span class="line">relay_log_info_repository=TABLE</span><br><span class="line">relay_log_recovery=ON</span><br></pre></td></tr></table></figure>

<p>重启mysql</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysqld restart</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure>

<p>验证：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show variables like <span class="string">&quot;slave_parallel_type&quot;</span>;</span><br><span class="line">show variables like <span class="string">&quot;slave_parallel_workers&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/faf0127f1cb2">Mysql 主从复制</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/186349.htm">MySQL 主从复制原理与实践详解</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhoujinyi/p/4717951.html">MySQL5.6 新特性之GTID</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/langdashu/p/6125621.html">[MySQL] 号称永久解决了复制延迟问题的并行复制，MySQL5.7</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/19/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/38/">38</a><a class="extend next" rel="next" href="/page/21/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="syxdevcode"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">syxdevcode</p>
  <div class="site-description" itemprop="description">syxdevcode的个人博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">568</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">141</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">212</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/syxdevcode" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;syxdevcode" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">syxdevcode</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">1.8m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">27:14</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
