<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"syxdevcode.github.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="syxdevcodeåšå®¢">
<meta property="og:url" content="https://syxdevcode.github.com/page/20/index.html">
<meta property="og:site_name" content="syxdevcodeåšå®¢">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="syxdevcode">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://syxdevcode.github.com/page/20/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>syxdevcodeåšå®¢</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">syxdevcodeåšå®¢</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/syxdevcode" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/05/10/Linux-shell%E4%B8%AD%E7%9A%84%E7%AB%96%E7%BA%BF%EF%BC%88-%EF%BC%89%E2%80%94%E2%80%94%E7%AE%A1%E9%81%93%E7%AC%A6%E5%8F%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/10/Linux-shell%E4%B8%AD%E7%9A%84%E7%AB%96%E7%BA%BF%EF%BC%88-%EF%BC%89%E2%80%94%E2%80%94%E7%AE%A1%E9%81%93%E7%AC%A6%E5%8F%B7/" class="post-title-link" itemprop="url">Linux shellä¸­çš„ç«–çº¿ï¼ˆ|ï¼‰â€”â€”ç®¡é“ç¬¦å·</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-05-10 10:18:29" itemprop="dateCreated datePublished" datetime="2018-05-10T10:18:29+00:00">2018-05-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" itemprop="url" rel="index"><span itemprop="name">LinuxåŸºç¡€å‘½ä»¤</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Linux-shellä¸­çš„ç«–çº¿ï¼ˆ-ï¼‰â€”â€”ç®¡é“ç¬¦å·"><a href="#Linux-shellä¸­çš„ç«–çº¿ï¼ˆ-ï¼‰â€”â€”ç®¡é“ç¬¦å·" class="headerlink" title="Linux shellä¸­çš„ç«–çº¿ï¼ˆ|ï¼‰â€”â€”ç®¡é“ç¬¦å·"></a>Linux shellä¸­çš„ç«–çº¿ï¼ˆ|ï¼‰â€”â€”ç®¡é“ç¬¦å·</h1><p>åœ¨Linuxç³»ç»Ÿä¸­ç®¡é“çº¿æ˜¯ç”±ç«–æ ï¼ˆ|ï¼‰éš”å¼€çš„è‹¥å¹²ä¸ªå‘½ä»¤ç»„æˆçš„åºåˆ—ï¼Œåœ¨ç®¡é“çº¿ä¸­ï¼Œæ¯ä¸ªå‘½ä»¤è¿è¡Œæ—¶éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚å‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºæ­£æ˜¯ä¸‹ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ã€‚è€Œç®¡é“çº¿ä¸­æœ‰ä¸€ç±»å‘½ä»¤ä¹Ÿç§°ä½œâ€œè¿‡æ»¤å™¨â€ï¼Œè¿‡æ»¤å™¨é¦–å…ˆè¯»å–è¾“å…¥ï¼Œç„¶åå°†è¾“å…¥ä»¥æŸç§ç®€å•æ–¹å¼è¿›è¡Œå˜æ¢ï¼ˆç›¸å½“äºè¿‡æ»¤ï¼‰ï¼Œå†å°†å¤„ç†ç»“æœè¾“å‡ºï¼Œä¾‹å¦‚grepã€tailã€sortå’Œwcç­‰å‘½ä»¤å°±ç§°ä¸ºè¿‡æ»¤å™¨ã€‚</p>
<p>ä¸€ä¸ªç®¡é“çº¿ä¸­å¯ä»¥åŒ…æ‹¬å¤šæ¡å‘½ä»¤ã€‚</p>
<p>ç”¨æ³•: <code>command 1 | command 2</code></p>
<p>ä»–çš„åŠŸèƒ½æ˜¯æŠŠç¬¬ä¸€ä¸ªå‘½ä»¤command 1æ‰§è¡Œçš„ç»“æœä½œä¸ºcommand 2çš„è¾“å…¥ä¼ ç»™command 2</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -s|sort -nr</span><br></pre></td></tr></table></figure>

<p>-s æ˜¯file sizeï¼Œ-næ˜¯numeric-sortï¼Œ-ræ˜¯reverseï¼Œåè½¬</p>
<p>è¯¥å‘½ä»¤åˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ–‡æ¡£(å«size)ï¼Œå¹¶æŠŠè¾“å‡ºé€ç»™sortå‘½ä»¤ä½œä¸ºè¾“å…¥ï¼Œsortå‘½ä»¤æŒ‰æ•°å­—é€’å‡çš„é¡ºåºæŠŠlsçš„è¾“å‡ºæ’åºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -s|sort -n</span><br></pre></td></tr></table></figure>

<p>æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºè¾“å‡ºã€‚</p>
<p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_6d09b5750100vley.html">http://blog.sina.com.cn/s/blog_6d09b5750100vley.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/kaosini/article/details/6578115">https://blog.csdn.net/kaosini/article/details/6578115</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/05/09/Docker%E5%9F%BA%E7%A1%80-%E9%95%9C%E5%83%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/09/Docker%E5%9F%BA%E7%A1%80-%E9%95%9C%E5%83%8F/" class="post-title-link" itemprop="url">DockeråŸºç¡€-é•œåƒ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-05-09 09:00:50" itemprop="dateCreated datePublished" datetime="2018-05-09T09:00:50+00:00">2018-05-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>** ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ **</p>
<p>é•œåƒï¼Œå®¹å™¨ï¼Œä»“åº“</p>
<p><strong>é•œåƒæ˜¯ Docker çš„ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€</strong>ã€‚Docker è¿è¡Œå®¹å™¨å‰éœ€è¦æœ¬åœ°å­˜åœ¨å¯¹åº”çš„é•œåƒï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰å¯¹åº”çš„é•œåƒï¼ŒDocker ä¼šå°è¯•ä»é»˜è®¤çš„é•œåƒä»“åº“ä¸‹è½½ã€‚å½“ç„¶ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„é•œåƒä»“åº“ã€‚<br>æœ¬æ–‡å°†ä»‹ç»é•œåƒçš„å…·ä½“æ“ä½œï¼ŒåŒ…æ‹¬ä½¿ç”¨ pull å‘½ä»¤ä» Docker Hub çš„é•œåƒä»“åº“ä¸­æ‹‰å–(ä¸‹è½½)å…¬å…±é•œåƒï¼›æŸ¥çœ‹æœ¬åœ°å·²æœ‰çš„é•œåƒä¿¡æ¯ï¼›ä½¿ç”¨ search å‘½ä»¤æœç´¢é•œåƒï¼›åˆ é™¤é•œåƒæ ‡ç­¾å’Œé•œåƒæ–‡ä»¶ï¼›åˆ›å»ºç”¨æˆ·è‡ªå®šä¹‰é•œåƒå¹¶ä¸Šä¼ åˆ° Docker Hub é•œåƒä»“åº“ã€‚<br>ä¸é•œåƒç›¸å…³çš„æ“ä½œéƒ½è¢«å®šä¹‰åœ¨ <strong>docker image</strong> å­å‘½ä»¤ä¸­ï¼Œè™½ç„¶ä¸å¸¦ image çš„æ ¼å¼ä¾ç„¶è¢«å…¼å®¹ï¼Œä½†å¸¦ä¸Š image åä¼šè®©å‘½ä»¤æ›´å®¹æ˜“ç†è§£ï¼Œä¹Ÿä¼šæœ‰æ›´å¥½çš„è‡ªåŠ¨è¡¥å…¨æ•ˆæœã€‚</p>
<h2 id="è·å–é•œåƒ"><a href="#è·å–é•œåƒ" class="headerlink" title="è·å–é•œåƒ"></a>è·å–é•œåƒ</h2><p>æœ¬åœ°é•œåƒæ˜¯è¿è¡Œå®¹å™¨çš„å‰æï¼Œæ‰€ä»¥åœ¨è¿è¡Œå®¹å™¨å‰æˆ‘ä»¬éœ€è¦ä½¿ç”¨ docker image pull å‘½ä»¤ä»ç½‘ç»œä¸Šçš„é•œåƒä»“åº“æŠŠé•œåƒæ‹‰å–åˆ°æœ¬åœ°ã€‚è¯¥å‘½ä»¤çš„æ ¼å¼ä¸ºï¼š</p>
<p>** docker image pull [OPTIONS] NAME[:TAG|@DIGEST] **</p>
<p>å¦‚æœåªæŒ‡å®šäº†é•œåƒçš„åç§°ï¼Œé»˜è®¤ä¼šé€‰æ‹©æ‹‰å– latest æ ‡ç­¾æ ‡è®°çš„é•œåƒã€‚æ¯”å¦‚æˆ‘ä»¬è¦æ‹‰å–æœ€æ–°çš„ ubuntu é•œåƒï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image pull ubuntu</span><br></pre></td></tr></table></figure>

<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180509141612.png" alt="1"></p>
<p>è¯¥å‘½ä»¤å®é™…æ‹‰å–çš„æ˜¯ ubuntu:latest é•œåƒã€‚ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œdocker çš„é•œåƒå…¶å®è¢«åˆ†æˆäº†å¾ˆå¤šçš„å±‚ï¼Œæ¯å±‚ä¿å­˜ä¸€äº›ç‰¹å®šçš„æ–‡ä»¶ã€‚ä¸Šé¢çš„å‘½ä»¤å®é™…ç›¸å½“äºï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image pull registry.hub.docker.com/ubuntu:latest</span><br></pre></td></tr></table></figure>

<p>å³ä»é»˜è®¤çš„æ•°æ®ä»“åº“æœåŠ¡å™¨ registry.hub.docker.com ä¸­æ‹‰å– ubuntu ä»“åº“ä¸­çš„æœ€æ–°é•œåƒã€‚å¦‚æœæˆ‘ä»¬æ„Ÿè§‰ä» Docker Hub ä¸Šæ‹‰å–é•œåƒå¤ªæ…¢ï¼Œå¯é€‰æ‹©ä»å…¶å®ƒçš„æ•°æ®ä»“åº“æœåŠ¡å™¨ä¸Šæ‹‰å–ï¼Œæ¯”å¦‚ Docker Hub åœ¨å›½å†…éƒ¨ç½²çš„æœåŠ¡å™¨ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image pull registry.docker-cn.com/library/ubuntu:latest</span><br></pre></td></tr></table></figure>

<p>é•œåƒä¸‹è½½åˆ°æœ¬åœ°åå°±å¯è¿è¡Œå®¹å™¨äº†ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="bash"> --rm ubuntu <span class="built_in">echo</span> hello docker</span></span><br></pre></td></tr></table></figure>

<p>â€“rm :é€€å‡ºæ—¶ï¼Œåˆ é™¤å®¹å™¨</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180509163105.png" alt="1"></p>
<h2 id="æŸ¥çœ‹é•œåƒä¿¡æ¯"><a href="#æŸ¥çœ‹é•œåƒä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹é•œåƒä¿¡æ¯"></a>æŸ¥çœ‹é•œåƒä¿¡æ¯</h2><p> <code>docker image ls</code> æˆ– <code>docker images</code> å‘½ä»¤å¯ä»¥åˆ—å‡ºæœ¬åœ°å­˜å‚¨çš„é•œåƒ<br><img src="/img/QQ%E6%88%AA%E5%9B%BE20180509163307.png" alt="2"></p>
<p>è¾“å‡ºçš„ä¿¡æ¯ä¸­åŒ…å«çš„å†…å®¹æœ‰ï¼š</p>
<p>REPOSITORYï¼šè¯´æ˜é•œåƒæ¥è‡ªå“ªä¸ªä»“åº“ï¼Œæ¯”å¦‚ ubuntu æˆ– registry.docker-cn.com/library/ubuntuã€‚</p>
<p>TAGï¼šé•œåƒçš„æ ‡ç­¾ä¿¡æ¯ï¼Œæ¯”å¦‚ 14.04 æˆ– latestã€‚</p>
<p>IMAGE IDï¼šæ ‡è¯†é•œåƒçš„ ID å·ã€‚</p>
<p>CREATEDï¼šåˆ›å»ºé•œåƒçš„æ—¶é—´ã€‚</p>
<p>SIZEï¼šé•œåƒå¤§å°ã€‚</p>
<p>å…¶ä¸­é•œåƒçš„ ID ä¿¡æ¯ååˆ†é‡è¦ï¼Œå®ƒå”¯ä¸€çš„æ ‡è¯†äº†é•œåƒã€‚</p>
<p>TAG ä¿¡æ¯ç”¨æ¥æ ‡è®°æ¥è‡ªåŒä¸€ä¸ªä»“åº“(æ¯”å¦‚ ubuntu)çš„ä¸åŒé•œåƒã€‚ä¾‹å¦‚ ubuntu ä»“åº“ä¸­æœ‰å¤šä¸ªé•œåƒï¼Œå¯ä»¥é€šè¿‡ TAG ä¿¡æ¯æ¥åŒº</p>
<p>åˆ†å®ƒä»¬ï¼ŒTAG 13.04ã€14.04 å’Œ 16.04 éƒ½ä»£è¡¨äº†ä¸åŒçš„å‘è¡Œç‰ˆæœ¬ã€‚</p>
<p>ä½¿ç”¨ <code>docker image tag</code> å‘½ä»¤ä¸ºæœ¬åœ°çš„é•œåƒæ·»åŠ æ–°çš„æ ‡ç­¾è¿˜å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬çš„ä½¿ç”¨ï¼Œæ¯”å¦‚ä¸º ubuntu:latest é•œåƒæ·»åŠ ä¸‹é¢çš„æ ‡ç­¾ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image tag ubuntu:latest oldubuntu</span><br></pre></td></tr></table></figure>

<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180509163748.png" alt="3"></p>
<p>ä½¿ç”¨<code>docker image inspect</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image inspect ubuntu:latest</span><br></pre></td></tr></table></figure>

<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180509164159.png" alt="4"></p>
<p>å®ƒè¾“å‡ºçš„æ˜¯ä¸€ä¸ª JSON æ ¼å¼çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼šæœ‰çš„æ”¾çŸ¢çš„é€šè¿‡ -f é€‰é¡¹å–å…¶ä¸­çš„æŸä¸€éƒ¨åˆ†ã€‚æ¯”å¦‚åªè·å–é•œåƒçš„ Architecture ä¿¡æ¯ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image inspect -f &#123;&#123;<span class="string">&quot;.Architecture&quot;</span>&#125;&#125; ubuntu:latest</span><br></pre></td></tr></table></figure>

<h2 id="æœç´¢é•œåƒ"><a href="#æœç´¢é•œåƒ" class="headerlink" title="æœç´¢é•œåƒ"></a>æœç´¢é•œåƒ</h2><p>é™¤äº†ç›´æ¥åœ¨ Docker Hub çš„å®˜æ–¹ç½‘ç«™ä¸Šæœç´¢é•œåƒèµ„æºï¼Œè¿˜å¯ä»¥é€š docker search å‘½ä»¤ä»¥å‘½ä»¤è¡Œçš„æ–¹å¼è¿›è¡Œæœç´¢ï¼Œæ¯”å¦‚æœç´¢ mysql é•œåƒï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå‘½ä»¤çš„ä»·å€¼æœ‰é™ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨é€‰æ‹©é•œåƒæ—¶è¿˜æ˜¯éœ€è¦æ…é‡çš„ã€‚å¾€å¾€è¦åœ¨ Docker Hub çš„å®˜æ–¹ç½‘ç«™ä¸ŠæŸ¥çœ‹é•œåƒç›¸å…³çš„è¯¦ç»†ä¿¡æ¯ï¼Œç„¶åæ‰ä¼šå†³å®šæ˜¯å¦ä½¿ç”¨ï¼Œè€Œ docker search å‘½ä»¤æä¾›çš„ä¿¡æ¯è¿‡äºæœ‰é™ã€‚</p>
<h2 id="åˆ é™¤é•œåƒ"><a href="#åˆ é™¤é•œåƒ" class="headerlink" title="åˆ é™¤é•œåƒ"></a>åˆ é™¤é•œåƒ</h2><p> docker image rm å‘½ä»¤ä¼ é€’é•œåƒçš„æ ‡ç­¾æˆ– IDï¼Œè¿™ä¸¤ç§æ–¹å¼ç•¥å¾®æœ‰äº›åŒºåˆ«ã€‚</p>
<h3 id="ä½¿ç”¨è¿›è¡Œçš„æ ‡ç­¾åˆ é™¤é•œåƒ"><a href="#ä½¿ç”¨è¿›è¡Œçš„æ ‡ç­¾åˆ é™¤é•œåƒ" class="headerlink" title="ä½¿ç”¨è¿›è¡Œçš„æ ‡ç­¾åˆ é™¤é•œåƒ"></a>ä½¿ç”¨è¿›è¡Œçš„æ ‡ç­¾åˆ é™¤é•œåƒ</h3><p>å¯¹äºè¢«å¤šä¸ªæ ‡ç­¾å¼•ç”¨çš„é•œåƒ IDï¼Œåˆ é™¤æ ‡ç­¾æ—¶åªæ˜¯æŠŠé‚£ä¸ªæ ‡ç­¾åˆ æ‰äº†ï¼Œå¹¶ä¸ä¼šçœŸæ­£åˆ é™¤é•œåƒæ–‡ä»¶ã€‚</p>
<h3 id="ä½¿ç”¨é•œåƒ-ID-åˆ é™¤é•œåƒ"><a href="#ä½¿ç”¨é•œåƒ-ID-åˆ é™¤é•œåƒ" class="headerlink" title="ä½¿ç”¨é•œåƒ ID åˆ é™¤é•œåƒ"></a>ä½¿ç”¨é•œåƒ ID åˆ é™¤é•œåƒ</h3><p> docker æ£€æµ‹åˆ°è¯¥é•œåƒ ID è¢«å¼•ç”¨äº†å¤šæ¬¡å°±æœºæ™ºçš„æŠ¥é”™äº†ï¼Œå¹¶ä¸”ç»ˆæ­¢äº†åˆ é™¤æ“ä½œã€‚åŒæ ·å¦‚æœç”±å…¶å®ƒçš„é•œåƒå¼•ç”¨äº†è¯¥ ID çš„é•œåƒï¼Œ docker åŒæ ·ä¼šæŠ¥é”™å¹¶ç»ˆæ­¢åˆ é™¤æ“ä½œã€‚æ‰€ä»¥ï¼Œåªæœ‰å½“ä¸€ä¸ªé•œåƒä¸è¢«å¤šä¸ªæ ‡ç­¾å¼•ç”¨ï¼Œä¹Ÿæ²¡å…¶å®ƒé•œåƒå¼•ç”¨å®ƒæ—¶ï¼Œæ‰å¯ä»¥è¢«é€šè¿‡é•œåƒ ID åˆ é™¤ã€‚</p>
<h2 id="åˆ›å»ºé•œåƒ"><a href="#åˆ›å»ºé•œåƒ" class="headerlink" title="åˆ›å»ºé•œåƒ"></a>åˆ›å»ºé•œåƒ</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼åˆ›å»ºé•œåƒï¼Œæ¯”å¦‚åŸºäºå·²æœ‰å®¹å™¨è¿›è¡Œåˆ›å»ºå’ŒåŸºäº Dockerfile æ–‡ä»¶è¿›è¡Œåˆ›å»ºã€‚</p>
<p>è¿™é‡Œåªä»‹ç»å¦‚ä½•é€šè¿‡ <code>docker container commit</code> å‘½ä»¤åŸºäºå·²æœ‰å®¹å™¨åˆ›å»ºé•œåƒ</p>
<p>æˆ‘ä»¬å…ˆå¯åŠ¨ä¸€ä¸ªä»¥ ubuntu:latest ä¸ºé•œåƒçš„å®¹å™¨ï¼Œç„¶ååœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º testfile çš„æ–‡ä»¶:</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="bash"> -it ubuntu:latest bash</span></span><br></pre></td></tr></table></figure>

<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Desktop]<span class="comment"># docker run -it ubuntu:latest bash</span></span><br><span class="line">root@<span class="number">2</span>a45b0b39bf8:/<span class="comment"># touch testfile</span></span><br><span class="line">root@<span class="number">2</span>a45b0b39bf8:/<span class="comment"># ls</span></span><br><span class="line">bin   dev  home  lib64  mnt  proc  <span class="keyword">run</span><span class="bash">   srv  testfile  usr</span></span><br><span class="line">boot  etc  lib   media  opt  root  sbin  sys  tmp       var</span><br><span class="line">root@<span class="number">2</span>a45b0b39bf8:/<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>åœ¨æ–‡ä»¶åˆ›å»ºåé€€å‡ºå®¹å™¨ï¼Œä½†è¦è®°ä½è¯¥å®¹å™¨çš„ ID ä¸ºï¼š 2a45b0b39bf8 ã€‚ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åˆ›å»ºé•œåƒï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container commit -m <span class="string">&quot;add file testfile.&quot;</span> <span class="number">2</span>a45b0b39bf8 testimage</span><br></pre></td></tr></table></figure>

<p>é•œåƒåˆ›å»ºæˆåŠŸåï¼Œä½ å¯ä»¥åœ¨é•œåƒåˆ—è¡¨ä¸­çœ‹åˆ°åç§°ä¸º testimage çš„é•œåƒ</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢è¿è¡Œä¸€ä¸ªåŸºäº testimage çš„å®¹å™¨ï¼Œçœ‹çœ‹ nickfile æ˜¯å¦å­˜åœ¨ã€‚â€“rmï¼šé€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="bash"> --rm testimage ls</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å®¹å™¨ä¸­åˆ›å»ºçš„æ–‡ä»¶ testfile å·²ç»è¢«æˆåŠŸçš„æ·»åŠ åˆ° testimage é•œåƒä¸­äº†ã€‚</p>
<h2 id="å¯¼å…¥å¯¼å‡ºé•œåƒ"><a href="#å¯¼å…¥å¯¼å‡ºé•œåƒ" class="headerlink" title="å¯¼å…¥å¯¼å‡ºé•œåƒ"></a>å¯¼å…¥å¯¼å‡ºé•œåƒ</h2><p>å½“ç¢°åˆ°æ²¡æœ‰ç½‘ç»œçš„ç¯å¢ƒæ—¶ï¼Œå¦‚ä½•è·å–é•œåƒå‘¢ï¼Ÿç­”æ¡ˆæ˜¯åœ¨èƒ½å¤Ÿè·å¾—é•œåƒçš„ç¯å¢ƒä¸­æŠŠé•œåƒå¯¼å‡ºä¸ºæ–‡ä»¶ï¼Œç„¶åé€šè¿‡ U ç›˜ç­‰è®¾å¤‡æ‹·è´åˆ°ç›®æ ‡ç¯å¢ƒä¸­ï¼Œå†è¿›è¡Œå¯¼å…¥ã€‚</p>
<h3 id="å¯¼å‡ºé•œåƒ"><a href="#å¯¼å‡ºé•œåƒ" class="headerlink" title="å¯¼å‡ºé•œåƒ"></a>å¯¼å‡ºé•œåƒ</h3><p>é€šè¿‡ <code>docker image save</code> å‘½ä»¤å¯ä»¥æŠŠé•œåƒå¯¼å‡ºä¸ºæœ¬åœ°æ–‡ä»¶ï¼Œæ¯”å¦‚å¯¼å‡º ubuntu:latest é•œåƒä¸º ubuntu1804.tarï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image save -o ubuntu1804.tar ubuntu:latest</span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬æˆ‘ä»¬è¿˜ä¼šå†å‹ç¼©ä¸€ä¸‹ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ä¼šå°ä¸å°‘ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -czf ubuntu1804.tar.gz ubuntu1804.tar</span><br></pre></td></tr></table></figure>

<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180509172150.png" alt="4"></p>
<h3 id="å¯¼å…¥é•œåƒ"><a href="#å¯¼å…¥é•œåƒ" class="headerlink" title="å¯¼å…¥é•œåƒ"></a>å¯¼å…¥é•œåƒ</h3><p>æŠŠ ubuntu1804.tar.gz æ–‡ä»¶æ‹·è´åˆ°ç›®æ ‡ç³»ç»Ÿä¸Šåå…ˆè¦è§£å‹å‡º ubuntu1804.tar æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xf ubuntu1804.tar.gz</span><br></pre></td></tr></table></figure>

<p>ç„¶åé€šè¿‡ docker image load å‘½ä»¤æ‰§è¡Œé•œåƒçš„å¯¼å…¥æ“ä½œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image load -i ubuntu1804.tar</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°± OK äº†ï¼Œç”¨ docker image ls å‘½ä»¤çœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯å·²ç»å¯ä»¥çœ‹åˆ° ubuntu:latest é•œåƒäº†ï¼</p>
<h2 id="ä¸Šä¼ é•œåƒ"><a href="#ä¸Šä¼ é•œåƒ" class="headerlink" title="ä¸Šä¼ é•œåƒ"></a>ä¸Šä¼ é•œåƒ</h2><p>å¯ä»¥ä½¿ç”¨ <strong><code>docker image push</code></strong> å‘½ä»¤æŠŠé•œåƒä¸Šä¼ åˆ°é•œåƒä»“åº“æœåŠ¡å™¨ï¼Œé»˜è®¤æ˜¯ä¸Šä¼ åˆ° Docker Hub çš„é•œåƒä»“åº“ï¼Œæ­¤æ—¶äº‹å…ˆéœ€è¦æ³¨å†Œç”¨æˆ·å¹¶è¿›è¡Œç™»å½•ã€‚ä¸Šä¼ é•œåƒçš„å‘½ä»¤æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image push NAME[:TAG]</span><br></pre></td></tr></table></figure>

<p>åœ¨ Docker Hub æ³¨å†Œè´¦å·ï¼Œå¹¶é€šè¿‡ docker login å‘½ä»¤å®Œæˆäº†ç™»å½•æ“ä½œ(éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒéªŒè¯)ã€‚æ¥ä¸‹æ¥å°±å¯æŠŠæœ¬åœ°çš„é•œåƒä¸Šä¼ åˆ°é•œåƒä»“åº“æœåŠ¡å™¨äº†ã€‚åœ¨ä¸Šä¼ å‰éœ€è¦ç»™é•œåƒæ‰“ä¸Šåˆæ³•çš„æ ‡ç­¾(ç”¨æˆ·è´¦å·/ä»“åº“åç§°:TAG)ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Desktop]# docker image tag --help</span><br><span class="line"></span><br><span class="line">Usage: docker image tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><br><span class="line"></span><br><span class="line">Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE</span><br><span class="line"></span><br><span class="line">Options:</span><br></pre></td></tr></table></figure>

<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image tag azcli:<span class="number">1.0</span> ljfpower/azcli:latest</span><br></pre></td></tr></table></figure>

<p>æœ€åä¸Šä¼ è¿™ä¸ªæ ‡ç­¾å°±è¡Œäº†ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image push ljfpower/azcli:latest</span><br></pre></td></tr></table></figure>

<p>ä¸Šä¼ åä½ å°±å¯ä»¥åœ¨ Docker Hub ä¸Šçœ‹åˆ°è¿™ä¸ªé•œåƒäº†ã€‚</p>
<p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/sparkdev/p/8901728.html">https://www.cnblogs.com/sparkdev/p/8901728.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/05/08/CentOS7-Docker-Jenkins-DotNetCore%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/08/CentOS7-Docker-Jenkins-DotNetCore%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">CentOS7 & Docker & Jenkins & DotNetCoreé¡¹ç›®é…ç½®</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-05-08 13:54:33" itemprop="dateCreated datePublished" datetime="2018-05-08T13:54:33+00:00">2018-05-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Jenkins/" itemprop="url" rel="index"><span itemprop="name">Jenkins</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CentOS7-amp-Docker-amp-Jenkins-amp-DotNetCoreé¡¹ç›®é…ç½®"><a href="#CentOS7-amp-Docker-amp-Jenkins-amp-DotNetCoreé¡¹ç›®é…ç½®" class="headerlink" title="CentOS7 &amp; Docker &amp; Jenkins &amp; DotNetCoreé¡¹ç›®é…ç½®"></a>CentOS7 &amp; Docker &amp; Jenkins &amp; DotNetCoreé¡¹ç›®é…ç½®</h1><h2 id="GitHubé…ç½®"><a href="#GitHubé…ç½®" class="headerlink" title="GitHubé…ç½®"></a>GitHubé…ç½®</h2><h3 id="SercretText"><a href="#SercretText" class="headerlink" title="SercretText"></a>SercretText</h3><p>æ³¨ï¼šæ­¤å¤„éœ€è¦ä¸€ä¸ªå¯¹é¡¹ç›®æœ‰å†™æƒé™çš„è´¦æˆ·</p>
<p>è¿›å…¥SGithub â€“&gt; Setting â€“&gt; Developer settings â€“&gt; Personal access tokens</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508141541.png" alt="1"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508141948.png" alt="2"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508142138.png" alt="3"></p>
<p>è‡ªå·±å…ˆä¿å­˜æ­¤tokenï¼Œå¦‚æœä¸¢å¤±ï¼Œä¹‹åå†ä¹Ÿæ— æ³•æ‰¾åˆ°è¿™ä¸ªtokenã€‚</p>
<h2 id="é…ç½®GitHub-Plugin"><a href="#é…ç½®GitHub-Plugin" class="headerlink" title="é…ç½®GitHub Plugin"></a>é…ç½®GitHub Plugin</h2><p>ç³»ç»Ÿç®¡ç† â€“&gt; ç³»ç»Ÿè®¾ç½® â€“&gt; GitHub â€“&gt; GitHub Plugin</p>
<p>é…ç½®githubç”¨æˆ·åï¼Œé‚®ç®±</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508144549.png" alt="4"></p>
<h2 id="é…ç½®Jenkins"><a href="#é…ç½®Jenkins" class="headerlink" title="é…ç½®Jenkins"></a>é…ç½®Jenkins</h2><h3 id="æ–°å»ºä»»åŠ¡ï¼š"><a href="#æ–°å»ºä»»åŠ¡ï¼š" class="headerlink" title="æ–°å»ºä»»åŠ¡ï¼š"></a>æ–°å»ºä»»åŠ¡ï¼š</h3><p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508145651.png" alt="5"></p>
<h3 id="General-é€šå¸¸"><a href="#General-é€šå¸¸" class="headerlink" title="General(é€šå¸¸)"></a>General(é€šå¸¸)</h3><p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508145841.png" alt="6"></p>
<h3 id="æºç ç®¡ç†"><a href="#æºç ç®¡ç†" class="headerlink" title="æºç ç®¡ç†"></a>æºç ç®¡ç†</h3><p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508145941.png" alt="7"></p>
<p>ç‚¹å‡»Addï¼š</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508150102.png" alt="8"></p>
<h3 id="æ„å»ºè§¦å‘å™¨ï¼š"><a href="#æ„å»ºè§¦å‘å™¨ï¼š" class="headerlink" title="æ„å»ºè§¦å‘å™¨ï¼š"></a>æ„å»ºè§¦å‘å™¨ï¼š</h3><p><code>H/2 * * * *</code></p>
<p>å…·ä½“å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/brave_insist/article/details/78434877">https://blog.csdn.net/brave_insist/article/details/78434877</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">æ¯15åˆ†é’Ÿæ„å»ºä¸€æ¬¡ï¼šH&#x2F;15 * * * *   æˆ–*&#x2F;5 * * * *</span><br><span class="line"></span><br><span class="line">æ¯å¤©8ç‚¹æ„å»ºä¸€æ¬¡ï¼š0 8 * * *</span><br><span class="line"></span><br><span class="line">æ¯å¤©8ç‚¹~17ç‚¹ï¼Œä¸¤å°æ—¶æ„å»ºä¸€æ¬¡ï¼š0 8-17&#x2F;2 * * *</span><br><span class="line"></span><br><span class="line">å‘¨ä¸€åˆ°å‘¨äº”ï¼Œ8ç‚¹~17ç‚¹ï¼Œä¸¤å°æ—¶æ„å»ºä¸€æ¬¡ï¼š0 8-17&#x2F;2 * * 1-5</span><br><span class="line"></span><br><span class="line">æ¯æœˆ1å·ã€15å·å„æ„å»ºä¸€æ¬¡ï¼Œé™¤12æœˆï¼šH H 1,15 1-11 *</span><br><span class="line"></span><br><span class="line">*&#x2F;5 * * * * ï¼ˆæ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡æºç å˜åŒ–ï¼‰</span><br><span class="line"></span><br><span class="line">0 2 * * * ï¼ˆæ¯å¤©2:00 å¿…é¡»buildä¸€æ¬¡æºç ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ¯ä¸ªéƒ¨åˆ†ä»£è¡¨çš„å«ä¹‰ä»¥åŠå–å€¼èŒƒå›´</span><br><span class="line"></span><br><span class="line">åˆ†é’Ÿï¼Œå–å€¼èŒƒå›´ï¼ˆ0~59ï¼‰ï¼šè‹¥å…¶ä»–å€¼ä¸åšè®¾å®šï¼Œåˆ™è¡¨ç¤ºæ¯ä¸ªè®¾å®šçš„åˆ†é’Ÿéƒ½ä¼šæ„å»º</span><br><span class="line">å¦‚ï¼š5 * * * * ï¼Œè¡¨ç¤ºæ¯ä¸ªå°æ—¶çš„ç¬¬5åˆ†é’Ÿéƒ½ä¼šæ„å»ºä¸€æ¬¡</span><br><span class="line"></span><br><span class="line">å°æ—¶ï¼Œå–å€¼èŒƒå›´ï¼ˆ0~23ï¼‰ï¼šè‹¥å…¶ä»–å€¼ä¸åšè®¾å®šï¼Œåˆ™è¡¨ç¤ºæ¯ä¸ªè®¾å®šå°æ—¶çš„æ¯åˆ†é’Ÿéƒ½ä¼šæ„å»º</span><br><span class="line">å¦‚ï¼š* 5 * * * ï¼Œè¡¨ç¤ºåœ¨æ¯å¤©5ç‚¹çš„æ—¶å€™ï¼Œä¸€å°æ—¶å†…æ¯ä¸€åˆ†é’Ÿéƒ½ä¼šæ„å»ºä¸€æ¬¡</span><br><span class="line"></span><br><span class="line">æ—¥æœŸï¼Œå–å€¼èŒƒå›´ï¼ˆ1~31ï¼‰ï¼šè‹¥å…¶ä»–å€¼ä¸åšè®¾å®šï¼Œåˆ™è¡¨ç¤ºæ¯ä¸ªæœˆçš„é‚£ä¸€å¤©æ¯åˆ†é’Ÿéƒ½ä¼šæ„å»ºä¸€æ¬¡</span><br><span class="line">å¦‚ï¼š* * 5 * *ï¼Œè¡¨ç¤ºåœ¨æ¯ä¸ªæœˆ5å·çš„æ—¶å€™ï¼Œ0ç‚¹å¼€å§‹æ¯åˆ†é’Ÿæ„å»ºä¸€æ¬¡</span><br><span class="line"></span><br><span class="line">æœˆä»½ï¼Œå–å€¼èŒƒå›´ï¼ˆ1~12ï¼‰ï¼šè‹¥å…¶ä»–å€¼ä¸åšè®¾å®šï¼Œåˆ™è¡¨ç¤ºæ¯å¹´çš„é‚£ä¸ªæœˆæ¯åˆ†é’Ÿéƒ½ä¼šæ„å»ºä¸€æ¬¡</span><br><span class="line">å¦‚ï¼š* * * 5 *ï¼Œè¡¨ç¤ºåœ¨æ¯å¹´çš„5æœˆä»½ï¼Œ1å·0ç‚¹å¼€å§‹æ¯åˆ†é’Ÿæ„å»ºä¸€æ¬¡</span><br><span class="line"></span><br><span class="line">æ˜ŸæœŸï¼Œå–å€¼èŒƒå›´ï¼ˆ0 ~ 7ï¼‰ï¼šè‹¥å…¶ä»–å€¼ä¸åšè®¾å®šï¼Œåˆ™è¡¨ç¤ºæ¯å‘¨çš„é‚£ä¸€å¤©å‡ æ¯åˆ†é’Ÿéƒ½ä¼šæ„å»ºä¸€æ¬¡</span><br><span class="line">å¦‚ï¼š* * * * 5ï¼Œè¡¨ç¤ºæ¯å‘¨äº”0ç‚¹å¼€å§‹æ¯åˆ†é’Ÿæ„å»ºä¸€æ¬¡</span><br></pre></td></tr></table></figure>

<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508150645.png" alt="9"></p>
<h3 id="æ„å»ºç¯å¢ƒ"><a href="#æ„å»ºç¯å¢ƒ" class="headerlink" title="æ„å»ºç¯å¢ƒ"></a>æ„å»ºç¯å¢ƒ</h3><p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508151257.png" alt="10"></p>
<p>ç‚¹å‡»Addï¼š</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508152137.png" alt="10"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508152518.png" alt="11"></p>
<h3 id="æ„å»º"><a href="#æ„å»º" class="headerlink" title="æ„å»º"></a>æ„å»º</h3><p><img src="/img/QQ%E6%88%AA%E5%9B%BE20180508152609.png" alt="12"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># è·å–çŸ­ç‰ˆæœ¬å·</span></span><br><span class="line"></span><br><span class="line">GITHASH=`git rev-parse --short HEAD`</span><br><span class="line"><span class="built_in">echo</span> ---------------Remove-Orphans------------------</span><br><span class="line">docker-compose -f ./docker-compose.yml -f ./docker-compose.override.yml  -p dotnetcoreapp1 down --rmi <span class="built_in">local</span> --remove-orphans</span><br><span class="line"><span class="built_in">echo</span> ------------------Config-----------------------</span><br><span class="line">docker-compose -f ./docker-compose.ci.build.yml -p dotnetcoreapp1 config</span><br><span class="line"><span class="built_in">echo</span> ------------------Build------------------------</span><br><span class="line">docker-compose -f ./docker-compose.ci.build.yml -p dotnetcoreapp1 up --build</span><br><span class="line"><span class="built_in">echo</span> ---------------Publishing...------------------</span><br><span class="line">docker-compose -f <span class="string">&quot;./docker-compose.yml&quot;</span> -f <span class="string">&quot;./docker-compose.override.yml&quot;</span>  -p dotnetcoreapp1 up -d --build</span><br><span class="line"><span class="built_in">echo</span> ---------------Clear-Images...------------------</span><br><span class="line">docker rmi -f $(docker images -f <span class="string">&quot;dangling=true&quot;</span> -q)</span><br><span class="line"><span class="built_in">echo</span> ---------------Clear-Containers...------------------</span><br><span class="line">docker rm dotnetcoreapp1_ci-build_1</span><br></pre></td></tr></table></figure>

<p>å‘½ä»¤è¯´æ˜ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-f, --file FILE æŒ‡å®šä½¿ç”¨çš„ Compose æ¨¡æ¿æ–‡ä»¶ï¼Œé»˜è®¤ä¸º docker-compose.ymlï¼Œå¯ä»¥å¤šæ¬¡æŒ‡å®šã€‚</span><br><span class="line"></span><br><span class="line">-p, --project-name NAME æŒ‡å®šé¡¹ç›®åç§°ï¼Œé»˜è®¤å°†ä½¿ç”¨æ‰€åœ¨ç›®å½•åç§°ä½œä¸ºé¡¹ç›®åã€‚</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹docker-compose.override.ymlæ–‡ä»¶ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  dotnetcoreapp:</span><br><span class="line">    environment:</span><br><span class="line">      - ASPNETCORE_ENVIRONMENT=Development</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">&quot;8081:80&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">[MvcTest] $ &#x2F;bin&#x2F;bash &#x2F;tmp&#x2F;jenkins3923627102865574973.sh</span><br><span class="line">---------------Remove-Orphans------------------</span><br><span class="line"></span><br><span class="line">Removing network dotnetcoreapp1_default</span><br><span class="line">------------------Config-----------------------</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  ci-build:</span><br><span class="line">    command: &#x2F;bin&#x2F;bash -c &quot;dotnet restore .&#x2F;DotNetCoreApp.sln &amp;&amp; dotnet publish .&#x2F;DotNetCoreApp.sln</span><br><span class="line">      -c Release -o .&#x2F;obj&#x2F;Docker&#x2F;publish&quot;</span><br><span class="line">    image: microsoft&#x2F;aspnetcore-build:1.0-2.0</span><br><span class="line">    volumes:</span><br><span class="line">    - &#x2F;var&#x2F;jenkins_home&#x2F;workspace&#x2F;MvcTest:&#x2F;src:rw</span><br><span class="line">    working_dir: &#x2F;src</span><br><span class="line">version: &#39;3.0&#39;</span><br><span class="line"></span><br><span class="line">------------------Build------------------------</span><br><span class="line"></span><br><span class="line">Creating network &quot;dotnetcoreapp1_default&quot; with the default driver</span><br><span class="line"></span><br><span class="line">Creating dotnetcoreapp1_ci-build_1 ... </span><br><span class="line"></span><br><span class="line">[1A[2K</span><br><span class="line">Creating dotnetcoreapp1_ci-build_1 ... [32mdone[0m</span><br><span class="line">[1BAttaching to dotnetcoreapp1_ci-build_1</span><br><span class="line">[36mci-build_1  |[0m   Restoring packages for &#x2F;src&#x2F;DotNetCoreApp&#x2F;DotNetCoreApp.csproj...</span><br><span class="line"></span><br><span class="line">[36mci-build_1  |[0m   Generating MSBuild file &#x2F;src&#x2F;DotNetCoreApp&#x2F;obj&#x2F;DotNetCoreApp.csproj.nuget.g.props.</span><br><span class="line"></span><br><span class="line">[36mci-build_1  |[0m   Generating MSBuild file &#x2F;src&#x2F;DotNetCoreApp&#x2F;obj&#x2F;DotNetCoreApp.csproj.nuget.g.targets.</span><br><span class="line">[36mci-build_1  |[0m   Restore completed in 30.06 sec for &#x2F;src&#x2F;DotNetCoreApp&#x2F;DotNetCoreApp.csproj.</span><br><span class="line">[36mci-build_1  |[0m   Restoring packages for &#x2F;src&#x2F;DotNetCoreApp&#x2F;DotNetCoreApp.csproj...</span><br><span class="line"></span><br><span class="line">[36mci-build_1  |[0m   Restore completed in 2.64 sec for &#x2F;src&#x2F;DotNetCoreApp&#x2F;DotNetCoreApp.csproj.</span><br><span class="line"></span><br><span class="line">[36mci-build_1  |[0m Microsoft (R) Build Engine version 15.6.84.34536 for .NET Core</span><br><span class="line">[36mci-build_1  |[0m Copyright (C) Microsoft Corporation. All rights reserved.</span><br><span class="line">[36mci-build_1  |[0m </span><br><span class="line"></span><br><span class="line">[36mci-build_1  |[0m   Restore completed in 97.25 ms for &#x2F;src&#x2F;DotNetCoreApp&#x2F;DotNetCoreApp.csproj.</span><br><span class="line">[36mci-build_1  |[0m   Restore completed in 24.37 ms for &#x2F;src&#x2F;DotNetCoreApp&#x2F;DotNetCoreApp.csproj.</span><br><span class="line"></span><br><span class="line">[36mci-build_1  |[0m   DotNetCoreApp -&gt; &#x2F;src&#x2F;DotNetCoreApp&#x2F;bin&#x2F;Release&#x2F;netcoreapp2.0&#x2F;DotNetCoreApp.dll</span><br><span class="line"></span><br><span class="line">[36mci-build_1  |[0m   DotNetCoreApp -&gt; &#x2F;src&#x2F;DotNetCoreApp&#x2F;obj&#x2F;Docker&#x2F;publish&#x2F;</span><br><span class="line"></span><br><span class="line">[36mdotnetcoreapp1_ci-build_1 exited with code 0</span><br><span class="line"></span><br><span class="line">[0m---------------Publishing...------------------</span><br><span class="line"></span><br><span class="line">Building dotnetcoreapp</span><br><span class="line"></span><br><span class="line">Step 1&#x2F;6 : FROM microsoft&#x2F;aspnetcore:2.0</span><br><span class="line"> ---&gt; c4ca78cf9dca</span><br><span class="line">Step 2&#x2F;6 : ARG source</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 5ccef217b449</span><br><span class="line">Step 3&#x2F;6 : WORKDIR &#x2F;app</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 21ca58736a23</span><br><span class="line">Step 4&#x2F;6 : EXPOSE 80</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; fa9898960c84</span><br><span class="line">Step 5&#x2F;6 : COPY $&#123;source:-obj&#x2F;Docker&#x2F;publish&#125; .</span><br><span class="line"></span><br><span class="line"> ---&gt; a7d0c6386eb4</span><br><span class="line">Step 6&#x2F;6 : ENTRYPOINT [&quot;dotnet&quot;, &quot;DotNetCoreApp.dll&quot;]</span><br><span class="line"> ---&gt; Running in dd4cfb6f5cb8</span><br><span class="line"></span><br><span class="line">Removing intermediate container dd4cfb6f5cb8</span><br><span class="line"> ---&gt; d8dea36554b4</span><br><span class="line">Successfully built d8dea36554b4</span><br><span class="line">Successfully tagged dotnetcoreapp:latest</span><br><span class="line">Recreating dotnetcoreapp2_dotnetcoreapp_1 ... </span><br><span class="line"></span><br><span class="line">[1A[2K</span><br><span class="line">Recreating dotnetcoreapp2_dotnetcoreapp_1 ... [32mdone[0m</span><br><span class="line">[1B---------------Clear-Images...------------------</span><br><span class="line"></span><br><span class="line">Deleted: sha256:238c39ae8c13a1d6816361946429024cb46e6911329dad2d714033d2578da618</span><br><span class="line">Deleted: sha256:12dfe61eae3ee68775237340f3e50e19554a653357baec0de52a50d0cff96652</span><br><span class="line">Deleted: sha256:3f6beb8ffd03ee5d3b9fd0e9e5b46074d270cdb707fa07056087194a53be1dd4</span><br><span class="line">---------------Clear-Containers...------------------</span><br><span class="line"></span><br><span class="line">dotnetcoreapp1_ci-build_1</span><br><span class="line">Finished: SUCCESS</span><br></pre></td></tr></table></figure>

<p>æœ€åé€šè¿‡æµè§ˆå™¨è®¿é—®<code>http://localhost:8081</code></p>
<p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/stulzq/p/8627824.html">http://www.cnblogs.com/stulzq/p/8627824.html</a><br><a target="_blank" rel="noopener" href="https://github.com/muyinchen/woker/blob/master/%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E6%90%AD%E5%BB%BAJenkins%2BGithub%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E7%8E%AF%E5%A2%83.md">https://github.com/muyinchen/woker/blob/master/%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E6%90%AD%E5%BB%BAJenkins%2BGithub%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E7%8E%AF%E5%A2%83.md</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/LongJiangXie/p/7517909.html">http://www.cnblogs.com/LongJiangXie/p/7517909.html</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/JacZhu/p/6814848.html">http://www.cnblogs.com/JacZhu/p/6814848.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/05/03/%E5%8D%B8%E8%BD%BDDotNetCore/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/03/%E5%8D%B8%E8%BD%BDDotNetCore/" class="post-title-link" itemprop="url">å¸è½½DotNetCore</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-05-03 16:59:47" itemprop="dateCreated datePublished" datetime="2018-05-03T16:59:47+00:00">2018-05-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/DotNetCore/" itemprop="url" rel="index"><span itemprop="name">DotNetCore</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="å¸è½½DotNetCore"><a href="#å¸è½½DotNetCore" class="headerlink" title="å¸è½½DotNetCore"></a>å¸è½½DotNetCore</h1><p>æŸ¥æ‰¾dotnetå‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which dotnet</span><br></pre></td></tr></table></figure>

<p>æŸ¥æ‰¾dotnetç›¸å…³çš„rpmåŒ…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep dotnet</span><br></pre></td></tr></table></figure>

<p>ç§»é™¤ç›¸å…³åŒ…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e dotnet-runtime-deps-2.1.0-preview2-26406-04-2.1.0_preview2_26406_04-1.x86_64</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/05/03/Docker%E5%AE%B9%E5%99%A8%E8%BF%9B%E5%85%A5%E7%9A%84%E6%96%B9%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/03/Docker%E5%AE%B9%E5%99%A8%E8%BF%9B%E5%85%A5%E7%9A%84%E6%96%B9%E5%BC%8F/" class="post-title-link" itemprop="url">Dockerå®¹å™¨è¿›å…¥çš„æ–¹å¼</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-05-03 16:37:21" itemprop="dateCreated datePublished" datetime="2018-05-03T16:37:21+00:00">2018-05-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Dockerå®¹å™¨è¿›å…¥çš„æ–¹å¼"><a href="#Dockerå®¹å™¨è¿›å…¥çš„æ–¹å¼" class="headerlink" title="Dockerå®¹å™¨è¿›å…¥çš„æ–¹å¼"></a>Dockerå®¹å™¨è¿›å…¥çš„æ–¹å¼</h1><h2 id="1-ä½¿ç”¨docker-execè¿›å…¥Dockerå®¹å™¨"><a href="#1-ä½¿ç”¨docker-execè¿›å…¥Dockerå®¹å™¨" class="headerlink" title="1.ä½¿ç”¨docker execè¿›å…¥Dockerå®¹å™¨"></a>1.ä½¿ç”¨docker execè¿›å…¥Dockerå®¹å™¨</h2><p>dockeråœ¨1.3.Xç‰ˆæœ¬ä¹‹åè¿˜æä¾›äº†ä¸€ä¸ªæ–°çš„å‘½ä»¤execç”¨äºè¿›å…¥å®¹å™¨ï¼Œè¿™ç§æ–¹å¼ç›¸å¯¹æ›´ç®€å•ä¸€äº›ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¯¥å‘½ä»¤çš„ä½¿ç”¨ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker exec --help</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost toor]# sudo docker exec --help</span><br><span class="line"></span><br><span class="line">Usage: docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</span><br><span class="line"></span><br><span class="line">Run a command in a running container</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -d, --detach               Detached mode: run command in the background</span><br><span class="line">      --detach-keys string   Override the key sequence for detaching a</span><br><span class="line">                             container</span><br><span class="line">  -e, --env list             Set environment variables</span><br><span class="line">  -i, --interactive          Keep STDIN open even if not attached</span><br><span class="line">      --privileged           Give extended privileges to the command</span><br><span class="line">  -t, --tty                  Allocate a pseudo-TTY</span><br><span class="line">  -u, --user string          Username or UID (format:</span><br><span class="line">                             &lt;name|uid&gt;[:&lt;group|gid&gt;])</span><br><span class="line">  -w, --workdir string       Working directory inside the container</span><br><span class="line">[root@localhost toor]#</span><br></pre></td></tr></table></figure>

<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost toor]<span class="comment"># docker exec -it a46fa8852e07 /bin/bash</span></span><br><span class="line">root@a46fa8852e07:/<span class="comment"># exit</span></span><br><span class="line">exit</span><br><span class="line">[root@localhost toor]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xhyan/p/6593075.html">https://www.cnblogs.com/xhyan/p/6593075.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/04/28/CentOS7%E6%B7%BB%E5%8A%A0-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/28/CentOS7%E6%B7%BB%E5%8A%A0-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84/" class="post-title-link" itemprop="url">CentOS7æ·»åŠ /åˆ é™¤ç”¨æˆ·å’Œç”¨æˆ·ç»„</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-04-28 11:43:40" itemprop="dateCreated datePublished" datetime="2018-04-28T11:43:40+00:00">2018-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CentOS7/" itemprop="url" rel="index"><span itemprop="name">CentOS7</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CentOS7æ·»åŠ -åˆ é™¤ç”¨æˆ·å’Œç”¨æˆ·ç»„"><a href="#CentOS7æ·»åŠ -åˆ é™¤ç”¨æˆ·å’Œç”¨æˆ·ç»„" class="headerlink" title="CentOS7æ·»åŠ /åˆ é™¤ç”¨æˆ·å’Œç”¨æˆ·ç»„"></a>CentOS7æ·»åŠ /åˆ é™¤ç”¨æˆ·å’Œç”¨æˆ·ç»„</h1><h2 id="æ–°å»ºç”¨æˆ·"><a href="#æ–°å»ºç”¨æˆ·" class="headerlink" title="æ–°å»ºç”¨æˆ·"></a>æ–°å»ºç”¨æˆ·</h2><p>æ³¨ï¼šrootä¸‹æ“ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adduser testuser #æ–°å»ºtestuser ç”¨æˆ·</span><br><span class="line">passwd testuser  #è®¾ç½®å¯†ç </span><br></pre></td></tr></table></figure>

<h2 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h2><p>æ–°åˆ›å»ºçš„ç”¨æˆ·å¹¶ä¸èƒ½ä½¿ç”¨sudoå‘½ä»¤ï¼Œéœ€è¦ç»™ä»–æ·»åŠ æˆæƒã€‚</p>
<p>sudoå‘½ä»¤çš„æˆæƒç®¡ç†æ˜¯åœ¨sudoersæ–‡ä»¶é‡Œçš„ã€‚å¯ä»¥çœ‹çœ‹sudoers</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Desktop]# sudoers</span><br><span class="line">bash: sudoers: æœªæ‰¾åˆ°å‘½ä»¤...</span><br><span class="line">[root@localhost Desktop]# whereis sudoers</span><br><span class="line">sudoers: &#x2F;etc&#x2F;sudoers &#x2F;etc&#x2F;sudoers.d &#x2F;usr&#x2F;libexec&#x2F;sudoers.so &#x2F;usr&#x2F;share&#x2F;man&#x2F;man5&#x2F;sudoers.5.gz</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ä½ç½®ä¹‹åå†æŸ¥çœ‹æƒé™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Desktop]# ls -l &#x2F;etc&#x2F;sudoers</span><br><span class="line">-r--r-----. 1 root root 4000 3æœˆ   6 2015 &#x2F;etc&#x2F;sudoers</span><br></pre></td></tr></table></figure>

<p>åªæœ‰åªè¯»çš„æƒé™ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹çš„è¯ï¼Œéœ€è¦å…ˆæ·»åŠ wæƒé™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Desktop]# chmod -v u+w &#x2F;etc&#x2F;sudoers</span><br><span class="line">mode of &quot;&#x2F;etc&#x2F;sudoers&quot; changed from 0440 (r--r-----) to 0640 (rw-r-----)</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥æ·»åŠ å†…å®¹äº†ï¼Œåœ¨ä¸‹é¢çš„ä¸€è¡Œä¸‹è¿½åŠ æ–°å¢çš„ç”¨æˆ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## Allow root to run any commands anywhere</span><br><span class="line">root    ALL&#x3D;(ALL)       ALL</span><br><span class="line">toor    ALL&#x3D;(ALL)       ALL #æ–°å¢çš„ç”¨æˆ·</span><br></pre></td></tr></table></figure>

<p>wqä¿å­˜é€€å‡ºï¼Œè¿™æ—¶å€™è¦è®°å¾—å°†å†™æƒé™æ”¶å›ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Desktop]# chmod -v u-w &#x2F;etc&#x2F;sudoers</span><br><span class="line">mode of &quot;&#x2F;etc&#x2F;sudoers&quot; changed from 0640 (rw-r-----) to 0440 (r--r-----)</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™ä½¿ç”¨æ–°ç”¨æˆ·ç™»å½•ï¼Œä½¿ç”¨sudo</p>
<h2 id="æ–°å»ºå·¥ä½œç»„"><a href="#æ–°å»ºå·¥ä½œç»„" class="headerlink" title="æ–°å»ºå·¥ä½œç»„"></a>æ–°å»ºå·¥ä½œç»„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd testgroup</span><br></pre></td></tr></table></figure>

<h2 id="æ–°å»ºç”¨æˆ·åŒæ—¶å¢åŠ å·¥ä½œç»„"><a href="#æ–°å»ºç”¨æˆ·åŒæ—¶å¢åŠ å·¥ä½œç»„" class="headerlink" title="æ–°å»ºç”¨æˆ·åŒæ—¶å¢åŠ å·¥ä½œç»„"></a>æ–°å»ºç”¨æˆ·åŒæ—¶å¢åŠ å·¥ä½œç»„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -g testgroup testuser</span><br></pre></td></tr></table></figure>

<p>æ³¨ï¼šï¼š-g æ‰€å±ç»„</p>
<h2 id="ç»™å·²æœ‰çš„ç”¨æˆ·å¢åŠ å·¥ä½œç»„"><a href="#ç»™å·²æœ‰çš„ç”¨æˆ·å¢åŠ å·¥ä½œç»„" class="headerlink" title="ç»™å·²æœ‰çš„ç”¨æˆ·å¢åŠ å·¥ä½œç»„"></a>ç»™å·²æœ‰çš„ç”¨æˆ·å¢åŠ å·¥ä½œç»„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -G groupname username</span><br></pre></td></tr></table></figure>

<h2 id="æ°¸ä¹…åˆ é™¤ç”¨æˆ·å¸å·"><a href="#æ°¸ä¹…åˆ é™¤ç”¨æˆ·å¸å·" class="headerlink" title="æ°¸ä¹…åˆ é™¤ç”¨æˆ·å¸å·"></a>æ°¸ä¹…åˆ é™¤ç”¨æˆ·å¸å·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userdel testuser</span><br><span class="line">groupdel testgroup</span><br><span class="line">usermod -G testgroup testuser #å¼ºåˆ¶åˆ é™¤è¯¥ç”¨æˆ·çš„ä¸»ç›®å½•å’Œä¸»ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•</span><br></pre></td></tr></table></figure>

<p>ç”¨æˆ·åˆ—è¡¨æ–‡ä»¶ï¼š<code>/etc/passwd</code><br>ç”¨æˆ·ç»„åˆ—è¡¨æ–‡ä»¶ï¼š<code>/etc/group</code></p>
<p>æŸ¥çœ‹ç³»ç»Ÿä¸­æœ‰å“ªäº›ç”¨æˆ·ï¼š<code>cut -d : -f 1 /etc/passwd</code><br>æŸ¥çœ‹å¯ä»¥ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·ï¼š<code>cat /etc/passwd | grep -v /sbin/nologin | cut -d : -f 1</code><br>æŸ¥çœ‹ç”¨æˆ·æ“ä½œï¼šwå‘½ä»¤(éœ€è¦rootæƒé™)<br>æŸ¥çœ‹æŸä¸€ç”¨æˆ·ï¼šw ç”¨æˆ·å<br>æŸ¥çœ‹ç™»å½•ç”¨æˆ·ï¼š<code>who</code><br>æŸ¥çœ‹ç”¨æˆ·ç™»å½•å†å²è®°å½•ï¼š<code>last</code></p>
<p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.linuxidc.com/Linux/2016-11/137549.htm">https://www.linuxidc.com/Linux/2016-11/137549.htm</a></p>
<p><a target="_blank" rel="noopener" href="http://www.jb51.net/article/123444.htm">http://www.jb51.net/article/123444.htm</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.51cto.com/risingair/1861641">http://blog.51cto.com/risingair/1861641</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/04/27/Docker-Dockerfile%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/27/Docker-Dockerfile%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">Docker Dockerfileè¯¦è§£</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-04-27 15:01:22" itemprop="dateCreated datePublished" datetime="2018-04-27T15:01:22+00:00">2018-04-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Docker-Dockerfileè¯¦è§£"><a href="#Docker-Dockerfileè¯¦è§£" class="headerlink" title="Docker Dockerfileè¯¦è§£"></a>Docker Dockerfileè¯¦è§£</h1><p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/#dockerfile-examples">å®˜ç½‘</a></p>
<h2 id="Dockerç®€ä»‹"><a href="#Dockerç®€ä»‹" class="headerlink" title="Dockerç®€ä»‹"></a>Dockerç®€ä»‹</h2><p>Dockeré¡¹ç›®æä¾›äº†æ„å»ºåœ¨Linuxå†…æ ¸åŠŸèƒ½ä¹‹ä¸Šï¼ŒååŒåœ¨ä¸€èµ·çš„çš„é«˜çº§å·¥å…·ã€‚å…¶ç›®æ ‡æ˜¯å¸®åŠ©å¼€å‘å’Œè¿ç»´äººå‘˜æ›´å®¹æ˜“åœ°è·¨ç³»ç»Ÿè·¨ä¸»æœºäº¤ä»˜åº”ç”¨ç¨‹åºå’Œä»–ä»¬çš„ä¾èµ–ã€‚Dockeré€šè¿‡Dockerå®¹å™¨ï¼Œä¸€ä¸ªå®‰å…¨çš„ï¼ŒåŸºäºè½»é‡çº§å®¹å™¨çš„ç¯å¢ƒï¼Œæ¥å®ç°è¿™ä¸ªç›®æ ‡ã€‚è¿™äº›å®¹å™¨ç”±é•œåƒåˆ›å»ºï¼Œè€Œé•œåƒå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ‰‹å·¥åˆ›å»ºæˆ– è€…é€šè¿‡Dockerfileè‡ªåŠ¨åˆ›å»ºã€‚</p>
<h2 id="Dockerfileç®€ä»‹"><a href="#Dockerfileç®€ä»‹" class="headerlink" title="Dockerfileç®€ä»‹"></a>Dockerfileç®€ä»‹</h2><p>Dockerfileæ˜¯ç”±ä¸€ç³»åˆ—å‘½ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬ï¼Œè¿™äº›å‘½ä»¤åº”ç”¨äºåŸºç¡€é•œåƒå¹¶æœ€ç»ˆåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒã€‚å®ƒä»¬ç®€åŒ–äº†ä»å¤´åˆ°å°¾çš„æµç¨‹å¹¶æå¤§çš„ç®€åŒ–äº†éƒ¨ç½²å·¥ä½œã€‚Dockerfileä»FROMå‘½ä»¤å¼€å§‹ï¼Œç´§æ¥ç€è·Ÿéšè€…å„ç§æ–¹æ³•ï¼Œå‘½ä»¤å’Œå‚æ•°ã€‚å…¶äº§å‡ºä¸ºä¸€ä¸ªæ–°çš„å¯ä»¥ç”¨äºåˆ›å»ºå®¹å™¨çš„é•œåƒã€‚</p>
<h2 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h2><p>ä¸€èˆ¬è€Œè¨€ï¼ŒDockerfile çš„å†…å®¹åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼šåŸºç¡€é•œåƒä¿¡æ¯ã€ç»´æŠ¤è€…ä¿¡æ¯ã€é•œåƒæ“ä½œæŒ‡ä»¤å’Œå®¹å™¨å¯åŠ¨æ—¶æ‰§è¡ŒæŒ‡ä»¤ã€‚</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This dockerfile uses the Ubuntu image</span></span><br><span class="line"><span class="comment"># VERSION 2</span></span><br><span class="line"><span class="comment"># Author: docker_user</span></span><br><span class="line"><span class="comment"># Command format: Instruction [arguments / command] â€¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬ä¸€è¡Œå¿…é¡»æŒ‡å®šåŸºäºçš„å®¹å™¨é•œåƒ</span></span><br><span class="line"><span class="attribute">FROM</span> ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»´æŠ¤è€…ä¿¡æ¯</span></span><br><span class="line">MAINTAINER docker_user docker_user<span class="variable">@email</span>.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># é•œåƒçš„æ“ä½œæŒ‡ä»¤</span></span><br><span class="line">RUN echo â€œdeb http://archive.ubuntu.com/ubuntu/ raring main universeâ€ &gt;&gt; /etc/apt/sources.list</span><br><span class="line">RUN apt-get update &amp;&amp; apt-get install -y nginx</span><br><span class="line">RUN echo â€œ\ndaemon off;â€ &gt;&gt; /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡ŒæŒ‡ä»¤</span></span><br><span class="line"><span class="attribute">CMD</span> /usr/sbin/nginx</span><br></pre></td></tr></table></figure>

<h2 id="Dockerfile-å‘½ä»¤"><a href="#Dockerfile-å‘½ä»¤" class="headerlink" title="Dockerfile å‘½ä»¤"></a>Dockerfile å‘½ä»¤</h2><h3 id="FROM"><a href="#FROM" class="headerlink" title="FROM"></a>FROM</h3><p>FROMå‘½ä»¤å¯èƒ½æ˜¯æœ€é‡è¦çš„Dockerfileå‘½ä»¤ã€‚è¯¥å‘½ä»¤å®šä¹‰äº†ä½¿ç”¨å“ªä¸ªåŸºç¡€é•œåƒå¯åŠ¨æ„å»ºæµç¨‹ã€‚åŸºç¡€é•œåƒå¯ä»¥ä¸ºä»»æ„é•œåƒã€‚å¦‚æœåŸºç¡€é•œåƒæ²¡æœ‰è¢«å‘ç°ï¼ŒDockerå°†è¯•å›¾ä»Docker image indexæ¥æŸ¥æ‰¾è¯¥é•œåƒã€‚FROMå‘½ä»¤å¿…é¡»æ˜¯Dockerfileçš„é¦–ä¸ªå‘½ä»¤ã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage: FROM [image name]</span></span><br><span class="line"><span class="keyword">FROM</span> ubuntu</span><br></pre></td></tr></table></figure>

<h3 id="MAINTAINER"><a href="#MAINTAINER" class="headerlink" title="MAINTAINER"></a>MAINTAINER</h3><p>å£°æ˜ä½œè€…;è¿™ä¸ªå‘½ä»¤æ”¾åœ¨Dockerfileçš„èµ·å§‹éƒ¨åˆ†ï¼Œè™½ç„¶ç†è®ºä¸Šå®ƒå¯ä»¥æ”¾ç½®äºDockerfileçš„ä»»æ„ä½ç½®ã€‚è¿™ä¸ªå‘½ä»¤ç”¨äºå£°æ˜ä½œè€…ï¼Œå¹¶åº”è¯¥æ”¾åœ¨FROMçš„åé¢ã€‚</p>
<p>æ³¨æ„ï¼šMAINTAINER æŒ‡ä»¤å·²ç»è¢«æŠ›å¼ƒï¼Œå»ºè®®ä½¿ç”¨ LABEL æŒ‡ä»¤ã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage: MAINTAINER [name]</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> authors_name</span><br></pre></td></tr></table></figure>

<h3 id="LABEL"><a href="#LABEL" class="headerlink" title="LABEL"></a>LABEL</h3><p>æ ¼å¼ä¸º:</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LABEL</span><span class="bash"> &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...</span></span><br></pre></td></tr></table></figure>

<p>LABEL æŒ‡ä»¤ä¸ºé•œåƒæ·»åŠ æ ‡ç­¾ã€‚ä¸€ä¸ª LABEL å°±æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­:</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LABEL</span><span class="bash"> <span class="string">&quot;com.example.vendor&quot;</span>=<span class="string">&quot;ACME Incorporated&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> com.example.label-with-value=<span class="string">&quot;foo&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> version=<span class="string">&quot;1.0&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> description=<span class="string">&quot;This text illustrates \that label-values can span multiple lines.&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥ç»™é•œåƒæ·»åŠ å¤šä¸ª LABELï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯æ¡ LABEL æŒ‡ä»¤éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å±‚ã€‚æ‰€ä»¥æœ€å¥½æ˜¯æŠŠæ·»åŠ çš„å¤šä¸ª LABEL åˆå¹¶ä¸ºä¸€æ¡å‘½ä»¤ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LABEL</span><span class="bash"> multi.label1=<span class="string">&quot;value1&quot;</span> multi.label2=<span class="string">&quot;value2&quot;</span> other=<span class="string">&quot;value3&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥å†™æˆè¿™æ ·ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LABEL</span><span class="bash"> multi.label1=<span class="string">&quot;value1&quot;</span> \</span></span><br><span class="line"><span class="bash">      multi.label2=<span class="string">&quot;value2&quot;</span> \</span></span><br><span class="line"><span class="bash">      other=<span class="string">&quot;value3&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ–°æ·»åŠ çš„ LABEL å’Œå·²æœ‰çš„ LABEL åŒåï¼Œåˆ™æ–°å€¼ä¼šè¦†ç›–æ‰æ—§å€¼ã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ docker inspect å‘½ä»¤æŸ¥çœ‹é•œåƒçš„ LABEL ä¿¡æ¯ã€‚</p>
<h3 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h3><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æœ‰ä¸¤ç§æ ¼å¼ï¼Œåˆ†åˆ«ä¸ºï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> &lt;<span class="built_in">command</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [â€œexecutableâ€, â€œparam1â€, â€œparam2â€]ã€‚</span></span><br></pre></td></tr></table></figure>

<p>RUNå‘½ä»¤æ˜¯Dockerfileæ‰§è¡Œå‘½ä»¤çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å®ƒæ¥å—å‘½ä»¤ä½œä¸ºå‚æ•°å¹¶ç”¨äºåˆ›å»ºé•œåƒã€‚ä¸åƒCMDå‘½ä»¤ï¼ŒRUNå‘½ä»¤ç”¨äºåˆ›å»ºé•œåƒï¼ˆåœ¨ä¹‹å‰commitçš„å±‚ä¹‹ä¸Šå½¢æˆæ–°çš„å±‚ï¼‰ã€‚<br>å‰è€…å°†åœ¨ shell ç»ˆç«¯ä¸­è¿è¡Œå‘½ä»¤ï¼Œå³ /bin/sh -cï¼Œåè€…åˆ™ä½¿ç”¨ exec æ‰§è¡Œã€‚æŒ‡å®šä½¿ç”¨å…¶ä»–ç»ˆç«¯å¯ä»¥é€šè¿‡ç¬¬äºŒç§æ–¹å¼å®ç°ï¼Œä¾‹å¦‚ RUN  [â€œ/bin/bashâ€, â€œ-câ€, â€œecho helloâ€]ã€‚<br>æ¯æ¡ RUN æŒ‡ä»¤å°†åœ¨å½“å‰é•œåƒçš„åŸºç¡€ä¸Šæ‰§è¡ŒæŒ‡å®šå‘½ä»¤ï¼Œå¹¶æäº¤ä¸ºæ–°çš„é•œåƒã€‚å½“å‘½ä»¤è¾ƒé•¿æ—¶å¯ä»¥ä½¿ç”¨ \ æ¥æ¢è¡Œã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage: RUN [command]</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> aptitude install -y riak</span></span><br></pre></td></tr></table></figure>

<h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3><p>æ”¯æŒä¸‰ç§æ ¼å¼ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="bash"> [â€œexecutableâ€, â€œparam1â€, â€œparam2â€] ä½¿ç”¨ <span class="built_in">exec</span> æ‰§è¡Œï¼Œæ¨èæ–¹å¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">command</span> param1 param2 åœ¨ /bin/sh ä¸­æ‰§è¡Œï¼Œæä¾›ç»™éœ€è¦äº¤äº’çš„åº”ç”¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [â€œparam1â€, â€œparam2â€] æä¾›ç»™ ENTRYPOINT çš„é»˜è®¤å‚æ•°ã€‚</span></span><br></pre></td></tr></table></figure>

<p>æŒ‡å®šå¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ¯ä¸ª Dockerfile åªèƒ½æœ‰ä¸€æ¡ CMD å‘½ä»¤ã€‚å¦‚æœæŒ‡å®šäº†å¤šæ¡ CMD å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€æ¡ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœç”¨æˆ·åœ¨å¯åŠ¨å®¹å™¨æ—¶æŒ‡å®šäº†è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåˆ™ä¼šè¦†ç›–æ‰ CMD æŒ‡å®šçš„å‘½ä»¤ã€‚</p>
<p>å’ŒRUNå‘½ä»¤ç›¸ä¼¼ï¼ŒCMDå¯ä»¥ç”¨äºæ‰§è¡Œç‰¹å®šçš„å‘½ä»¤ã€‚å’ŒRUNä¸åŒçš„æ˜¯ï¼Œè¿™äº›å‘½ä»¤ä¸æ˜¯åœ¨é•œåƒæ„å»ºçš„è¿‡ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œè€Œæ˜¯åœ¨ç”¨é•œåƒæ„å»ºå®¹å™¨åè¢«è°ƒç”¨ã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage 1: CMD application &quot;argument&quot;, &quot;argument&quot;, ..</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="string">&quot;echo&quot;</span> <span class="string">&quot;Hello docker!&quot;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="EXPOSE"><a href="#EXPOSE" class="headerlink" title="EXPOSE"></a>EXPOSE</h3><p>æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPOSE</span> &lt;port&gt; [&lt;port&gt;â€¦]</span><br></pre></td></tr></table></figure>

<p>å‘Šè¯‰ Docker æœåŠ¡ï¼Œå®¹å™¨éœ€è¦æš´éœ²çš„ç«¯å£å·ï¼Œä¾›äº’è”ç³»ç»Ÿä½¿ç”¨ã€‚åœ¨å¯åŠ¨å®¹å™¨æ—¶éœ€è¦é€šè¿‡ -P å‚æ•°è®© Docker ä¸»æœºåˆ†é…ä¸€ä¸ªç«¯å£è½¬å‘åˆ°æŒ‡å®šçš„ç«¯å£ã€‚ä½¿ç”¨ -p å‚æ•°åˆ™å¯ä»¥å…·ä½“æŒ‡å®šä¸»æœºä¸Šå“ªä¸ªç«¯å£æ˜ å°„è¿‡æ¥ã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage: EXPOSE [port]</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure>

<h3 id="ENV"><a href="#ENV" class="headerlink" title="ENV"></a>ENV</h3><p>ENVå‘½ä»¤ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡ã€‚è¿™äº›å˜é‡ä»¥â€key=valueâ€çš„å½¢å¼å­˜åœ¨ï¼Œå¹¶å¯ä»¥åœ¨å®¹å™¨å†…è¢«è„šæœ¬æˆ–è€…ç¨‹åºè°ƒç”¨ã€‚è¿™ä¸ªæœºåˆ¶ç»™åœ¨å®¹å™¨ä¸­è¿è¡Œåº”ç”¨å¸¦æ¥äº†æå¤§çš„ä¾¿åˆ©ã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage: ENV key value</span></span><br><span class="line"><span class="keyword">ENV</span> SERVER_WORKS <span class="number">4</span></span><br></pre></td></tr></table></figure>

<h3 id="ADD"><a href="#ADD" class="headerlink" title="ADD"></a>ADD</h3><p>æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ADD</span><span class="bash"> &lt;src&gt; &lt;dest&gt;</span></span><br></pre></td></tr></table></figure>

<p>ADDå‘½ä»¤æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œæºå’Œç›®æ ‡ã€‚å®ƒçš„åŸºæœ¬ä½œç”¨æ˜¯ä»æºç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿä¸Šå¤åˆ¶æ–‡ä»¶åˆ°ç›®æ ‡å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿã€‚å¦‚æœæºæ˜¯ä¸€ä¸ªURLï¼Œé‚£è¯¥URLçš„å†…å®¹å°†è¢«ä¸‹è½½å¹¶å¤åˆ¶åˆ°å®¹å™¨ä¸­ã€‚å…¶ä¸­ <code>&lt;src&gt;</code> å¯ä»¥æ˜¯ Dockerfile æ‰€åœ¨ç›®å½•çš„ä¸€ä¸ªç›¸å¯¹è·¯å¾„(æ–‡ä»¶æˆ–ç›®å½•)ï¼›ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª URLï¼›è¿˜å¯ä»¥æ˜¯ä¸€ä¸ª tar æ–‡ä»¶(è‡ªåŠ¨è§£å‹ä¸ºç›®å½•)ã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage: ADD [source directory or URL] [destination directory]</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> /my_app_folder /my_app_folder</span></span><br></pre></td></tr></table></figure>

<h3 id="COPY"><a href="#COPY" class="headerlink" title="COPY"></a>COPY</h3><p>æ ¼å¼ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> &lt;src&gt; &lt;dest&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¤åˆ¶æœ¬åœ°ä¸»æœºçš„ <code>&lt;src&gt;</code> (ä¸º Dockerfile æ‰€åœ¨ç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œæ–‡ä»¶æˆ–ç›®å½•) ä¸ºå®¹å™¨ä¸­çš„ <code>&lt;dest&gt;</code>ã€‚ç›®æ ‡è·¯å¾„ä¸å­˜åœ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºã€‚å½“ä½¿ç”¨æœ¬åœ°ç›®å½•ä¸ºæºç›®å½•æ—¶ï¼Œæ¨èä½¿ç”¨ COPYã€‚</p>
<h3 id="ENTRYPOINT"><a href="#ENTRYPOINT" class="headerlink" title="ENTRYPOINT"></a>ENTRYPOINT</h3><p>æœ‰ä¸¤ç§æ ¼å¼ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [â€œexecutableâ€, â€œparam1â€, â€œparam2â€]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> <span class="built_in">command</span> param1 param2 (shell ä¸­æ‰§è¡Œ)</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œå¹¶ä¸”ä¸å¯è¢« docker run æä¾›çš„å‚æ•°è¦†ç›–ã€‚</p>
<p>æ¯ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ª ENTRYPOINTï¼Œå½“æŒ‡å®šå¤šä¸ªæ—¶ï¼Œåªæœ‰æœ€åä¸€ä¸ªèµ·æ•ˆã€‚</p>
<p>ENTRYPOINT å¸®åŠ©ä½ é…ç½®ä¸€ä¸ªå®¹å™¨ä½¿ä¹‹å¯æ‰§è¡ŒåŒ–ï¼Œå¦‚æœä½ ç»“åˆCMDå‘½ä»¤å’ŒENTRYPOINTå‘½ä»¤ï¼Œä½ å¯ä»¥ä»CMDå‘½ä»¤ä¸­ç§»é™¤â€œapplicationâ€è€Œä»…ä»…ä¿ç•™å‚æ•°ï¼Œå‚æ•°å°†ä¼ é€’ç»™ENTRYPOINTå‘½ä»¤ã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage: ENTRYPOINT application &quot;argument&quot;, &quot;argument&quot;, ..</span></span><br><span class="line"><span class="comment"># Remember: arguments are optional. They can be provided by CMD</span></span><br><span class="line"><span class="comment"># or during the creation of a container.</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> <span class="built_in">echo</span></span></span><br><span class="line"><span class="comment"># Usage example with CMD:</span></span><br><span class="line"><span class="comment"># Arguments set with CMD can be overridden during *run*</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="string">&quot;Hello docker!&quot;</span></span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> <span class="built_in">echo</span></span></span><br></pre></td></tr></table></figure>

<h3 id="VOLUME"><a href="#VOLUME" class="headerlink" title="VOLUME"></a>VOLUME</h3><p>æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">&quot;/data&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ VOLUME æŒ‡ä»¤æ·»åŠ å¤šä¸ªæ•°æ®å·ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">&quot;/data1&quot;</span>, <span class="string">&quot;/data2&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºä¸€ä¸ªå¯ä»¥ä»æœ¬åœ°æˆ–å…¶ä»–å®¹å™¨æŒ‚è½½çš„æŒ‚è½½ç‚¹ï¼Œä¸€èˆ¬ç”¨æ¥å­˜æ”¾æ•°æ®åº“å’Œéœ€è¦ä¿æŒçš„æ•°æ®ç­‰ã€‚<br>VOLUMEå‘½ä»¤ç”¨äºè®©ä½ çš„å®¹å™¨è®¿é—®å®¿ä¸»æœºä¸Šçš„ç›®å½•ã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage: VOLUME [&quot;/dir_1&quot;, &quot;/dir_2&quot; ..]</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">&quot;/my_files&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h3 id="USER"><a href="#USER" class="headerlink" title="USER"></a>USER</h3><p>æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶çš„ç”¨æˆ·åæˆ– UIDï¼Œåç»­çš„ RUN ä¹Ÿä¼šä½¿ç”¨æŒ‡å®šç”¨æˆ·ã€‚å½“æœåŠ¡ä¸éœ€è¦ç®¡ç†å‘˜æƒé™æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥å‘½ä»¤æŒ‡å®šè¿è¡Œç”¨æˆ·ã€‚å¹¶ä¸”å¯ä»¥åœ¨ä¹‹å‰åˆ›å»ºæ‰€éœ€è¦çš„ç”¨æˆ·ï¼Œä¾‹å¦‚ï¼šRUN groupadd -r postgres &amp;&amp; useradd -r -g postgres postgresã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage: USER [UID]</span></span><br><span class="line"><span class="keyword">USER</span> <span class="number">751</span></span><br></pre></td></tr></table></figure>

<h3 id="WORKDIR"><a href="#WORKDIR" class="headerlink" title="WORKDIR"></a>WORKDIR</h3><p>æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /path/to/workdir</span></span><br></pre></td></tr></table></figure>

<p>ä¸ºåç»­çš„ RUNã€CMDã€ENTRYPOINT æŒ‡ä»¤é…ç½®å·¥ä½œç›®å½•ã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ª WORKDIR æŒ‡ä»¤ï¼Œåç»­å‘½ä»¤å¦‚æœå‚æ•°æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™ä¼šåŸºäºä¹‹å‰å‘½ä»¤æŒ‡å®šçš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage: WORKDIR /path</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> ~/</span></span><br></pre></td></tr></table></figure>

<h3 id="ONBUILD"><a href="#ONBUILD" class="headerlink" title="ONBUILD"></a>ONBUILD</h3><p>æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ONBUILD</span> [INSTRUCTION]</span><br></pre></td></tr></table></figure>

<p>é…ç½®å½“æ‰€åˆ›å»ºçš„é•œåƒä½œä¸ºå…¶ä»–æ–°åˆ›å»ºé•œåƒçš„åŸºç¡€é•œåƒæ—¶ï¼Œæ‰€æ‰§è¡Œçš„æ“ä½œæŒ‡ä»¤ã€‚ä¾‹å¦‚ï¼ŒDockerfile ä½¿ç”¨å¦‚ä¸‹çš„å†…å®¹åˆ›å»ºäº†é•œåƒ image-Aã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ONBUILD</span> <span class="keyword">ADD</span><span class="bash"> . /app/src</span></span><br><span class="line"><span class="keyword">ONBUILD</span> <span class="keyword">RUN</span><span class="bash"> /usr/<span class="built_in">local</span>/bin/python-build â€“dir /app/src</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœåŸºäº image-A åˆ›å»ºæ–°çš„é•œåƒæ—¶ï¼Œæ–°çš„ Dockerfile ä¸­ä½¿ç”¨ FROM image-A æŒ‡å®šåŸºç¡€é•œåƒæ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ ONBUILD æŒ‡ä»¤å†…å®¹ï¼Œç­‰ä»·äºåœ¨åé¢æ·»åŠ äº†ä¸¤æ¡æŒ‡ä»¤ã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> image-A</span><br><span class="line"><span class="comment">#automatically run the following</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> . /app/src</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> /usr/<span class="built_in">local</span>/bin/python-build â€“dir /app/src</span></span><br></pre></td></tr></table></figure>

<h3 id="å¦‚ä½•ä½¿ç”¨Dockerfiles"><a href="#å¦‚ä½•ä½¿ç”¨Dockerfiles" class="headerlink" title="å¦‚ä½•ä½¿ç”¨Dockerfiles"></a>å¦‚ä½•ä½¿ç”¨Dockerfiles</h3><p>ç¼–å†™å®Œæˆ Dockerfile ä¹‹åï¼Œå¯ä»¥é€šè¿‡ docker build å‘½ä»¤æ¥åˆ›å»ºé•œåƒã€‚</p>
<p>ä½¿ç”¨Dockerfileså’Œæ‰‹å·¥ä½¿ç”¨Docker Daemonè¿è¡Œå‘½ä»¤ä¸€æ ·ç®€å•ã€‚è„šæœ¬è¿è¡Œåè¾“å‡ºä¸ºæ–°çš„é•œåƒIDã€‚</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Build an image using the Dockerfile at current location</span></span><br><span class="line"><span class="comment"># Example: sudo docker build -t [name] .</span></span><br><span class="line">sudo docker build -t my_mongodb .</span><br></pre></td></tr></table></figure>

<p>åŸºæœ¬çš„æ ¼å¼ä¸º docker build [é€‰é¡¹] è·¯å¾„ï¼Œè¯¥å‘½ä»¤å°†è¯»å–æŒ‡å®šè·¯å¾„ä¸‹(åŒ…æ‹¬å­ç›®å½•)çš„ Dockerfile ï¼Œå¹¶å°†è¯¥è·¯å¾„ä¸‹æ‰€æœ‰å†…å®¹å‘é€ç»™ docker æœåŠ¡ç«¯ï¼Œç”±æœåŠ¡ç«¯æ¥åˆ›å»ºé•œåƒã€‚å› æ­¤ä¸€èˆ¬å»ºè®®æ”¾ç½® Dockerfile çš„ç›®å½•ä¸ºç©ºç›®å½•ã€‚</p>
<p>å¦å¤–ï¼Œå¯ä»¥é€šè¿‡ .dockerignore æ–‡ä»¶æ¥è®© docker å¿½ç•¥è·¯å¾„ä¸‹çš„ç›®å½•å’Œæ–‡ä»¶ã€‚ è¦æŒ‡å®šé•œåƒçš„æ ‡ç­¾ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ -t é€‰é¡¹æ¥å®ç°ã€‚<br>ä¾‹å¦‚ï¼ŒæŒ‡å®š Dockerfile æ‰€åœ¨è·¯å¾„ä¸º /tmp/docker_builder/ï¼Œå¹¶ä¸”å¸Œæœ›ç”Ÿæˆé•œåƒæ ‡ç­¾ä¸º build_repo/first_imageï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker build -t build_repo/first_image /tmp/docker_builder/</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/sparkdev/p/6357614.html">http://www.cnblogs.com/sparkdev/p/6357614.html</a></p>
<p><a target="_blank" rel="noopener" href="https://yeasy.gitbooks.io/docker_practice/content/introduction/what.html">https://yeasy.gitbooks.io/docker_practice/content/introduction/what.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/boshen-hzb/p/6400272.html" title="å‚è€ƒ">https://www.cnblogs.com/boshen-hzb/p/6400272.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/04/27/Docker%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/27/Docker%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">Dockerå®‰è£…</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-04-27 14:40:52" itemprop="dateCreated datePublished" datetime="2018-04-27T14:40:52+00:00">2018-04-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Dockerå®‰è£…"><a href="#Dockerå®‰è£…" class="headerlink" title="Dockerå®‰è£…"></a>Dockerå®‰è£…</h1><p><a target="_blank" rel="noopener" href="https://docs.docker.com/install/linux/docker-ce/centos/#uninstall-old-versions" title="å®˜ç½‘">å®˜ç½‘</a></p>
<h2 id="å®‰è£…Docker-CE"><a href="#å®‰è£…Docker-CE" class="headerlink" title="å®‰è£…Docker CE"></a>å®‰è£…Docker CE</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install -y yum-utils \</span><br><span class="line">  device-mapper-persistent-data \</span><br><span class="line">  lvm2</span><br><span class="line"></span><br><span class="line">$ sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo</span><br><span class="line"></span><br><span class="line">$ sudo yum install docker-ce</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure>

<p>éªŒè¯æ˜¯å¦æˆåŠŸ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®é•œåƒåŠ é€Ÿ"><a href="#é…ç½®é•œåƒåŠ é€Ÿ" class="headerlink" title="é…ç½®é•œåƒåŠ é€Ÿ"></a>é…ç½®é•œåƒåŠ é€Ÿ</h2><h3 id="å®‰è£…ï¼å‡çº§ä½ çš„Dockerå®¢æˆ·ç«¯"><a href="#å®‰è£…ï¼å‡çº§ä½ çš„Dockerå®¢æˆ·ç«¯" class="headerlink" title="å®‰è£…ï¼å‡çº§ä½ çš„Dockerå®¢æˆ·ç«¯"></a>å®‰è£…ï¼å‡çº§ä½ çš„Dockerå®¢æˆ·ç«¯</h3><p>æ¨èå®‰è£…1.10.0ä»¥ä¸Šç‰ˆæœ¬çš„Dockerå®¢æˆ·ç«¯</p>
<h3 id="å¦‚ä½•é…ç½®é•œåƒåŠ é€Ÿå™¨"><a href="#å¦‚ä½•é…ç½®é•œåƒåŠ é€Ÿå™¨" class="headerlink" title="å¦‚ä½•é…ç½®é•œåƒåŠ é€Ÿå™¨"></a>å¦‚ä½•é…ç½®é•œåƒåŠ é€Ÿå™¨</h3><p>é’ˆå¯¹Dockerå®¢æˆ·ç«¯ç‰ˆæœ¬å¤§äº1.10.0çš„ç”¨æˆ·</p>
<p>æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶<code>/etc/docker/daemon.json</code>æ¥ä½¿ç”¨åŠ é€Ÿå™¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p &#x2F;etc&#x2F;docker</span><br><span class="line">sudo tee &#x2F;etc&#x2F;docker&#x2F;daemon.json &lt;&lt;-&#39;EOF&#39;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;lhao27k5.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ä½¿ç”¨<code>ttps://registry.docker-cn.com</code></p>
<h2 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h2><h3 id="1-å¸è½½DockeråŒ…"><a href="#1-å¸è½½DockeråŒ…" class="headerlink" title="1.å¸è½½DockeråŒ…"></a>1.å¸è½½DockeråŒ…</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker-ce</span><br></pre></td></tr></table></figure>

<h3 id="2-ä¸»æœºä¸Šçš„mages-containers-volumesæˆ–è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚-åˆ é™¤æ‰€æœ‰mages-containers-volumesï¼š"><a href="#2-ä¸»æœºä¸Šçš„mages-containers-volumesæˆ–è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚-åˆ é™¤æ‰€æœ‰mages-containers-volumesï¼š" class="headerlink" title="2.ä¸»æœºä¸Šçš„mages, containers, volumesæˆ–è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚ åˆ é™¤æ‰€æœ‰mages, containers, volumesï¼š"></a>2.ä¸»æœºä¸Šçš„mages, containers, volumesæˆ–è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚ åˆ é™¤æ‰€æœ‰mages, containers, volumesï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf &#x2F;var&#x2F;lib&#x2F;docker</span><br></pre></td></tr></table></figure>

<p>æ‚¨å¿…é¡»æ‰‹åŠ¨åˆ é™¤ä»»ä½•å®šä¹‰é…ç½®æ–‡ä»¶ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/04/25/Nginx%E4%B8%8A%E4%BD%BF%E7%94%A8Let%E2%80%99s%20Encrypt%E5%8A%A0%E5%AF%86(HTTPS)&%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/25/Nginx%E4%B8%8A%E4%BD%BF%E7%94%A8Let%E2%80%99s%20Encrypt%E5%8A%A0%E5%AF%86(HTTPS)&%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F/" class="post-title-link" itemprop="url">Nginxä¸Šä½¿ç”¨Letâ€™s EncryptåŠ å¯†(HTTPS)&è‡ªåŠ¨ç»­æœŸ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-04-25 15:36:54" itemprop="dateCreated datePublished" datetime="2018-04-25T15:36:54+00:00">2018-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Let%E2%80%99s-Encrypt/" itemprop="url" rel="index"><span itemprop="name">Letâ€™s Encrypt</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Nginxä¸Šä½¿ç”¨Letâ€™s-EncryptåŠ å¯†-HTTPS-amp-è‡ªåŠ¨ç»­æœŸ"><a href="#Nginxä¸Šä½¿ç”¨Letâ€™s-EncryptåŠ å¯†-HTTPS-amp-è‡ªåŠ¨ç»­æœŸ" class="headerlink" title="Nginxä¸Šä½¿ç”¨Letâ€™s EncryptåŠ å¯†(HTTPS)&amp;è‡ªåŠ¨ç»­æœŸ"></a>Nginxä¸Šä½¿ç”¨Letâ€™s EncryptåŠ å¯†(HTTPS)&amp;è‡ªåŠ¨ç»­æœŸ</h1><p><a target="_blank" rel="noopener" href="https://letsencrypt.org/" title="å®˜ç½‘">å®˜ç½‘</a></p>
<h2 id="è·å–è¯ä¹¦ç”Ÿæˆå·¥å…·-certbot"><a href="#è·å–è¯ä¹¦ç”Ÿæˆå·¥å…·-certbot" class="headerlink" title="è·å–è¯ä¹¦ç”Ÿæˆå·¥å…· certbot"></a>è·å–è¯ä¹¦ç”Ÿæˆå·¥å…· certbot</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;dl.eff.org&#x2F;certbot-auto</span><br><span class="line">chmod a+x certbot-auto</span><br></pre></td></tr></table></figure>

<h2 id="è·å–è¯ä¹¦"><a href="#è·å–è¯ä¹¦" class="headerlink" title="è·å–è¯ä¹¦"></a>è·å–è¯ä¹¦</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;certbot-auto certonly -d *.åŸŸå --manual --preferred-challenges dns --server https:&#x2F;&#x2F;acme-v02.api.letsencrypt.org&#x2F;directory</span><br></pre></td></tr></table></figure>

<p>æŒ‰ç…§æç¤ºä¾æ¬¡å¡«å†™é‚®ç®±åœ°å€ï¼ŒåŒæ„æœåŠ¡æ¡æ¬¾ï¼Œç»‘å®šIPå°±è¡Œäº†ã€‚</p>
<p>é¢è¿™ä¸€æ­¥å¾ˆå…³é”®ï¼Œéœ€è¦ä½ é…ç½®ä½ çš„åŸŸåTXTè®°å½•ï¼Œä»¥æ ¡éªŒåŸŸåæ‰€æœ‰æƒï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­è¯ä¹¦ç”³è¯·è€…æ˜¯ä¸æ˜¯è¯¥åŸŸåçš„æ‹¥æœ‰è€…ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Please deploy a DNS TXT record under the name</span><br><span class="line">_acme-challenge.shiyx.top with the following value:</span><br><span class="line"></span><br><span class="line">l1VX8xfEnhrJ02QB4o-M6ntb9JEsItRISb1YjOEw3KY</span><br><span class="line"></span><br><span class="line">Before continuing, verify the record is deployed.</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Press Enter to Continue</span><br></pre></td></tr></table></figure>

<p>åœ¨æ·»åŠ txtè®°å½•åˆ°ä½ çš„åŸŸåä¹‹å‰ï¼Œåˆ‡å‹¿ç‚¹å‡»å›è½¦é”®ã€‚</p>
<p>ç™»é™†åŸŸåè§£ææ§åˆ¶å°ï¼ˆé˜¿é‡Œäº‘ï¼‰ï¼Œæ·»åŠ ä¸€æ¡TXTè®°å½•ï¼š</p>
<p><img src="/img/aliyun%E8%A7%A3%E6%9E%90.png" alt="æ·»åŠ è§£æè®°å½•"></p>
<p>æ‰§è¡Œå‘½ä»¤ï¼š<code>dig -t txt _acme-challenge.shiyx.top</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ip-172-31-16-20:~$ dig -t txt _acme-challenge.shiyx.top</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.10.3-P4-Ubuntu &lt;&lt;&gt;&gt; -t txt _acme-challenge.shiyx.top</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 54437</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 4096</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;_acme-challenge.shiyx.top.     IN      TXT</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">_acme-challenge.shiyx.top. 60   IN      TXT     &quot;l1VX8xfSnwrJ02QB4o-M6ntb9JEsItRISb1YjOEw3YY&quot;</span><br><span class="line"></span><br><span class="line">;; Query time: 2001 msec</span><br><span class="line">;; SERVER: 172.31.0.2#53(172.31.0.2)</span><br><span class="line">;; WHEN: Thu Apr 26 00:50:34 UTC 2018</span><br><span class="line">;; MSG SIZE  rcvd: 110</span><br></pre></td></tr></table></figure>

<p>ç¡®è®¤ç”Ÿæ•ˆåï¼ŒæŒ‰å›è½¦é”®ç»§ç»­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">IMPORTANT NOTES:</span><br><span class="line"> - Congratulations! Your certificate and chain have been saved at:</span><br><span class="line">   &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;shiyx.top&#x2F;fullchain.pem</span><br><span class="line">   Your key file has been saved at:</span><br><span class="line">   &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;shiyx.top&#x2F;privkey.pem</span><br><span class="line">   Your cert will expire on 2018-07-24. To obtain a new or tweaked</span><br><span class="line">   version of this certificate in the future, simply run certbot-auto</span><br><span class="line">   again. To non-interactively renew *all* of your certificates, run</span><br><span class="line">   &quot;certbot-auto renew&quot;</span><br><span class="line"> - If you like Certbot, please consider supporting our work by:</span><br><span class="line"></span><br><span class="line">   Donating to ISRG &#x2F; Let&#39;s Encrypt:   https:&#x2F;&#x2F;letsencrypt.org&#x2F;donate</span><br><span class="line">   Donating to EFF:                    https:&#x2F;&#x2F;eff.org&#x2F;donate-le</span><br></pre></td></tr></table></figure>

<p>è¯ä¹¦ç”³è¯·å®Œæ¯•ï¼è¯ä¹¦å’Œå¯†é’¥ä¿å­˜åœ¨â€œ/etc/letsencrypt/archive/â€ç›®å½•ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ip-172-31-16-20:~$ sudo tree &#x2F;etc&#x2F;letsencrypt&#x2F;archive</span><br><span class="line">&#x2F;etc&#x2F;letsencrypt&#x2F;archive</span><br><span class="line">â””â”€â”€ shiyx.top</span><br><span class="line">    â”œâ”€â”€ cert1.pem</span><br><span class="line">    â”œâ”€â”€ chain1.pem</span><br><span class="line">    â”œâ”€â”€ fullchain1.pem</span><br><span class="line">    â””â”€â”€ privkey1.pem</span><br><span class="line"></span><br><span class="line">1 directory, 4 files</span><br></pre></td></tr></table></figure>

<h2 id="ç»­æœŸHTTPSè¯ä¹¦"><a href="#ç»­æœŸHTTPSè¯ä¹¦" class="headerlink" title="ç»­æœŸHTTPSè¯ä¹¦"></a>ç»­æœŸHTTPSè¯ä¹¦</h2><p>å®˜ç½‘ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://certbot.eff.org/docs/using.html?highlight=renew#renewing-certificates," title="å‚è€ƒå®˜ç½‘">https://certbot.eff.org/docs/using.html?highlight=renew#renewing-certificates</a></p>
<h3 id="ç»­æœŸHTTPSè¯ä¹¦å‘½ä»¤"><a href="#ç»­æœŸHTTPSè¯ä¹¦å‘½ä»¤" class="headerlink" title="ç»­æœŸHTTPSè¯ä¹¦å‘½ä»¤"></a>ç»­æœŸHTTPSè¯ä¹¦å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot renew</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªåŠ¨ç»­ç­¾HTTPSè¯ä¹¦"><a href="#è‡ªåŠ¨ç»­ç­¾HTTPSè¯ä¹¦" class="headerlink" title="è‡ªåŠ¨ç»­ç­¾HTTPSè¯ä¹¦"></a>è‡ªåŠ¨ç»­ç­¾HTTPSè¯ä¹¦</h3><p>Letâ€™s Encrypt è¯ä¹¦çš„æœ‰æ•ˆæœŸåªæœ‰ 90 å¤©ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å®šæœŸçš„å¯¹ä»–è¿›è¡Œç»­ç­¾ï¼Œæˆ‘ä»¬ä½¿ç”¨linuxè‡ªå¸¦çš„cronæ¥è®¾å®šè®¡åˆ’ä»»åŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼Œå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œ crontab å‘½ä»¤ï¼Œå®ƒä¼šé—®é¢˜ä½¿ç”¨å“ªä¸€ä¸ªç¼–è¾‘å™¨ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œé€‰æ‹©ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ vim-basic</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo crontab -e</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30 2 * * 1 sudo certbot renew</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„æ‰§è¡Œæ—¶é—´ä¸ºï¼šæ¯å‘¨ä¸€åŠå¤œ2ç‚¹30åˆ†æ‰§è¡Œrenewä»»åŠ¡ã€‚</p>
<p>ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ<code>sudo renew</code>çœ‹çœ‹æ˜¯å¦æ‰§è¡Œæ­£å¸¸ã€‚</p>
<h2 id="Nginxé…ç½®"><a href="#Nginxé…ç½®" class="headerlink" title="Nginxé…ç½®"></a>Nginxé…ç½®</h2><p>å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/," title="å‚è€ƒå®˜ç½‘">http://nginx.org/en/docs/</a></p>
<p>æ³¨ï¼šawséœ€è¦å®šä¹‰å®‰å…¨ç»„ï¼Œå…è®¸httpså…¥ç«™è§„åˆ™</p>
<h3 id="Webrooté…ç½®æ¨¡å¼"><a href="#Webrooté…ç½®æ¨¡å¼" class="headerlink" title="Webrooté…ç½®æ¨¡å¼"></a>Webrooté…ç½®æ¨¡å¼</h3><p>Webroot çš„å·¥ä½œæ’ä»¶æ”¾ç½®åœ¨ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶/.well-knownç›®å½•æ–‡æ¡£æ ¹ç›®å½•ä¸‹ï¼Œå®ƒå¯ä»¥æ‰“å¼€ï¼ˆé€šè¿‡WebæœåŠ¡å™¨ï¼‰å†…ç”±è®©æˆ‘ä»¬çš„åŠ å¯†æœåŠ¡è¿›è¡ŒéªŒè¯ã€‚ æ ¹æ®é…ç½®çš„ä¸åŒï¼Œä½ å¯èƒ½éœ€è¦æ˜ç¡®å…è®¸è®¿é—®/.well-knownç›®å½•ã€‚</p>
<p>ä¸ºäº†ç¡®ä¿è¯¥ç›®å½•å¯ä¾›Letâ€™s Encryptè¿›è¡ŒéªŒè¯ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿæ›´æ”¹æˆ‘ä»¬çš„Nginxé…ç½®ã€‚ç¼–è¾‘<code>sudo vim  /etc/nginx/sites-available/default</code>æ–‡ä»¶ï¼Œå¹¶å°†ä¸‹é¢ä»£ç æ·»åŠ è¿›å»:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~ /.well-known</span> &#123;</span><br><span class="line">    <span class="attribute">allow</span> all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æ£€æŸ¥æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="attribute">sudo</span> nginx -t -c /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">## é‡æ–°åŠ è½½nginx</span></span><br><span class="line">sudo service nginx reload</span><br></pre></td></tr></table></figure>

<p>Nginxé…ç½®ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span> www.shiyx.top;</span><br><span class="line">        <span class="attribute">return</span> <span class="number">301</span> https://www.shiyx.top<span class="variable">$request_uri</span>;</span><br><span class="line">        <span class="attribute">server_tokens</span> <span class="literal">off</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">443</span> ssl http2;</span><br><span class="line">        <span class="attribute">ssl</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">server_name</span> www.shiyx.top;</span><br><span class="line">        <span class="comment">#$hostè¯¥å˜é‡çš„å€¼ç­‰äºè¯·æ±‚å¤´ä¸­Hostçš„å€¼ã€‚å¦‚æœHostæ— æ•ˆæ—¶ï¼Œé‚£ä¹ˆå°±æ˜¯å¤„ç†è¯¥è¯·æ±‚çš„serverçš„åç§°ã€‚</span></span><br><span class="line">        <span class="comment">#permanent: æ°¸ä¹…æ€§é‡å®šå‘ã€‚è¯·æ±‚æ—¥å¿—ä¸­çš„çŠ¶æ€ç ä¸º301</span></span><br><span class="line">        <span class="comment">#nginx å¯¹æ–‡æ¡£æ£€æµ‹æ¯”è¾ƒä¸¥æ ¼ï¼Œæ‰€ä»¥if ( $host != &#x27;www.shiyx.top&#x27; ) è¿™äº›ä»£ç ä¹‹é—´éœ€è¦æœ‰ç©ºæ ¼éš”å¼€ï¼Œä¸ç„¶ä¼š</span></span><br><span class="line">        <span class="comment">#æŠ¥é”™ï¼šunknown directive â€œif($host!=â€</span></span><br><span class="line">        <span class="attribute">if</span> (<span class="variable">$host</span> != <span class="string">&#x27;www.shiyx.top&#x27;</span> )&#123;</span><br><span class="line">                <span class="attribute">rewrite</span><span class="regexp"> ^/(.*)$</span> https://www.shiyx.top/<span class="variable">$1</span> <span class="literal">permanent</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/shiyx.top/fullchain.pem;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/shiyx.top/privkey.pem;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#ç¦æ­¢åœ¨headerä¸­å‡ºç°æœåŠ¡å™¨ç‰ˆæœ¬ï¼Œé˜²æ­¢é»‘å®¢åˆ©ç”¨ç‰ˆæœ¬æ¼æ´æ”»å‡»</span></span><br><span class="line">        <span class="attribute">server_tokens</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="comment"># è®¾ç½®ssl/tlsä¼šè¯ç¼“å­˜çš„ç±»å‹å’Œå¤§å°ã€‚å¦‚æœè®¾ç½®äº†è¿™ä¸ªå‚æ•°ä¸€èˆ¬æ˜¯sharedï¼Œbuildinå¯èƒ½ä¼šå‚æ•°å†…å­˜ç¢ç‰‡ï¼Œé»˜è®¤æ˜¯noneï¼Œ</span></span><br><span class="line">        <span class="comment">#å’Œoffå·®ä¸å¤šï¼Œåœç”¨ç¼“å­˜ã€‚å¦‚shared:SSL:10mè¡¨ç¤ºæˆ‘&gt;æ‰€æœ‰çš„nginxå·¥ä½œè¿›ç¨‹å…±äº«sslä¼šè¯ç¼“å­˜ï¼Œ</span></span><br><span class="line">        <span class="comment">#ç½‘ä»‹ç»è¯´1Må¯ä»¥å­˜æ”¾çº¦4000ä¸ªsessionsã€‚</span></span><br><span class="line">        <span class="attribute">ssl_session_cache</span>    shared:SSL:<span class="number">1m</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®¢æˆ·ç«¯å¯ä»¥é‡ç”¨ä¼šè¯ç¼“å­˜ä¸­sslå‚æ•°çš„è¿‡æœŸæ—¶é—´ï¼Œå†…ç½‘ç³»ç»Ÿé»˜è®¤5åˆ†é’Ÿå¤ªçŸ­äº†ï¼Œå¯ä»¥è®¾æˆ30må³30åˆ†é’Ÿç”šè‡³4hã€‚</span></span><br><span class="line">        <span class="attribute">ssl_session_timeout</span>  <span class="number">5m</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_protocols</span> SSLv3 TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># é€‰æ‹©åŠ å¯†å¥—ä»¶ï¼Œä¸åŒçš„æµè§ˆå™¨æ‰€æ”¯æŒçš„å¥—ä»¶ï¼ˆå’Œé¡ºåºï¼‰å¯èƒ½ä¼šä¸åŒã€‚</span></span><br><span class="line">        <span class="comment"># è¿™é‡ŒæŒ‡å®šçš„æ˜¯OpenSSLåº“èƒ½å¤Ÿè¯†åˆ«çš„å†™æ³•ï¼Œä½ å¯ä»¥é€šè¿‡ openssl -v cipher &#x27;RC4:HIGH:!aNULL:!MD5&#x27;</span></span><br><span class="line">        <span class="comment">#ï¼ˆåé¢æ˜¯ä½ æ‰€æŒ‡å®šçš„å¥—ä»¶åŠ å¯†ç®—æ³•ï¼‰ æ¥çœ‹æ‰€æ”¯æŒç®—æ³•ã€‚</span></span><br><span class="line">        <span class="attribute">ssl_ciphers</span>  HIGH:!aNULL:!MD5;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¾ç½®åå•†åŠ å¯†ç®—æ³•æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨æˆ‘ä»¬æœåŠ¡ç«¯çš„åŠ å¯†å¥—ä»¶ï¼Œè€Œä¸æ˜¯å®¢æˆ·ç«¯æµè§ˆå™¨çš„åŠ å¯†å¥—ä»¶ã€‚</span></span><br><span class="line">        <span class="attribute">ssl_prefer_server_ciphers</span>  <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">                <span class="attribute">root</span>   html;</span><br><span class="line">                <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~ /.well-known</span>&#123;</span><br><span class="line">                <span class="attribute">allow</span> all;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦é™„httpsæ£€æŸ¥ç½‘ç«™</p>
<p><a target="_blank" rel="noopener" href="https://www.ssllabs.com/ssltest/analyze.html," title="å‚è€ƒ1">hhttps://www.ssllabs.com/ssltest/analyze.html</a></p>
<p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.lao-wang.com/?p=142," title="å‚è€ƒ1">https://www.lao-wang.com/?p=142</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.guorenxi.com/43.html," title="å‚è€ƒ1">https://blog.guorenxi.com/43.html</a></p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000005797776," title="å‚è€ƒ1">https://segmentfault.com/a/1190000005797776</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/stulzq/p/8628163.html," title="å‚è€ƒ2">http://www.cnblogs.com/stulzq/p/8628163.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.appinn.com/use-letsencrypt-with-nginx/," title="å‚è€ƒ3">https://www.appinn.com/use-letsencrypt-with-nginx/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lzpong/p/6433189.html," title="å‚è€ƒ4">https://www.cnblogs.com/lzpong/p/6433189.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/04/25/AWS-Ubuntu-16-04-4-LTS-%E5%AE%89%E8%A3%85Nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/25/AWS-Ubuntu-16-04-4-LTS-%E5%AE%89%E8%A3%85Nginx/" class="post-title-link" itemprop="url">(AWS)Ubuntu 16.04.4 LTS å®‰è£…Nginx</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-04-25 14:53:17" itemprop="dateCreated datePublished" datetime="2018-04-25T14:53:17+00:00">2018-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index"><span itemprop="name">Nginx</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="AWS-Ubuntu-16-04-4-LTS-å®‰è£…Nginx"><a href="#AWS-Ubuntu-16-04-4-LTS-å®‰è£…Nginx" class="headerlink" title="(AWS)Ubuntu 16.04.4 LTS å®‰è£…Nginx"></a>(AWS)Ubuntu 16.04.4 LTS å®‰è£…Nginx</h1><h2 id="å®‰è£…nginx"><a href="#å®‰è£…nginx" class="headerlink" title="å®‰è£…nginx"></a>å®‰è£…nginx</h2><p><a target="_blank" rel="noopener" href="http://nginx.org/en/linux_packages.html" title="å®˜ç½‘">nginxå®˜ç½‘</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Ubuntuå®‰è£…ä¹‹åçš„æ–‡ä»¶ç»“æ„å¤§è‡´ä¸ºï¼š</p>
</blockquote>
<ul>
<li>æ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½åœ¨/etc/nginxä¸‹ï¼Œå¹¶ä¸”æ¯ä¸ªè™šæ‹Ÿä¸»æœºå·²ç»å®‰æ’åœ¨äº†/etc/nginx/sites-availableä¸‹</li>
<li>ç¨‹åºæ–‡ä»¶åœ¨/usr/sbin/nginx</li>
<li>æ—¥å¿—æ”¾åœ¨äº†/var/log/nginxä¸­</li>
<li>å¹¶å·²ç»åœ¨/etc/init.d/ä¸‹åˆ›å»ºäº†å¯åŠ¨è„šæœ¬nginx</li>
<li>é»˜è®¤çš„è™šæ‹Ÿä¸»æœºçš„ç›®å½•è®¾ç½®åœ¨äº†/var/www/nginx-default (æœ‰çš„ç‰ˆæœ¬ é»˜è®¤çš„è™šæ‹Ÿä¸»æœºçš„ç›®å½•è®¾ç½®åœ¨äº†/var/www, è¯·å‚è€ƒ/etc/nginx/sites-availableé‡Œçš„é…ç½®)</li>
</ul>
<h2 id="å¯åŠ¨nginx"><a href="#å¯åŠ¨nginx" class="headerlink" title="å¯åŠ¨nginx"></a>å¯åŠ¨nginx</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo &#x2F;etc&#x2F;init.d&#x2F;nginx start</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service nginx start</span><br></pre></td></tr></table></figure>

<h2 id="åœæ­¢"><a href="#åœæ­¢" class="headerlink" title="åœæ­¢"></a>åœæ­¢</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo service nginx stop</span><br><span class="line">sudo service nginx restart</span><br></pre></td></tr></table></figure>

<h2 id="æ£€æŸ¥configé…ç½®é—®é¢˜"><a href="#æ£€æŸ¥configé…ç½®é—®é¢˜" class="headerlink" title="æ£€æŸ¥configé…ç½®é—®é¢˜"></a>æ£€æŸ¥configé…ç½®é—®é¢˜</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo</span> nginx -t -c /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥è®¿é—®äº†ï¼Œ<code>http://localhost/</code>ï¼Œé»˜è®¤80ç«¯å£</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2018/04/24/aws%E6%90%AD%E5%BB%BAshadowsocks%E6%9C%8D%E5%8A%A1%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/24/aws%E6%90%AD%E5%BB%BAshadowsocks%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="post-title-link" itemprop="url">awsæ­å»ºshadowsocksæœåŠ¡å™¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-04-24 09:12:23" itemprop="dateCreated datePublished" datetime="2018-04-24T09:12:23+00:00">2018-04-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/shadowsocks/" itemprop="url" rel="index"><span itemprop="name">shadowsocks</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="awsæ­å»ºshadowsocksæœåŠ¡å™¨"><a href="#awsæ­å»ºshadowsocksæœåŠ¡å™¨" class="headerlink" title="awsæ­å»ºshadowsocksæœåŠ¡å™¨"></a>awsæ­å»ºshadowsocksæœåŠ¡å™¨</h1><h2 id="shadowsocksç‰¹ç‚¹ï¼š"><a href="#shadowsocksç‰¹ç‚¹ï¼š" class="headerlink" title="shadowsocksç‰¹ç‚¹ï¼š"></a>shadowsocksç‰¹ç‚¹ï¼š</h2><p>åœ°å€ï¼š<br><a target="_blank" rel="noopener" href="https://github.com/shadowsocks/shadowsocks" title="é“¾æ¥">https://github.com/shadowsocks/shadowsocks</a></p>
<p>å¿«é€Ÿï¼ˆå¼‚æ­¥I/Oå’Œäº‹ä»¶é©±åŠ¨ç¨‹åºï¼‰</p>
<p>å®‰å…¨ï¼ˆæ‰€æœ‰çš„æµé‡éƒ½ç»è¿‡åŠ å¯†ç®—æ³•åŠ å¯†ï¼Œæ”¯æŒè‡ªå®šä¹‰ç®—æ³•ï¼‰</p>
<p>æ”¯æŒç§»åŠ¨å®¢æˆ·ç«¯ï¼ˆä¸“ä¸ºç§»åŠ¨è®¾å¤‡å’Œæ— çº¿ç½‘ç»œä¼˜åŒ–ï¼‰</p>
<p>è·¨å¹³å°ï¼ˆå¯è¿è¡ŒäºåŒ…æ‹¬PCï¼ŒMacï¼Œæ‰‹æœºï¼ˆAndroidå’ŒiOSï¼‰å’Œè·¯ç”±å™¨ï¼ˆOpenWrtï¼‰åœ¨å†…çš„å¤šç§å¹³å°ä¸Šï¼‰</p>
<h2 id="å®‰è£…shadowsocks"><a href="#å®‰è£…shadowsocks" class="headerlink" title="å®‰è£…shadowsocks"></a>å®‰è£…shadowsocks</h2><p><a target="_blank" rel="noopener" href="https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" title="é“¾æ¥">å‚è€ƒå®˜ç½‘å‘½ä»¤</a></p>
<p>Debian / Ubuntu:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python-pip</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure>

<p>CentOS:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install python-setuptools &amp;&amp; easy_install pip</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®shadowsocks"><a href="#é…ç½®shadowsocks" class="headerlink" title="é…ç½®shadowsocks"></a>é…ç½®shadowsocks</h2><p>æ— è®ºæ˜¯centosç³»ç»Ÿè¿˜æ˜¯ubuntuç³»ç»Ÿï¼Œshadowsocksé…ç½®éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>shadowsockså®‰è£…å®Œæ¯•åï¼Œå¯ä»¥æŸ¥çœ‹ä½¿ç”¨ssserverå‘½ä»¤è¿›è¡ŒæŸ¥çœ‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ip-172-31-16-20:~$ ssserver -h</span><br><span class="line">usage: ssserver [OPTION]...</span><br><span class="line">A fast tunnel proxy that helps you bypass firewalls.</span><br><span class="line"></span><br><span class="line">You can supply configurations via either config file or command line arguments.</span><br><span class="line"></span><br><span class="line">Proxy options:</span><br><span class="line">  -c CONFIG              path to config file</span><br><span class="line">  -s SERVER_ADDR         server address, default: 0.0.0.0</span><br><span class="line">  -p SERVER_PORT         server port, default: 8388</span><br><span class="line">  -k PASSWORD            password</span><br><span class="line">  -m METHOD              encryption method, default: aes-256-cfb</span><br><span class="line">  -t TIMEOUT             timeout in seconds, default: 300</span><br><span class="line">  --fast-open            use TCP_FASTOPEN, requires Linux 3.7+</span><br><span class="line">  --workers WORKERS      number of workers, available on Unix&#x2F;Linux</span><br><span class="line">  --forbidden-ip IPLIST  comma seperated IP list forbidden to connect</span><br><span class="line">  --manager-address ADDR optional server manager UDP address, see wiki</span><br><span class="line"></span><br><span class="line">General options:</span><br><span class="line">  -h, --help             show this help message and exit</span><br><span class="line">  -d start&#x2F;stop&#x2F;restart  daemon mode</span><br><span class="line">  --pid-file PID_FILE    pid file for daemon mode</span><br><span class="line">  --log-file LOG_FILE    log file for daemon mode</span><br><span class="line">  --user USER            username to run as</span><br><span class="line">  -v, -vv                verbose mode</span><br><span class="line">  -q, -qq                quiet mode, only show warnings&#x2F;errors</span><br><span class="line">  --version              show version information</span><br><span class="line"></span><br><span class="line">Online help: &lt;https:&#x2F;&#x2F;github.com&#x2F;shadowsocks&#x2F;shadowsocks&gt;</span><br></pre></td></tr></table></figure>

<p>which ssserver</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@ip-172-31-16-20:~$ which ssserver</span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;bin&#x2F;ssserver</span><br></pre></td></tr></table></figure>

<h2 id="å¯åŠ¨shadowsocksæœåŠ¡"><a href="#å¯åŠ¨shadowsocksæœåŠ¡" class="headerlink" title="å¯åŠ¨shadowsocksæœåŠ¡"></a>å¯åŠ¨shadowsocksæœåŠ¡</h2><h3 id="é…ç½®æ–‡ä»¶å¯åŠ¨"><a href="#é…ç½®æ–‡ä»¶å¯åŠ¨" class="headerlink" title="é…ç½®æ–‡ä»¶å¯åŠ¨"></a>é…ç½®æ–‡ä»¶å¯åŠ¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir &#x2F;etc&#x2F;shadowsocks</span><br><span class="line"></span><br><span class="line">sudo vim &#x2F;etc&#x2F;shadowsocks&#x2F;config.json</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">â€œserverâ€:â€0.0.0.0â€³,</span><br><span class="line"></span><br><span class="line">â€œserver_portâ€:1194,</span><br><span class="line"></span><br><span class="line">â€œlocal_addressâ€:â€127.0.0.1â€³,</span><br><span class="line"></span><br><span class="line">â€œlocal_portâ€:1080,</span><br><span class="line"></span><br><span class="line">â€œpasswordâ€:â€123qwe$%^â€³,</span><br><span class="line"></span><br><span class="line">â€œtimeoutâ€:300,</span><br><span class="line"></span><br><span class="line">â€œmethodâ€:â€aes-256-cfbâ€,</span><br><span class="line"></span><br><span class="line">â€œfast_openâ€:false,</span><br><span class="line"></span><br><span class="line">â€œworkersâ€: 1</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ssserver -c &#x2F;etc&#x2F;shadowsocks&#x2F;config.json -d start</span><br><span class="line">netstat -tunlp</span><br><span class="line">netstat -anp  ###æ˜¾ç¤ºç³»ç»Ÿç«¯å£ä½¿ç”¨æƒ…å†µ</span><br></pre></td></tr></table></figure>

<p>åœæ­¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ssserver -c &#x2F;etc&#x2F;shadowsocks&#x2F;config.json -d stop</span><br></pre></td></tr></table></figure>

<h3 id="å‘½ä»¤å¯åŠ¨"><a href="#å‘½ä»¤å¯åŠ¨" class="headerlink" title="å‘½ä»¤å¯åŠ¨"></a>å‘½ä»¤å¯åŠ¨</h3> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ssserver -p 443 -k password -m rc4-md5</span><br></pre></td></tr></table></figure>

<p> å¦‚æœè¦åå°è¿è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ssserver -p 443 -k password -m rc4-md5 --user nobody -d start</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦åœæ­¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ssserver -d stop</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦æ£€æŸ¥æ—¥å¿—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo less &#x2F;var&#x2F;log&#x2F;shadowsocks.log</span><br></pre></td></tr></table></figure>

<h3 id="Dockerå¯åŠ¨"><a href="#Dockerå¯åŠ¨" class="headerlink" title="Dockerå¯åŠ¨"></a>Dockerå¯åŠ¨</h3><h4 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h4><p>å‚è€ƒå®˜ç½‘é“¾æ¥ï¼š<br><a target="_blank" rel="noopener" href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" title="é“¾æ¥">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a> </p>
<h4 id="ä¸‹è½½shadowsocksé•œåƒ"><a href="#ä¸‹è½½shadowsocksé•œåƒ" class="headerlink" title="ä¸‹è½½shadowsocksé•œåƒ"></a>ä¸‹è½½shadowsocksé•œåƒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull oddrationale&#x2F;docker-shadowsocks</span><br></pre></td></tr></table></figure>

<h4 id="è¿è¡Œè®¾ç½®shadowsocks"><a href="#è¿è¡Œè®¾ç½®shadowsocks" class="headerlink" title="è¿è¡Œè®¾ç½®shadowsocks"></a>è¿è¡Œè®¾ç½®shadowsocks</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -d -p 8388:8388 oddrationale&#x2F;docker-shadowsocks -s 0.0.0.0 -p 8388 -k &#39;paaassswwword&#39; -m aes-256-cfb</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œï¼š <code>docker ps</code></p>
<p>æŸ¥çœ‹shadowsocksæ˜¯å¦è¿è¡Œèµ·æ¥äº†ï¼Œæ²¡é—®é¢˜çš„è¯å°±å¯ä»¥exité€€å‡ºvpsçš„ç™»å½•äº†</p>
<p>åœæ­¢å®¹å™¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop --time&#x3D;20 container_name</span><br></pre></td></tr></table></figure>

<p><code>8388</code> æœåŠ¡å™¨ç«¯çš„ç«¯å£å·ï¼Œ<code>paaassswwword</code> æ˜¯å¯†ç ï¼Œ <code>aes-256-cfb</code> æ˜¯åŠ å¯†æ–¹å¼</p>
<h3 id="é…ç½®aws-ec2å®‰å…¨ç»„è§„åˆ™"><a href="#é…ç½®aws-ec2å®‰å…¨ç»„è§„åˆ™" class="headerlink" title="é…ç½®aws ec2å®‰å…¨ç»„è§„åˆ™"></a>é…ç½®aws ec2å®‰å…¨ç»„è§„åˆ™</h3><p>åœ¨aws ec2æ§åˆ¶å¹³å°æ·»åŠ å®‰å…¨ç»„è§„åˆ™-å…¥ç«™è§„åˆ™</p>
<p>è‡ªå®šä¹‰TCPè§„åˆ™ï¼Œç«¯å£ï¼Œä»»ä½•ä½ç½®</p>
<p><img src="/img/aws%E5%85%A5%E7%AB%99%E8%A7%84%E5%88%99.png" alt="awsé…ç½®"></p>
<h2 id="è¿æ¥shadowsocksæœåŠ¡"><a href="#è¿æ¥shadowsocksæœåŠ¡" class="headerlink" title="è¿æ¥shadowsocksæœåŠ¡"></a>è¿æ¥shadowsocksæœåŠ¡</h2><p>shadowsocksæœåŠ¡å™¨æ­å»ºå®Œæ¯•åï¼Œæˆ‘ä»¬ç°åœ¨æ¥å®¢æˆ·ç«¯è¿æ¥shadowsocksæœåŠ¡å™¨ã€‚</p>
<p>shadowsockså®¢æˆ·ç«¯æœ‰Windowsç‰ˆæœ¬å’ŒLinuxç‰ˆæœ¬</p>
<h3 id="Windowsç‰ˆæœ¬"><a href="#Windowsç‰ˆæœ¬" class="headerlink" title="Windowsç‰ˆæœ¬"></a>Windowsç‰ˆæœ¬</h3><p>windowsç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ä»å¦‚ä¸‹ç½‘å€è¿›è¡Œä¸‹è½½ï¼Œå¦‚ä¸‹ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://github.com/shadowsocks/shadowsocks-windows/releases">https://github.com/shadowsocks/shadowsocks-windows/releases</a></p>
<p>ä¸‹è½½å®Œæ¯•åï¼ŒåŒå‡»Shadowsocks.exeï¼Œåœ¨å¼¹å‡ºæ¡†å¡«å…¥<br>ShadowsocksæœåŠ¡å™¨çš„IPã€ShadowsocksæœåŠ¡å™¨ç«¯å£ï¼Œå¯†ç ã€‚</p>
<p><img src="/img/shadowsocks%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE.png" alt="shadowsockså®¢æˆ·ç«¯é…ç½®"></p>
<p>å‚è€ƒç½‘å€ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://yq.aliyun.com/articles/43252" title="é“¾æ¥">https://yq.aliyun.com/articles/43252</a> </p>
<p><a target="_blank" rel="noopener" href="https://yq.aliyun.com/articles/555577" title="é“¾æ¥">https://yq.aliyun.com/articles/555577</a> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2017/12/04/WinDbg%E5%BF%AB%E9%80%9F%E5%88%86%E6%9E%90%E5%BC%82%E5%B8%B8%E6%83%85%E5%86%B5Dump%E6%96%87%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/04/WinDbg%E5%BF%AB%E9%80%9F%E5%88%86%E6%9E%90%E5%BC%82%E5%B8%B8%E6%83%85%E5%86%B5Dump%E6%96%87%E4%BB%B6/" class="post-title-link" itemprop="url">WinDbgå¿«é€Ÿåˆ†æå¼‚å¸¸æƒ…å†µDumpæ–‡ä»¶</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-12-04 14:26:29" itemprop="dateCreated datePublished" datetime="2017-12-04T14:26:29+00:00">2017-12-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/WinDbg/" itemprop="url" rel="index"><span itemprop="name">WinDbg</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WinDbgå¿«é€Ÿåˆ†æå¼‚å¸¸æƒ…å†µDumpæ–‡ä»¶"><a href="#WinDbgå¿«é€Ÿåˆ†æå¼‚å¸¸æƒ…å†µDumpæ–‡ä»¶" class="headerlink" title="WinDbgå¿«é€Ÿåˆ†æå¼‚å¸¸æƒ…å†µDumpæ–‡ä»¶"></a>WinDbgå¿«é€Ÿåˆ†æå¼‚å¸¸æƒ…å†µDumpæ–‡ä»¶</h1><p>ç”Ÿäº§ç¯å¢ƒå¶å°”ä¼šå‡ºç°ä¸€äº›å¼‚å¸¸é—®é¢˜ï¼ŒWinDbg æˆ– GDB å°±æ˜¯è§£å†³æ­¤ç±»é—®é¢˜çš„åˆ©å™¨ã€‚è°ƒè¯•å·¥å…· WinDbg å¦‚åŒåŒ»ç”Ÿçš„å¬è¯Šå™¨ï¼Œæ˜¯ç³»ç»Ÿç”Ÿç—…æ—¶åšé—®é¢˜è¯Šæ–­çš„é€†å‘åˆ†æå·¥å…·ï¼ŒDump æ–‡ä»¶ç±»ä¼¼äºé£æœºçš„é»‘åŒ£å­ï¼Œè®°å½•ç€ç”Ÿäº§ç¯å¢ƒç¨‹åºè¿è¡Œçš„çŠ¶æ€ã€‚<br>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†è°ƒè¯•å·¥å…· WinDbg å’ŒæŠ“åŒ…å·¥å…· ProcDump çš„ä½¿ç”¨ã€‚</p>
<h2 id="ä¸€ã€ç®€ä»‹"><a href="#ä¸€ã€ç®€ä»‹" class="headerlink" title="ä¸€ã€ç®€ä»‹"></a>ä¸€ã€ç®€ä»‹</h2><h3 id="1ã€WinDbg"><a href="#1ã€WinDbg" class="headerlink" title="1ã€WinDbg"></a>1ã€WinDbg</h3><p>WinDbg æ˜¯åœ¨ Windows å¹³å°ä¸‹çš„ã€å¼ºå¤§çš„ç”¨æˆ·æ€å’Œå†…æ ¸æ€è°ƒè¯•å·¥å…·ã€‚ç›¸æ¯”è¾ƒäº Visual Studioï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„è°ƒè¯•å·¥å…·ï¼Œæ‰€è°“è½»é‡çº§æŒ‡çš„æ˜¯å®ƒçš„å®‰è£…æ–‡ä»¶å¤§å°è¾ƒå°ï¼Œä½†æ˜¯å…¶è°ƒè¯•åŠŸèƒ½ï¼Œå´æ¯” VS æ›´ä¸ºå¼ºå¤§ã€‚<br>å®ƒçš„å¦å¤–ä¸€ä¸ªç”¨é€”æ˜¯å¯ä»¥ç”¨æ¥åˆ†æ Dump æ•°æ®ã€‚WinDbg æ˜¯ Microsoft å…¬å¸å…è´¹è°ƒè¯•å™¨è°ƒè¯•é›†åˆä¸­çš„ GUI çš„è°ƒè¯•å™¨ï¼Œæ”¯æŒ Source å’Œ Assembly ä¸¤ç§æ¨¡å¼çš„è°ƒè¯•ã€‚<br>WinDbg ä¸ä»…å¯ä»¥è°ƒè¯•åº”ç”¨ç¨‹åºï¼Œè¿˜å¯ä»¥è¿›è¡Œ Kernel Debugã€‚ç»“åˆ Microsoft çš„ Symbol Serverï¼Œå¯ä»¥è·å–ç³»ç»Ÿç¬¦å·æ–‡ä»¶ï¼Œä¾¿äºåº”ç”¨ç¨‹åºå’Œå†…æ ¸çš„è°ƒè¯•ã€‚<br>WinDbg æ”¯æŒçš„å¹³å°åŒ…æ‹¬ x86ã€IA64ã€AMD64ã€‚è™½ç„¶ WinDbg ä¹Ÿæä¾›å›¾å½¢ç•Œé¢æ“ä½œï¼Œä½†å®ƒæœ€å¼ºå¤§çš„åœ°æ–¹è¿˜æ˜¯æœ‰ç€å¼ºå¤§çš„è°ƒè¯•å‘½ä»¤ï¼Œä¸€èˆ¬æƒ…å†µä¼šç»“åˆ GUI å’Œå‘½ä»¤è¡Œè¿›è¡Œæ“ä½œï¼Œå¸¸ç”¨çš„è§†å›¾æœ‰ï¼šå±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ã€è°ƒç”¨æ ˆã€çº¿ç¨‹ã€å‘½ä»¤ã€å¯„å­˜å™¨ã€ç™½æ¿ç­‰ã€‚å…¶ä¸­â€œå‘½ä»¤â€è§†å›¾æ˜¯é»˜è®¤æ‰“å¼€çš„ã€‚</p>
<h3 id="2ã€DebugDiag"><a href="#2ã€DebugDiag" class="headerlink" title="2ã€DebugDiag"></a>2ã€DebugDiag</h3><p>DebugDiag æœ€åˆæ˜¯ä¸ºäº†å¸®åŠ©åˆ†æ IIS çš„æ€§èƒ½é—®é¢˜è€Œå¼€å‘çš„ï¼Œå®ƒåŒæ ·å¯ä»¥ç”¨äºä»»ä½•å…¶ä»–çš„è¿›ç¨‹ã€‚DebugDiag å·¥å…·ä¸»è¦ç”¨äºå¸®åŠ©è§£å†³å¦‚æŒ‚èµ·ã€ é€Ÿåº¦æ…¢ã€ å†…å­˜æ³„æ¼æˆ–å†…å­˜ç¢ç‰‡ï¼Œå’Œä»»ä½•ç”¨æˆ·æ¨¡å¼è¿›ç¨‹å´©æºƒç­‰é—®é¢˜ã€‚<br>è¯¥å·¥å…·åŒ…æ‹¬é™„åŠ è°ƒè¯•è„šæœ¬ï¼Œä¾§é‡äºäº’è”ç½‘ä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰åº”ç”¨ç¨‹åºã€ Web æ•°æ®è®¿é—®ç»„ä»¶ã€ COM+ å’Œç›¸å…³ Microsoft æŠ€æœ¯ã€SharePoint å’Œ .NETã€‚å®ƒæä¾›å¯æ‰©å±•å¯¹è±¡æ¨¡å‹ä¸­çš„ COM å¯¹è±¡çš„å½¢å¼ï¼Œå¹¶å…·æœ‰ä¸€ä¸ªå†…ç½®çš„æŠ¥å‘Šæ¡†æ¶æä¾›çš„è„šæœ¬ä¸»æœºã€‚å®ƒç”± 3 éƒ¨åˆ†ç»„æˆï¼ŒåŒ…æ‹¬è°ƒè¯•æœåŠ¡ã€ è°ƒè¯•å™¨ä¸»æœºå’Œç”¨æˆ·ç•Œé¢ã€‚</p>
<h3 id="3ã€ProcDump"><a href="#3ã€ProcDump" class="headerlink" title="3ã€ProcDump"></a>3ã€ProcDump</h3><p>ProcDump æ˜¯ System Internal æä¾›çš„ä¸€ä¸ªä¸“é—¨ç”¨æ¥ç›‘æµ‹ç¨‹åº CPU é«˜ä½¿ç”¨ç‡ä»è€Œç”Ÿæˆè¿›ç¨‹ Dump æ–‡ä»¶çš„å·¥å…·ã€‚ProcDump å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„ CPU ä½¿ç”¨ç‡æˆ–è€…æŒ‡å®šçš„æ€§èƒ½è®¡æ•°å™¨æ¥é’ˆå¯¹ç‰¹å®šè¿›ç¨‹ç”Ÿæˆä¸€ç³»åˆ—çš„ Dump æ–‡ä»¶ï¼Œä»¥ä¾¿è°ƒè¯•è€…å¯¹äº‹æ•…åŸå› è¿›è¡Œåˆ†æã€‚</p>
<h2 id="äºŒï¼Œå·¥å…·ä¸‹è½½åœ°å€"><a href="#äºŒï¼Œå·¥å…·ä¸‹è½½åœ°å€" class="headerlink" title="äºŒï¼Œå·¥å…·ä¸‹è½½åœ°å€"></a>äºŒï¼Œå·¥å…·ä¸‹è½½åœ°å€</h2><p>1ã€WinDbg ä¸‹è½½</p>
<p>x86 ä½ç‰ˆæœ¬ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="http://download.microsoft.com/download/A/6/A/A6AC035D-DA3F-4F0C-ADA4-37C8E5D34E3D/setup/WinSDKDebuggingTools/dbg_x86.msi">http://download.microsoft.com/download/A/6/A/A6AC035D-DA3F-4F0C-ADA4-37C8E5D34E3D/setup/WinSDKDebuggingTools/dbg_x86.msi</a></p>
<p>x64 ä½ç‰ˆæœ¬ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="http://download.microsoft.com/download/A/6/A/A6AC035D-DA3F-4F0C-ADA4-37C8E5D34E3D/setup/WinSDKDebuggingTools_amd64/dbg_amd64.msi">http://download.microsoft.com/download/A/6/A/A6AC035D-DA3F-4F0C-ADA4-37C8E5D34E3D/setup/WinSDKDebuggingTools_amd64/dbg_amd64.msi</a></p>
<p>2ã€DebugDiag v2 Update 2 ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/download/details.aspx?id=49924">https://www.microsoft.com/en-us/download/details.aspx?id=49924</a></p>
<p>3ã€ProcDump v9.0 ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://download.sysinternals.com/files/Procdump.zip">https://download.sysinternals.com/files/Procdump.zip</a></p>
<h2 id="ä¸‰ã€è·å–å¼‚å¸¸è¿›ç¨‹çš„-Dump-æ–‡ä»¶"><a href="#ä¸‰ã€è·å–å¼‚å¸¸è¿›ç¨‹çš„-Dump-æ–‡ä»¶" class="headerlink" title="ä¸‰ã€è·å–å¼‚å¸¸è¿›ç¨‹çš„ Dump æ–‡ä»¶"></a>ä¸‰ã€è·å–å¼‚å¸¸è¿›ç¨‹çš„ Dump æ–‡ä»¶</h2><p>ä»¥ä¸‹å››ç§æ–¹å¼è·å– Dump æ–‡ä»¶ï¼š</p>
<h3 id="1ã€é€šè¿‡ã€ä»»åŠ¡ç®¡ç†å™¨ã€‘è·å–-Dump-æ–‡ä»¶ï¼Œè¿™æ ·è·å–çš„æ˜¯-MinDump"><a href="#1ã€é€šè¿‡ã€ä»»åŠ¡ç®¡ç†å™¨ã€‘è·å–-Dump-æ–‡ä»¶ï¼Œè¿™æ ·è·å–çš„æ˜¯-MinDump" class="headerlink" title="1ã€é€šè¿‡ã€ä»»åŠ¡ç®¡ç†å™¨ã€‘è·å– Dump æ–‡ä»¶ï¼Œè¿™æ ·è·å–çš„æ˜¯ MinDump"></a>1ã€é€šè¿‡ã€ä»»åŠ¡ç®¡ç†å™¨ã€‘è·å– Dump æ–‡ä»¶ï¼Œè¿™æ ·è·å–çš„æ˜¯ MinDump</h3><p><img src="/img/MinDump.png" alt="é€šè¿‡ä»»åŠ¡ç®¡ç†å™¨"></p>
<h3 id="2ã€åˆ©ç”¨-WinDbg-çš„-adplus-è·å–-Dump-æ–‡ä»¶ï¼Œè¿™æ ·è·å–çš„æ˜¯-FullDump"><a href="#2ã€åˆ©ç”¨-WinDbg-çš„-adplus-è·å–-Dump-æ–‡ä»¶ï¼Œè¿™æ ·è·å–çš„æ˜¯-FullDump" class="headerlink" title="2ã€åˆ©ç”¨ WinDbg çš„ adplus è·å– Dump æ–‡ä»¶ï¼Œè¿™æ ·è·å–çš„æ˜¯ FullDump"></a>2ã€åˆ©ç”¨ WinDbg çš„ adplus è·å– Dump æ–‡ä»¶ï¼Œè¿™æ ·è·å–çš„æ˜¯ FullDump</h3><p>C:\Program Files\Debugging Tools for Windows (x64)&gt;adplus -hang -pn explorer.exe<br> -o D:\dumps</p>
<p><img src="/img/windbg-1.png" alt="WinDbg-1"></p>
<h3 id="3ã€é€šè¿‡-DebugDiag-åˆ›å»º-NET-å¼‚å¸¸è½¬å‚¨-Dump-æ–‡ä»¶"><a href="#3ã€é€šè¿‡-DebugDiag-åˆ›å»º-NET-å¼‚å¸¸è½¬å‚¨-Dump-æ–‡ä»¶" class="headerlink" title="3ã€é€šè¿‡ DebugDiag åˆ›å»º.NET å¼‚å¸¸è½¬å‚¨ Dump æ–‡ä»¶"></a>3ã€é€šè¿‡ DebugDiag åˆ›å»º.NET å¼‚å¸¸è½¬å‚¨ Dump æ–‡ä»¶</h3><p><img src="/img/debugdiag-2.png" alt="debugdiag-2"></p>
<h3 id="4ã€é€šè¿‡-ProcDump-æŠ“å–å¼‚å¸¸çº¿ç¨‹-Dump-æ–‡ä»¶ã€‚"><a href="#4ã€é€šè¿‡-ProcDump-æŠ“å–å¼‚å¸¸çº¿ç¨‹-Dump-æ–‡ä»¶ã€‚" class="headerlink" title="4ã€é€šè¿‡ ProcDump æŠ“å–å¼‚å¸¸çº¿ç¨‹ Dump æ–‡ä»¶ã€‚"></a>4ã€é€šè¿‡ ProcDump æŠ“å–å¼‚å¸¸çº¿ç¨‹ Dump æ–‡ä»¶ã€‚</h3><h4 id="4-1ã€å‘½ä»¤è¡Œ"><a href="#4-1ã€å‘½ä»¤è¡Œ" class="headerlink" title="4.1ã€å‘½ä»¤è¡Œ"></a>4.1ã€å‘½ä»¤è¡Œ</h4><p>è¿›å…¥ProcDumpç›®å½•ï¼Œè¿è¡Œå‘½ä»¤è¡Œï¼š</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">procdump [-a] [[-c|-cl CPU usage] [-u] [-s seconds]] [-n exceeds] </span><br><span class="line">[-e [<span class="number">1</span> [-b]] [-f &lt;filter,...&gt;] [-g] [-h] [-l] [-m|-ml commit usage] </span><br><span class="line">[-ma | -mp] [-o] [-p|-pl counter threshold] [-r] [-t] </span><br><span class="line">[-d &lt;callback DLL&gt;] [-<span class="number">64</span>] &lt;[-w] &lt;process name or service name or PID&gt;</span><br><span class="line">[dump file] | -i &lt;dump file&gt; | -u | -x &lt;dump file&gt; &lt;image file&gt; </span><br><span class="line">[arguments] &gt;] [-? [ -e]]</span><br></pre></td></tr></table></figure>

<p>å®ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">procdump -c 70 -s 5 -ma -n 3 w3wp</span><br><span class="line">  - å½“ç³»ç»Ÿ CPU ä½¿ç”¨ç‡æŒç»­ 5 ç§’è¶…è¿‡ 70% æ—¶ï¼Œè¿ç»­æŠ“ 3 ä¸ª Full Dumpã€‚</span><br><span class="line">procdump outlook -p &quot;\Processor(_Total)\% Processor Time&quot; 80</span><br><span class="line">  - å½“ç³»ç»Ÿ CPU ä½¿ç”¨ç‡è¶…è¿‡ 80%ï¼ŒæŠ“å– Outlook è¿›ç¨‹çš„ Mini Dumpã€‚</span><br><span class="line">procdump -ma outlook -p &quot;\Process(Outlook)\Handle Count&quot; 10000</span><br><span class="line">  - å½“ Outlook è¿›ç¨‹ Handle æ•°è¶…è¿‡ 10000 æ—¶æŠ“å– Full Dump</span><br><span class="line">procdump -ma 4572</span><br><span class="line">  - ç›´æ¥ç”Ÿæˆè¿›ç¨‹å·ä½ 4572 çš„ Full Dumpã€‚</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>ProcDump éœ€è¦è¿›ç¨‹å·²ç»å¯åŠ¨ï¼Œå¹¶ä¸”ä¸­é€”ä¸èƒ½åœæ­¢ã€‚æ¯”å¦‚éœ€è¦æŠ“å– IIS Worker Process çš„ High CPU Dumpï¼Œç”±äº IIS Worker Process é»˜è®¤ä¼š</li>
</ul>
<p>é…ç½® Idle Timeout = 20 minï¼Œå³è¯¥è¿›ç¨‹åœ¨ 20 åˆ†é’Ÿå†…æ²¡æœ‰ä»»ä½•è¯·æ±‚çš„è¯å°±ä¼šè‡ªåŠ¨ç»“æŸï¼Œè¿™ç§æƒ…å†µä¸‹ ProcDump ä¹Ÿä¼šè‡ªåŠ¨ç»“æŸã€‚éœ€è¦é‡æ–°è¿è¡Œå‘½ä»¤ã€‚</p>
<p>å› æ­¤å¦‚æœç›®æ ‡ç¨‹åºå­˜åœ¨è¿™æ ·çš„é…ç½®ï¼Œéœ€è¦æš‚æ—¶å°†è¯¥é…ç½®å–æ¶ˆã€‚</p>
<ul>
<li><p>æœ‰äº›ç³»ç»Ÿç®¡ç†å‘˜å¸Œæœ›èƒ½å¤Ÿè¿è¡Œè¯¥å·¥å…·åé€€å‡ºç”¨æˆ· sessionï¼ŒProcDump æ˜¯åšä¸åˆ°çš„ï¼Œå¦‚æœæœ‰è¿™ç§éœ€æ±‚å¯ä»¥è€ƒè™‘ä½¿ç”¨ DebugDiagã€‚</p>
</li>
<li><p>åœ¨è°ƒè¯• High CPU é—®é¢˜çš„æ—¶å€™ç»å¸¸ç”¨åˆ°çš„ä¸€ä¸ªå‘½ä»¤æ˜¯!runawayï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™!runway åœ¨ ProcDump æŠ“å– Dump æ–‡ä»¶çš„è¿‡ç¨‹ä¸­è¿è¡Œä¸å‡ºæ¥ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<p>0:000&gt; !runaway ERROR: !runaway: extension exception 0x80004002. â€œUnable to get thread times - dumps may not have time informationâ€</p>
<p>è§£å†³æ–¹æ³•æ˜¯å°† Debugging Tools for Windows (WinDbg) å®‰è£…ç›®å½•ä¸‹çš„ dbghelp.dll æ‹·è´åˆ° procdump.exe æ‰€åœ¨ç›®å½•ä¸‹ï¼Œç„¶åå†è¿è¡Œå‘½ä»¤æŠ“å– Dumpã€‚</p>
<h2 id="å››ã€WinDbg-ä½¿ç”¨æ–¹æ³•"><a href="#å››ã€WinDbg-ä½¿ç”¨æ–¹æ³•" class="headerlink" title="å››ã€WinDbg ä½¿ç”¨æ–¹æ³•"></a>å››ã€WinDbg ä½¿ç”¨æ–¹æ³•</h2><p>æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h3 id="1ã€æŠ“å–å¼‚å¸¸ç¨‹åºçš„-Dump-æ–‡ä»¶ã€‚"><a href="#1ã€æŠ“å–å¼‚å¸¸ç¨‹åºçš„-Dump-æ–‡ä»¶ã€‚" class="headerlink" title="1ã€æŠ“å–å¼‚å¸¸ç¨‹åºçš„ Dump æ–‡ä»¶ã€‚"></a>1ã€æŠ“å–å¼‚å¸¸ç¨‹åºçš„ Dump æ–‡ä»¶ã€‚</h3><h3 id="2ã€è®¾ç½®ç¬¦å·è¡¨"><a href="#2ã€è®¾ç½®ç¬¦å·è¡¨" class="headerlink" title="2ã€è®¾ç½®ç¬¦å·è¡¨"></a>2ã€è®¾ç½®ç¬¦å·è¡¨</h3><p>ç¬¦å·è¡¨æ˜¯ WinDbg å…³é”®çš„â€œæ•°æ®åº“â€ï¼Œå¦‚æœæ²¡æœ‰å®ƒï¼ŒWinDbg åŸºæœ¬ä¸Šå°±æ˜¯ä¸ªåºŸç‰©ï¼Œæ— æ³•åˆ†ææ›´å¤šé—®é¢˜ã€‚æ‰€ä»¥ä½¿ç”¨ WinDbg è®¾ç½®ç¬¦å·è¡¨ï¼Œæ˜¯å¿…é¡»è¦èµ°çš„ä¸€æ­¥ã€‚</p>
<ul>
<li><p>aã€è¿è¡Œ WinDbg è½¯ä»¶ï¼Œç„¶åæŒ‰ã€Ctrl+Sã€‘å¼¹å‡ºç¬¦å·è¡¨è®¾ç½®çª—ã€‚</p>
</li>
<li><p>bã€å°†ç¬¦å·è¡¨åœ°å€ï¼šSRV<em>C:\Symbols</em></p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://msdl.microsoft.com/download/symbols">http://msdl.microsoft.com/download/symbols</a> ç²˜è´´åœ¨è¾“å…¥æ¡†ä¸­ï¼ˆä¸èƒ½æ¢è¡Œï¼‰ï¼Œç‚¹å‡»ç¡®å®šå³å¯ã€‚ç‚¹å‡»ç¡®å®šä¹‹å‰ï¼Œè¯·å…ˆç¡®è®¤çº¢è‰²å­—çš„æ–‡ä»¶å¤¹æ˜¯å¦å·²è¢«æ–°å»ºã€‚</p>
<p>æ³¨ï¼šçº¢è‰²å­—<code>C:\Symbols</code>è¡¨ç¤ºç¬¦å·è¡¨æœ¬åœ°å­˜å‚¨è·¯å¾„ï¼Œå»ºè®®å›ºå®šè·¯å¾„ï¼Œå¯é¿å…ç¬¦å·è¡¨é‡å¤ä¸‹è½½ã€‚</p>
<h3 id="3ã€å­¦ä¼šæ‰“å¼€ç¬¬ä¸€ä¸ª-Dump-æ–‡ä»¶ï¼"><a href="#3ã€å­¦ä¼šæ‰“å¼€ç¬¬ä¸€ä¸ª-Dump-æ–‡ä»¶ï¼" class="headerlink" title="3ã€å­¦ä¼šæ‰“å¼€ç¬¬ä¸€ä¸ª Dump æ–‡ä»¶ï¼"></a>3ã€å­¦ä¼šæ‰“å¼€ç¬¬ä¸€ä¸ª Dump æ–‡ä»¶ï¼</h3><p>ä½¿ç”¨ã€Ctrl+Dã€‘å¿«æ·é”®ï¼Œæˆ–è€…ç‚¹å‡» WinDbg ç•Œé¢ä¸Šçš„ã€File=&gt;Open Crash Dumpâ€¦ã€‘æŒ‰é’®ï¼Œæ¥æ‰“å¼€ä¸€ä¸ª Dump æ–‡ä»¶ã€‚</p>
<p>å½“ä½ æƒ³æ‰“å¼€ç¬¬äºŒä¸ª Dump æ–‡ä»¶æ—¶ï¼Œå¯èƒ½å› ä¸ºä¸Šä¸€ä¸ªåˆ†æè®°å½•æœªæ¸…é™¤ï¼Œå¯¼è‡´æ— æ³•ç›´æ¥åˆ†æ Dump æ–‡ä»¶ï¼Œæ­¤æ—¶ä½ å¯ä»¥ä½¿ç”¨å¿«æ·é”®ã€Shift+F5ã€‘æ¥å…³é—­ä¸Šä¸€ä¸ªå¯¹ Dump æ–‡ä»¶çš„åˆ†æè®°å½•ã€‚</p>
<p>SOS does not support the current target architecture<br>è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯ç”¨äº†32ä½çš„ä»»åŠ¡ç®¡ç†å™¨æŠ“çš„32ä½çš„dumpæ–‡ä»¶ã€‚<br>éœ€è¦ç”¨64ä½çš„ä»»åŠ¡ç®¡ç†å™¨æŠ“32ä½çš„dumpæ–‡ä»¶ï¼ˆC:\Windows\SysWOW64\taskmgr.exeï¼‰</p>
<h3 id="4ã€é€šè¿‡ç®€å•çš„å‡ ä¸ªå‘½ä»¤å­¦ä¼šåˆ†æ-Dump-æ–‡ä»¶"><a href="#4ã€é€šè¿‡ç®€å•çš„å‡ ä¸ªå‘½ä»¤å­¦ä¼šåˆ†æ-Dump-æ–‡ä»¶" class="headerlink" title="4ã€é€šè¿‡ç®€å•çš„å‡ ä¸ªå‘½ä»¤å­¦ä¼šåˆ†æ Dump æ–‡ä»¶"></a>4ã€é€šè¿‡ç®€å•çš„å‡ ä¸ªå‘½ä»¤å­¦ä¼šåˆ†æ Dump æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.loadby sos clr     &#x2F;&#x2F;é¦–å…ˆåŠ è½½sos</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æˆ–</span><br><span class="line"></span><br><span class="line">.load  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\SOS.dll</span><br><span class="line"></span><br><span class="line">.chain  &#x2F;&#x2F; æ˜¾ç¤ºåŠ è½½çš„æ‰©å±•dll</span><br><span class="line"></span><br><span class="line">!runaway &#x2F;&#x2F; æŸ¥çœ‹çº¿ç¨‹è¿è¡Œæ—¶é—´</span><br><span class="line"></span><br><span class="line">~22s &#x2F;&#x2F; è¿›å…¥çº¿ç¨‹ 22</span><br><span class="line"></span><br><span class="line">!clrstack  &#x2F;&#x2F; æŸ¥çœ‹å½“å‰çº¿ç¨‹å †æ ˆå˜é‡å€¼çš„ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">!dso  &#x2F;&#x2F; æŠŠå½“å‰æ ˆä¸Šæ‰€æœ‰çš„å˜é‡éƒ½æ˜¾ç¤ºå‡ºæ¥</span><br></pre></td></tr></table></figure>

<h4 id="è°ƒè¯•dumpæ­¥éª¤"><a href="#è°ƒè¯•dumpæ­¥éª¤" class="headerlink" title="è°ƒè¯•dumpæ­¥éª¤"></a>è°ƒè¯•dumpæ­¥éª¤</h4><p>å°†dumpæ–‡ä»¶æ‹–å…¥windbg<br>æ‰§è¡Œ.loadby sos clræˆ–.loadby sos mscorwksåŠ è½½æ¨¡å—<br>æ‰§è¡Œ!analyze -v è¿›è¡Œå¼‚å¸¸åˆ†æ</p>
<h4 id="è°ƒè¯•exeæ–‡ä»¶æ­¥éª¤"><a href="#è°ƒè¯•exeæ–‡ä»¶æ­¥éª¤" class="headerlink" title="è°ƒè¯•exeæ–‡ä»¶æ­¥éª¤"></a>è°ƒè¯•exeæ–‡ä»¶æ­¥éª¤</h4><p>Open Executeable..<br>æ‰§è¡Œ sxe ld:clrjit<br>æ‰§è¡Œ g<br>æ‰§è¡Œ.loadby sos clr</p>
<h3 id="5ã€å¸¸ç”¨å‘½ä»¤"><a href="#5ã€å¸¸ç”¨å‘½ä»¤" class="headerlink" title="5ã€å¸¸ç”¨å‘½ä»¤"></a>5ã€å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">.sympath  &#x2F;&#x2F; æ£€æŸ¥sympathæ˜¯å¦æ­£ç¡®</span><br><span class="line"></span><br><span class="line">.sympath srv*c:\Symbols*http:&#x2F;&#x2F;msdl.microsoft.com&#x2F;download&#x2F;symbols</span><br><span class="line"></span><br><span class="line">ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ</span><br><span class="line">.symfix d:\symbols</span><br><span class="line"></span><br><span class="line">!lmi truecrypt  &#x2F;&#x2F; æŸ¥æ‰¾ç›¸åº”çš„æ¨¡å—ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">!sym noisy    &#x2F;&#x2F; æ£€æŸ¥ç¬¦å·è¡¨åŠ è½½è¯¦ç»†æƒ…å†µ</span><br><span class="line"></span><br><span class="line">lm   &#x2F;&#x2F; åˆ—å‡ºæ¨¡å—</span><br><span class="line">lmf  &#x2F;&#x2F; æŒ‡ä»¤åˆ—å‡ºå½“å‰è¿›ç¨‹ä¸­åŠ è½½çš„æ‰€æœ‰DLLæ–‡ä»¶å’Œå¯¹åº”çš„è·¯å¾„</span><br><span class="line">lmvm &#x2F;&#x2F; æŸ¥çœ‹DLL&#x2F;EXEæ–‡ä»¶ä¿¡æ¯ï¼Œå‚æ•°ä¸ºæŸä¸ªdllæ–‡ä»¶åç§°</span><br><span class="line">.loadby sos mscorwks &#x2F;&#x2F; æŒ‡ä»¤ç”¨äºåŠ è½½.Net 3.5ç‰ˆæœ¬åŠä»¥ä¸‹æ¨¡å—</span><br><span class="line">.loadby sos clr &#x2F;&#x2F; æŒ‡ä»¤ç”¨äºåŠ è½½.Net 4.0ç‰ˆæœ¬åŠä»¥ä¸Šæ¨¡å—</span><br><span class="line"></span><br><span class="line">!help sos &#x2F;&#x2F; æŒ‡ä»¤å¸®åŠ©</span><br><span class="line">!threads &#x2F;&#x2F; æ˜¾ç¤ºæ‰€æœ‰çº¿ç¨‹</span><br><span class="line">!address  &#x2F;&#x2F; å†…å­˜ä½¿ç”¨æƒ…å†µ</span><br><span class="line">!threadpool(!tp) &#x2F;&#x2F; æ˜¾ç¤ºç¨‹åºæ± ä¿¡æ¯</span><br><span class="line">!ProcInfo  &#x2F;&#x2F; æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯</span><br><span class="line">!address -summary &#x2F;&#x2F; å†…å­˜æ¦‚å†µ</span><br><span class="line"></span><br><span class="line">!heap  &#x2F;&#x2F; æŸ¥çœ‹è¿›ç¨‹å †</span><br><span class="line"></span><br><span class="line">!load wow64exts</span><br><span class="line"></span><br><span class="line">!sw</span><br><span class="line"></span><br><span class="line">.reload  &#x2F;&#x2F; é‡æ–°åŠ è½½</span><br><span class="line"></span><br><span class="line">.loadby sos mscorwks</span><br><span class="line"></span><br><span class="line">.symfix+ c:\symbols  &#x2F;&#x2F;å¼ºåˆ¶ä¸‹è½½symbols</span><br><span class="line"></span><br><span class="line">.reload &#x2F;f;  &#x2F;&#x2F; Force reloading symbols å¼ºåˆ¶åŠ è½½ç¬¦å·æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">.cordll -ve -u â€“l   &#x2F;&#x2F;é‡æ–°åŠ è½½è°ƒè¯•DLLï¼Œè¿™æ˜¯åŠ è½½DLLï¼Œä¸æ˜¯ç¬¦å·</span><br><span class="line">!dumpheap  &#x2F;&#x2F; æ˜¾ç¤ºæ‰˜ç®¡å †çš„ä¿¡æ¯</span><br><span class="line">!dumpheap -stat  &#x2F;&#x2F;æ£€æŸ¥å½“å‰æ‰€æœ‰æ‰˜ç®¡ç±»å‹çš„ç»Ÿè®¡ä¿¡æ¯</span><br><span class="line">!dumpheap -type Person â€“stat  &#x2F;&#x2F; åœ¨å †ä¸­æŸ¥æ‰¾æŒ‡å®šç±»å‹ï¼ˆpersonï¼‰å¯¹è±¡ï¼Œæ³¨æ„å¤§å°å†™æ•æ„Ÿ</span><br><span class="line">!dumpheap -mt 00007ffdb9386948 -min 200 &#x2F;&#x2F;æŸ¥çœ‹200byteä»¥ä¸Šçš„string</span><br><span class="line">!dumpobj(!do)  &#x2F;&#x2F; æ˜¾ç¤ºä¸€ä¸ªå¯¹è±¡çš„å†…å®¹</span><br><span class="line">!DumpStackObjects(!dso) &#x2F;&#x2F; å½“å‰çº¿ç¨‹å¯¹è±¡åˆ†é…è¿‡ç¨‹</span><br><span class="line">!do 0000021bcbaf5158 &#x2F;&#x2F; ä½¿ç”¨!doå‘½ä»¤æŸ¥çœ‹ä¸€ä¸ªå¯¹è±¡çš„å†…å®¹</span><br><span class="line">!dumparray(!da) &#x2F;&#x2F; æ˜¾ç¤ºæ•°ç»„</span><br><span class="line">!syncblk  &#x2F;&#x2F; æ˜¾ç¤ºåŒæ­¥å—</span><br><span class="line">!runaway  &#x2F;&#x2F; æ˜¾ç¤ºçº¿ç¨‹cpuæ—¶é—´</span><br><span class="line">!gcroot &#x2F;&#x2F; è·Ÿè¸ªå¯¹è±¡å†…å­˜å¼•ç”¨</span><br><span class="line">!gcroot 0000021bcbaf5158 &#x2F;&#x2F;ä½¿ç”¨!gcroot æŸ¥çœ‹ä¸€ä¸ªå¯¹è±¡çš„gcæ ¹</span><br><span class="line"></span><br><span class="line">!DumpObj &#x2F;d 0000021975972b48  &#x2F;&#x2F;æŸ¥çœ‹ç¬¬å¯¹è±¡</span><br><span class="line"></span><br><span class="line">.cordll -ve -u -l</span><br><span class="line"></span><br><span class="line">.chain  &#x2F;&#x2F; æ˜¾ç¤ºåŠ è½½çš„æ‰©å±•dll</span><br><span class="line"></span><br><span class="line">.unload C:\Windows\Microsoft.NET\Framework64\v4.0.30319\sos  &#x2F;&#x2F; å¸è½½</span><br><span class="line"></span><br><span class="line">!threads -live  &#x2F;&#x2F;æŸ¥çœ‹æ‰˜ç®¡çº¿ç¨‹</span><br><span class="line"></span><br><span class="line">!runaway  &#x2F;&#x2F; æŸ¥çœ‹çº¿ç¨‹è¿è¡Œæ—¶é—´</span><br><span class="line"></span><br><span class="line">.loadby sos clr</span><br><span class="line"></span><br><span class="line">!eeversion</span><br><span class="line"></span><br><span class="line">!pe &#x2F;&#x2F; æ‰“å°å¼‚å¸¸</span><br><span class="line">!ObjSize  &#x2F;&#x2F; æŸ¥çœ‹å¯¹è±¡å¤§å°ã€€ObjSize ç”¨äºçŸ¥é“å¯¹è±¡åœ°å€æ—¶ï¼ŒæŸ¥çœ‹è¯¥å¯¹è±¡çš„å¤§å°ã€‚</span><br><span class="line">~#s</span><br><span class="line"></span><br><span class="line">!clrstack &#x2F;&#x2F;æ˜¾ç¤ºè°ƒç”¨æ ˆ,åªæ˜¾ç¤ºæ‰˜ç®¡ä»£ç </span><br><span class="line"></span><br><span class="line">kb &#x2F;&#x2F; æ˜¾ç¤ºå½“å‰çº¿ç¨‹çš„callstack,åªæ˜¾ç¤ºéæ‰˜ç®¡ä»£ç </span><br><span class="line"></span><br><span class="line">~*e !clrstack &#x2F;&#x2F; æ‰€æœ‰çº¿ç¨‹çš„è°ƒç”¨å †æ ˆ</span><br><span class="line">.cls &#x2F;&#x2F; æ¸…å±</span><br><span class="line"></span><br><span class="line">!EEStack -EE</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/57f0ab8702b5">Windbgå¸¸ç”¨å‘½ä»¤</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/sheng-jie/p/9503650.html">https://www.cnblogs.com/sheng-jie/p/9503650.html</a></p>
<p><a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s/R6TrIlxqJVgApFP-V2r0GA">http://mp.weixin.qq.com/s/R6TrIlxqJVgApFP-V2r0GA</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/beanjoy/article/details/39203259">http://blog.csdn.net/beanjoy/article/details/39203259</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/softfair/p/The_version_SOS_not_match_version_of_CLR_PDB_symbol_for_clr_dll_not_loaded.html">http://www.cnblogs.com/softfair/p/The_version_SOS_not_match_version_of_CLR_PDB_symbol_for_clr_dll_not_loaded.html</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/Clingingboy/archive/2013/03/26/2983166.html">http://www.cnblogs.com/Clingingboy/archive/2013/03/26/2983166.html</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/bcbobo21cn/article/details/51683137">http://blog.csdn.net/bcbobo21cn/article/details/51683137</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2017/11/30/CentOS7%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/11/30/CentOS7%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8/" class="post-title-link" itemprop="url">CentOS7æŸ¥çœ‹ç«¯å£å ç”¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-11-30 08:43:46" itemprop="dateCreated datePublished" datetime="2017-11-30T08:43:46+00:00">2017-11-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CentOS7/" itemprop="url" rel="index"><span itemprop="name">CentOS7</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CentOS7æŸ¥çœ‹ç«¯å£å ç”¨"><a href="#CentOS7æŸ¥çœ‹ç«¯å£å ç”¨" class="headerlink" title="CentOS7æŸ¥çœ‹ç«¯å£å ç”¨"></a>CentOS7æŸ¥çœ‹ç«¯å£å ç”¨</h1><h2 id="Linuxå‘½ä»¤"><a href="#Linuxå‘½ä»¤" class="headerlink" title="Linuxå‘½ä»¤"></a>Linuxå‘½ä»¤</h2><p>netstat -nap #ä¼šåˆ—å‡ºæ‰€æœ‰æ­£åœ¨ä½¿ç”¨çš„ç«¯å£åŠå…³è”çš„è¿›ç¨‹/åº”ç”¨</p>
<p>lsof -i :portnumber #portnumberè¦ç”¨å…·ä½“çš„ç«¯å£å·ä»£æ›¿ï¼Œå¯ä»¥ç›´æ¥åˆ—å‡ºè¯¥ç«¯å£å¬ä½¿ç”¨è¿›ç¨‹/åº”ç”¨</p>
<h3 id="æŸ¥çœ‹ç›‘å¬-Listen-çš„ç«¯å£"><a href="#æŸ¥çœ‹ç›‘å¬-Listen-çš„ç«¯å£" class="headerlink" title="æŸ¥çœ‹ç›‘å¬(Listen)çš„ç«¯å£"></a>æŸ¥çœ‹ç›‘å¬(Listen)çš„ç«¯å£</h3><p>netstat -lntp</p>
<h3 id="æ£€æŸ¥ç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨"><a href="#æ£€æŸ¥ç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨" class="headerlink" title="æ£€æŸ¥ç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨"></a>æ£€æŸ¥ç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨</h3><p>netstat -lnp|grep 88   #88è¯·æ¢ä¸ºä½ çš„apacheéœ€è¦çš„ç«¯å£ï¼Œå¦‚ï¼š80</p>
<h3 id="æŸ¥çœ‹è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯"><a href="#æŸ¥çœ‹è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯"></a>æŸ¥çœ‹è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯</h3><p>ps 1777</p>
<h3 id="æ€æ‰è¿›ç¨‹ï¼Œé‡æ–°å¯åŠ¨"><a href="#æ€æ‰è¿›ç¨‹ï¼Œé‡æ–°å¯åŠ¨" class="headerlink" title="æ€æ‰è¿›ç¨‹ï¼Œé‡æ–°å¯åŠ¨"></a>æ€æ‰è¿›ç¨‹ï¼Œé‡æ–°å¯åŠ¨</h3><p>kill -9 1777        #æ€æ‰ç¼–å·ä¸º1777çš„è¿›ç¨‹ï¼ˆè¯·æ ¹æ®å®é™…æƒ…å†µè¾“å…¥ï¼‰</p>
<p>service httpd start #å¯åŠ¨apache</p>
<h3 id="å¼€å¯è¿œç¨‹è®¿é—®ç«¯å£"><a href="#å¼€å¯è¿œç¨‹è®¿é—®ç«¯å£" class="headerlink" title="å¼€å¯è¿œç¨‹è®¿é—®ç«¯å£"></a>å¼€å¯è¿œç¨‹è®¿é—®ç«¯å£</h3><blockquote>
<p>å¼€å¯ç«¯å£ï¼š</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;6379&#x2F;tcp --permanent</span><br></pre></td></tr></table></figure>

<p>å‘½ä»¤å«ä¹‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--zone #ä½œç”¨åŸŸ</span><br><span class="line"></span><br><span class="line">--add-port&#x3D;27017&#x2F;tcp #æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£&#x2F;é€šè®¯åè®®</span><br><span class="line"></span><br><span class="line">--permanent #æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ</span><br></pre></td></tr></table></figure>

<blockquote>
<p>é‡å¯é˜²ç«å¢™</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload  #é‡å¯é˜²ç«å¢™</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2017/11/30/CentOS7%E4%BF%AE%E6%94%B9%E9%9D%99%E6%80%81IP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/11/30/CentOS7%E4%BF%AE%E6%94%B9%E9%9D%99%E6%80%81IP/" class="post-title-link" itemprop="url">CentOS7ä¿®æ”¹é™æ€IP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-11-30 08:30:10" itemprop="dateCreated datePublished" datetime="2017-11-30T08:30:10+00:00">2017-11-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CentOS7/" itemprop="url" rel="index"><span itemprop="name">CentOS7</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CentOS7ä¿®æ”¹é™æ€IP"><a href="#CentOS7ä¿®æ”¹é™æ€IP" class="headerlink" title="CentOS7ä¿®æ”¹é™æ€IP"></a>CentOS7ä¿®æ”¹é™æ€IP</h1><h2 id="è¿›å…¥ç»ˆç«¯"><a href="#è¿›å…¥ç»ˆç«¯" class="headerlink" title="è¿›å…¥ç»ˆç«¯"></a>è¿›å…¥ç»ˆç«¯</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost toor]# cd &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts</span><br><span class="line">[root@localhost network-scripts]# ls</span><br><span class="line">ifcfg-eno16777736         ifdown-isdn      ifup-eth     ifup-Team</span><br><span class="line">ifcfg-eno16777736-1       ifdown-post      ifup-ib      ifup-TeamPort</span><br><span class="line">ifcfg-eno16777736.6BOP8P  ifdown-ppp       ifup-ippp    ifup-tunnel</span><br><span class="line">ifcfg-lo                  ifdown-routes    ifup-ipv6    ifup-wireless</span><br><span class="line">ifcfg-Wired_connection_1  ifdown-sit       ifup-isdn    init.ipv6-global</span><br><span class="line">ifdown                    ifdown-Team      ifup-plip    network-functions</span><br><span class="line">ifdown-bnep               ifdown-TeamPort  ifup-plusb   network-functions-ipv6</span><br><span class="line">ifdown-eth                ifdown-tunnel    ifup-post    route-eno16777736-1</span><br><span class="line">ifdown-ib                 ifup             ifup-ppp</span><br><span class="line">ifdown-ippp               ifup-aliases     ifup-routes</span><br><span class="line">ifdown-ipv6               ifup-bnep        ifup-sit</span><br><span class="line">[root@localhost network-scripts]# vim ifcfg-eno16777736</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">TYPE&#x3D;Ethernet</span><br><span class="line">BOOTPROTO&#x3D;static #dhcpæ”¹ä¸ºstatic</span><br><span class="line">DEFROUTE&#x3D;yes</span><br><span class="line">PEERDNS&#x3D;yes</span><br><span class="line">PEERROUTES&#x3D;yes</span><br><span class="line">IPV4_FAILURE_FATAL&#x3D;no</span><br><span class="line">IPV6INIT&#x3D;yes</span><br><span class="line">IPV6_AUTOCONF&#x3D;yes</span><br><span class="line">IPV6_DEFROUTE&#x3D;yes</span><br><span class="line">IPV6_PEERDNS&#x3D;yes</span><br><span class="line">IPV6_PEERROUTES&#x3D;yes</span><br><span class="line">IPV6_FAILURE_FATAL&#x3D;no</span><br><span class="line">NAME&#x3D;eno16777736</span><br><span class="line">UUID&#x3D;7b7f487c-4a01-464b-9587-dae9daca6bc9</span><br><span class="line">DEVICE&#x3D;eno16777736</span><br><span class="line">ONBOOT&#x3D;yes</span><br><span class="line">IPADDR&#x3D;192.168.0.122 #é™æ€IP</span><br><span class="line">GATEWAY&#x3D;192.168.0.1 #é»˜è®¤ç½‘å…³</span><br><span class="line">NETMASK&#x3D;255.255.255.0 #å­ç½‘æ©ç </span><br></pre></td></tr></table></figure>

<p>é‡å¯ç½‘ç»œæœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service network restart</span><br></pre></td></tr></table></figure>

<p>è‹¥å‡ºç°é‡å¯å¤±è´¥çš„è¯ï¼Œå¯ä»¥è¯•ç€æŠŠifcfg-enoæ–‡ä»¶é‡Œçš„DEVICEä¸€è¡Œåˆ é™¤è¯•è¯•</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2017/09/15/CentOS7-PostGresqlSql%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcodeåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/09/15/CentOS7-PostGresqlSql%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">CentOS7-PostGresqlSql9.6å®‰è£…</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2017-09-15 14:35:18" itemprop="dateCreated datePublished" datetime="2017-09-15T14:35:18+00:00">2017-09-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-22 09:35:48" itemprop="dateModified" datetime="2020-10-22T09:35:48+00:00">2020-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/PostGresqlSql/" itemprop="url" rel="index"><span itemprop="name">PostGresqlSql</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h2><p><a target="_blank" rel="noopener" href="https://www.postgresql.org/download/linux/redhat/" title="é“¾æ¥">å®˜ç½‘æ–‡æ¡£</a></p>
<p>æ³¨: rootè´¦æˆ·å®‰è£…</p>
<h3 id="æ·»åŠ RPM"><a href="#æ·»åŠ RPM" class="headerlink" title="æ·»åŠ RPM"></a>æ·»åŠ RPM</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install https:&#x2F;&#x2F;download.postgresql.org&#x2F;pub&#x2F;repos&#x2F;yum&#x2F;9.6&#x2F;redhat&#x2F;rhel-7-x86_64&#x2F;pgdg-centos96-9.6-3.noarch.rpm</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…PostgreSQL"><a href="#å®‰è£…PostgreSQL" class="headerlink" title="å®‰è£…PostgreSQL"></a>å®‰è£…PostgreSQL</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install postgresql96         ##å®¢æˆ·ç«¯åŒ…##</span><br><span class="line">yum install postgresql96-server  ##æœåŠ¡ç«¯åŒ…##</span><br></pre></td></tr></table></figure>

<p>å®‰è£…è¿‡ç¨‹å‡ºç°é—®é¢˜ï¼Œå¯èƒ½ä¼šå¯¼è‡´åˆå§‹åŒ–æ•°æ®åº“é”™è¯¯é”™è¯¯ï¼Œå¦‚ä¸‹ï¼š</p>
<p>è§£å†³æ–¹æ³•ï¼šé‡æ–°æ‰§è¡Œå‘½ä»¤ <code>yum install postgresql96-server</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@iz2zeii3e4srrxcoy1gbubz ~]# &#x2F;usr&#x2F;pgsql-9.6&#x2F;bin&#x2F;postgresql96-setup initdb</span><br><span class="line">-bash: &#x2F;usr&#x2F;pgsql-9.6&#x2F;bin&#x2F;postgresql96-setup: No such file or directory</span><br></pre></td></tr></table></figure>

<h3 id="åˆå§‹åŒ–æ•°æ®åº“-å…è®¸è‡ªåŠ¨å¯åŠ¨"><a href="#åˆå§‹åŒ–æ•°æ®åº“-å…è®¸è‡ªåŠ¨å¯åŠ¨" class="headerlink" title="åˆå§‹åŒ–æ•°æ®åº“,å…è®¸è‡ªåŠ¨å¯åŠ¨"></a>åˆå§‹åŒ–æ•°æ®åº“,å…è®¸è‡ªåŠ¨å¯åŠ¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;pgsql-9.6&#x2F;bin&#x2F;postgresql96-setup initdb</span><br><span class="line">systemctl enable postgresql-9.6</span><br><span class="line">systemctl start postgresql-9.6</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>PostgreSQL å®‰è£…å®Œæˆåï¼Œä¼šå»ºç«‹ä¸€ä¸‹â€˜postgresâ€™ç”¨æˆ·ï¼Œç”¨äºæ‰§è¡ŒPostgreSQLï¼Œæ•°æ®åº“ä¸­ä¹Ÿä¼šå»ºç«‹ä¸€ä¸ªâ€™postgresâ€™ç”¨æˆ·ï¼Œé»˜è®¤å¯†ç ä¸ºè‡ªåŠ¨ç”Ÿæˆï¼Œéœ€è¦åœ¨ç³»ç»Ÿä¸­æ”¹ä¸€ä¸‹ã€‚</p>
<h3 id="ä¿®æ”¹é»˜è®¤å¯†ç "><a href="#ä¿®æ”¹é»˜è®¤å¯†ç " class="headerlink" title="ä¿®æ”¹é»˜è®¤å¯†ç "></a>ä¿®æ”¹é»˜è®¤å¯†ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">su - postgresÂ  ##åˆ‡æ¢ç”¨æˆ·ï¼Œæ‰§è¡Œåæç¤ºç¬¦ä¼šå˜ä¸º &#39;-bash-4.2$&#39;</span><br><span class="line">psql -U postgres ##ç™»å½•æ•°æ®åº“ï¼Œæ‰§è¡Œåæç¤ºç¬¦å˜ä¸º &#39;postgres&#x3D;#&#39;</span><br><span class="line">ALTER USER postgres WITH PASSWORD &#39;abc123&#39;Â ## è®¾ç½®postgresç”¨æˆ·å¯†ç </span><br><span class="line">\qÂ       ##é€€å‡ºæ•°æ®åº“</span><br><span class="line">exit     ##é€€å‡º</span><br></pre></td></tr></table></figure>

<h3 id="å¼€å¯è¿œç¨‹è®¿é—®"><a href="#å¼€å¯è¿œç¨‹è®¿é—®" class="headerlink" title="å¼€å¯è¿œç¨‹è®¿é—®"></a>å¼€å¯è¿œç¨‹è®¿é—®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;var&#x2F;lib&#x2F;pgsql&#x2F;9.6&#x2F;data&#x2F;postgresql.conf</span><br></pre></td></tr></table></figure>

<p> ä¿®æ”¹#listen_addresses = â€˜localhostâ€™ ä¸º  listen_addresses=â€™*â€™</p>
<p> å½“ç„¶ï¼Œæ­¤å¤„â€˜*â€™ä¹Ÿå¯ä»¥æ”¹ä¸ºä»»ä½•ä½ æƒ³å¼€æ”¾çš„æœåŠ¡å™¨IP</p>
<h3 id="ä¿¡ä»»è¿œç¨‹è¿æ¥"><a href="#ä¿¡ä»»è¿œç¨‹è¿æ¥" class="headerlink" title="ä¿¡ä»»è¿œç¨‹è¿æ¥"></a>ä¿¡ä»»è¿œç¨‹è¿æ¥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;var&#x2F;lib&#x2F;pgsql&#x2F;9.6&#x2F;data&#x2F;pg_hba.conf</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹å¦‚ä¸‹å†…å®¹ï¼Œä¿¡ä»»æŒ‡å®šæœåŠ¡å™¨è¿æ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># IPv4 local connections:</span><br><span class="line">hostÂ  Â  allÂ  Â  Â   allÂ  Â  Â  127.0.0.1&#x2F;32Â  Â  Â  trust</span><br><span class="line">hostÂ  Â  allÂ  Â  Â  Â allÂ  Â  Â  10.211.55.6&#x2F;32ï¼ˆéœ€è¦è¿æ¥çš„æœåŠ¡å™¨IPï¼‰Â  trust</span><br></pre></td></tr></table></figure>

<h3 id="æ‰“å¼€é˜²ç«å¢™"><a href="#æ‰“å¼€é˜²ç«å¢™" class="headerlink" title="æ‰“å¼€é˜²ç«å¢™"></a>æ‰“å¼€é˜²ç«å¢™</h3><p>CentOS é˜²ç«å¢™ä¸­å†…ç½®äº†PostgreSQLæœåŠ¡ï¼Œé…ç½®æ–‡ä»¶ä½ç½®åœ¨</p>
<p>/usr/lib/firewalld/services/postgresql.xmlï¼Œ</p>
<p>æˆ‘ä»¬åªéœ€ä»¥æœåŠ¡æ–¹å¼å°†PostgreSQLæœåŠ¡å¼€æ”¾å³å¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-service&#x3D;postgresql --permanentÂ  å¼€æ”¾postgresqlæœåŠ¡</span><br><span class="line">firewall-cmd --reloadÂ  é‡è½½é˜²ç«å¢™</span><br></pre></td></tr></table></figure>

<h3 id="é‡å¯æœåŠ¡"><a href="#é‡å¯æœåŠ¡" class="headerlink" title="é‡å¯æœåŠ¡"></a>é‡å¯æœåŠ¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart postgresql-9.6.service</span><br></pre></td></tr></table></figure>

<h2 id="å¼€å‘å¤‡æ³¨"><a href="#å¼€å‘å¤‡æ³¨" class="headerlink" title="å¼€å‘å¤‡æ³¨"></a>å¼€å‘å¤‡æ³¨</h2><p>æœ¬åœ°æœåŠ¡å™¨è¿æ¥æ•°æ®åº“å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OperationalError: FATAL: Ident authentication failed for user â€œdbuserâ€</span><br></pre></td></tr></table></figure>

<p>å‡ºç°è¿™ä¸ªé”™è¯¯çš„åŸå› è¿˜æ˜¯åœ¨äºä¸Šé¢pg_hba.conf æ–‡ä»¶çš„è®¾ç½®ï¼ŒDebianç³»ï¼ˆåŒ…æ‹¬ubuntuï¼‰é»˜è®¤çš„pg_hba.conf æ–‡ä»¶å¯¹äº</p>
<p>localhostæœ¬åœ°æœºå™¨çš„æ•°æ®åº“è®¿é—®æ–¹å¼æ˜¯identï¼Œå®ƒæŒ‡çš„æ˜¯åªæœ‰Linux shellç”¨æˆ·é€šè¿‡åŒåçš„postgreSQL ç”¨æˆ·æ‰èƒ½è®¿é—®ï¼Œ</p>
<p>ä¹Ÿå°±æ˜¯pgè¶…çº§ç”¨æˆ·postgres åªèƒ½ç”±linux ç”¨æˆ·postgres ç™»å½•åæ“ä½œã€‚</p>
<p>â€œpostgresâ€çš„é—®é¢˜ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼š</p>
<ul>
<li><p>åœ¨æ‰§è¡Œ$ python manage.py shellä¹‹å‰å…ˆ$su postgres åˆ‡æ¢ä¸ºpostgres ç”¨æˆ·</p>
</li>
<li><p>ä¿®æ”¹pg_hba.conf çš„å®¢æˆ·ç«¯è®¿é—®è®¾ç½®ï¼Œå°†laocal çš„è®¿é—®ç”±ident æ”¹ä¸ºtrustï¼Œå¦‚ï¼š</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># TYPE DATABASE USER CIDR-ADDRESS METHOD</span><br><span class="line">local all all trust</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹å®Œpg_hba.confè®¾ç½®è®°å¾—é‡å¯pgã€‚å®‰è£…äº†pg_ctl ä¹Ÿå¯ä»¥ç”¨pg_ctl reloadã€‚</p>
<p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.postgresql.org/download/linux/redhat/" title="é“¾æ¥">å®˜ç½‘æ–‡æ¡£</a></p>
<p><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/7e95fd0bc91a" title="é“¾æ¥">http://www.jianshu.com/p/7e95fd0bc91a</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/mchina/archive/2012/06/06/2539003.html" title="é“¾æ¥">http://www.cnblogs.com/mchina/archive/2012/06/06/2539003.html</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/wang1144/article/details/8986479" title="æœ¬åœ°è¿æ¥é”™è¯¯">http://blog.csdn.net/wang1144/article/details/8986479</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/19/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/21/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">syxdevcode</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">320</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">103</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">135</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/syxdevcode" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;syxdevcode" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">syxdevcode</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
