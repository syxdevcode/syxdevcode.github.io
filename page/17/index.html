<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"syxdevcode.github.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="syxdevcode博客">
<meta property="og:url" content="https://syxdevcode.github.com/page/17/index.html">
<meta property="og:site_name" content="syxdevcode博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="syxdevcode">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://syxdevcode.github.com/page/17/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>syxdevcode博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">syxdevcode博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/syxdevcode" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/04/25/WCF%E6%8E%A5%E5%8F%A3%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B%E5%BA%8F%E5%88%97%E5%8C%96%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/25/WCF%E6%8E%A5%E5%8F%A3%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B%E5%BA%8F%E5%88%97%E5%8C%96%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">WCF接口时间类型序列化问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-25 13:30:37" itemprop="dateCreated datePublished" datetime="2019-04-25T13:30:37+00:00">2019-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/WCF%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B%E5%BA%8F%E5%88%97%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">WCF时间类型序列化</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WCF接口时间类型序列化问题"><a href="#WCF接口时间类型序列化问题" class="headerlink" title="WCF接口时间类型序列化问题"></a>WCF接口时间类型序列化问题</h1><p>使用 <code>Json.Net</code> 序列化或者反序列化 <code>DateTime</code> 类型时，通过设置 <code>JsonSerializerSettings</code> 对象，即可支持 WCF 时间类型，示例如下：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WCFModel</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> DateTime CreatedDate &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">WCFDateTimeConvert</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    WCFModel p = <span class="keyword">new</span> WCFModel &#123; CreatedDate = TimeZone.CurrentTimeZone.ToLocalTime(DateTime.UtcNow) &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> settings = <span class="keyword">new</span> JsonSerializerSettings</span><br><span class="line">    &#123;</span><br><span class="line">        DateFormatHandling = DateFormatHandling.MicrosoftDateFormat</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> json = JsonConvert.SerializeObject(p, settings);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> dObj = JsonConvert.DeserializeObject&lt;WCFModel&gt;(json, settings);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体实现源码路径 <code>Newtonsoft.Json\Utilities</code> 第635行：</p>
<p>Json.Net 源码地址：<a target="_blank" rel="noopener" href="https://github.com/JamesNK/Newtonsoft.Json/blob/master/Src/Newtonsoft.Json/Utilities/DateTimeUtils.cs">https://github.com/JamesNK/Newtonsoft.Json/blob/master/Src/Newtonsoft.Json/Utilities/DateTimeUtils.cs</a></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">internal</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">WriteDateTimeString</span>(<span class="params"><span class="built_in">char</span>[] chars, <span class="built_in">int</span> start, DateTime <span class="keyword">value</span>, TimeSpan? offset, DateTimeKind kind, DateFormatHandling format</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">int</span> pos = start;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (format == DateFormatHandling.MicrosoftDateFormat)</span><br><span class="line">    &#123;</span><br><span class="line">        TimeSpan o = offset ?? <span class="keyword">value</span>.GetUtcOffset();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">long</span> javaScriptTicks = ConvertDateTimeToJavaScriptTicks(<span class="keyword">value</span>, o);</span><br><span class="line"></span><br><span class="line">        <span class="string">@&quot;\/Date(&quot;</span>.CopyTo(<span class="number">0</span>, chars, pos, <span class="number">7</span>);</span><br><span class="line">        pos += <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> ticksText = javaScriptTicks.ToString(CultureInfo.InvariantCulture);</span><br><span class="line">        ticksText.CopyTo(<span class="number">0</span>, chars, pos, ticksText.Length);</span><br><span class="line">        pos += ticksText.Length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (kind)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> DateTimeKind.Unspecified:</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">value</span> != DateTime.MaxValue &amp;&amp; <span class="keyword">value</span> != DateTime.MinValue)</span><br><span class="line">                &#123;</span><br><span class="line">                    pos = WriteDateTimeOffset(chars, pos, o, format);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DateTimeKind.Local:</span><br><span class="line">                pos = WriteDateTimeOffset(chars, pos, o, format);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="string">@&quot;)\/&quot;</span>.CopyTo(<span class="number">0</span>, chars, pos, <span class="number">3</span>);</span><br><span class="line">        pos += <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        pos = WriteDefaultIsoDate(chars, pos, <span class="keyword">value</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (kind)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> DateTimeKind.Local:</span><br><span class="line">                pos = WriteDateTimeOffset(chars, pos, offset ?? <span class="keyword">value</span>.GetUtcOffset(), format);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DateTimeKind.Utc:</span><br><span class="line">                chars[pos++] = <span class="string">&#x27;Z&#x27;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/04/23/%E6%97%B6%E9%97%B4%E6%88%B3%E4%B8%8E%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/23/%E6%97%B6%E9%97%B4%E6%88%B3%E4%B8%8E%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2/" class="post-title-link" itemprop="url">时间戳与时间格式转换</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-23 15:16:33" itemprop="dateCreated datePublished" datetime="2019-04-23T15:16:33+00:00">2019-04-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%B6%E9%97%B4-%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%8D%A2/" itemprop="url" rel="index"><span itemprop="name">时间/时间戳转换</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="时间戳与时间格式转换"><a href="#时间戳与时间格式转换" class="headerlink" title="时间戳与时间格式转换"></a>时间戳与时间格式转换</h1><h2 id="时间戳简介"><a href="#时间戳简介" class="headerlink" title="时间戳简介"></a>时间戳简介</h2><p><font color=#ff0000 size=4 face="黑体">JavaScript时间戳总毫秒数(长度13)，Unix时间戳是总秒数(长度10)。</font></p>
<p>** 格林威治时间 UTC<strong>： 1970年01月01日00时00分00秒<br>** 北京时间 Local</strong>：1970年01月01日<font color=#ff0000 size=4 face="黑体">08</font>时00分00秒</p>
<h2 id="JavaScript时间戳转换"><a href="#JavaScript时间戳转换" class="headerlink" title="JavaScript时间戳转换"></a>JavaScript时间戳转换</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="built_in">console</span>.log(date);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一种</span></span><br><span class="line">time1 = date.getTime();</span><br><span class="line"><span class="built_in">console</span>.log(time1)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种</span></span><br><span class="line">time2 = date.valueOf();</span><br><span class="line"><span class="built_in">console</span>.log(time2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三种</span></span><br><span class="line">time3 = <span class="built_in">Date</span>.parse(date);</span><br><span class="line"><span class="built_in">console</span>.log(time3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> date1 = <span class="keyword">new</span> <span class="built_in">Date</span>(time1);</span><br><span class="line">Y = date.getFullYear() + <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">M = (date.getMonth()+<span class="number">1</span> &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span>+(date.getMonth()+<span class="number">1</span>) : date.getMonth()+<span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">D = date.getDate() + <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">h = date.getHours() + <span class="string">&#x27;:&#x27;</span>;</span><br><span class="line">m = date.getMinutes() + <span class="string">&#x27;:&#x27;</span>;</span><br><span class="line">s = date.getSeconds(); </span><br><span class="line"><span class="built_in">console</span>.log(Y+M+D+h+m+s);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出：</span></span><br><span class="line"><span class="comment">// 第一，第二种更精确，第三种只精确到秒</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Tue Apr 23 2019 17:27:21 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="comment">1556011641157</span></span><br><span class="line"><span class="comment">1556011641157</span></span><br><span class="line"><span class="comment">1556011641000</span></span><br><span class="line"><span class="comment">2019-04-23 17:27:21</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>** Date()参数形式有7种**</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;month dd,yyyy hh:mm:ss&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;month dd,yyyy&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;yyyy/MM/dd hh:mm:ss&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;yyyy/MM/dd&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(yyyy,mth,dd,hh,mm,ss);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(yyyy,mth,dd);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(ms);</span><br></pre></td></tr></table></figure>

<h2 id="CSharp时间戳转换"><a href="#CSharp时间戳转换" class="headerlink" title="CSharp时间戳转换"></a>CSharp时间戳转换</h2><h3 id="Unix时间戳转换"><a href="#Unix时间戳转换" class="headerlink" title="Unix时间戳转换"></a>Unix时间戳转换</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> DateTime转换为Unix时间戳</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">long</span> <span class="title">GetUnixTimeStamp</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    System.DateTime startTime = TimeZone.CurrentTimeZone.ToLocalTime(<span class="keyword">new</span> System.DateTime(<span class="number">1970</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, DateTimeKind.Utc));</span><br><span class="line">    <span class="built_in">long</span> timeStamp = (<span class="built_in">long</span>)(TimeZone.CurrentTimeZone.ToLocalTime(DateTime.UtcNow) - startTime).TotalSeconds; <span class="comment">// 相差秒数</span></span><br><span class="line">    <span class="keyword">return</span> timeStamp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 获取本地时间的Unix时间戳</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;time&quot;&gt;</span>本地时间<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> var dt = new DateTime(2019, 4, 30, 15, 30, 00, DateTimeKind.Local);</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">long</span> <span class="title">GetUnixTimeStamp</span>(<span class="params">DateTime time</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    System.DateTime startTime = TimeZone.CurrentTimeZone.ToLocalTime(<span class="keyword">new</span> System.DateTime(<span class="number">1970</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, DateTimeKind.Utc));</span><br><span class="line">    <span class="built_in">long</span> timeStamp = (<span class="built_in">long</span>)(time - startTime).TotalSeconds; <span class="comment">// 相差秒数</span></span><br><span class="line">    <span class="keyword">return</span> timeStamp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> Unix时间戳转换为DateTime</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DateTime <span class="title">GetDateTimeByUnix</span>(<span class="params"><span class="built_in">long</span> timeStamp</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    System.DateTime startTime = TimeZone.CurrentTimeZone.ToLocalTime(<span class="keyword">new</span> System.DateTime(<span class="number">1970</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, DateTimeKind.Utc));</span><br><span class="line">    DateTime dt = startTime.AddSeconds(timeStamp);</span><br><span class="line">    <span class="keyword">return</span> dt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line"><span class="keyword">var</span> timeStamp1= GetUnixTimeStamp();</span><br><span class="line">Console.WriteLine(timeStamp1);</span><br><span class="line"><span class="keyword">var</span> dt1 = GetDateTimeByUnix(timeStamp1);</span><br><span class="line">System.Console.WriteLine(dt1.ToString(<span class="string">&quot;yyyy/MM/dd HH:mm:ss&quot;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="JavaScript时间戳转换-1"><a href="#JavaScript时间戳转换-1" class="headerlink" title="JavaScript时间戳转换"></a>JavaScript时间戳转换</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> DateTime转换为JavaScript时间戳</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">long</span> <span class="title">GetJavaScriptTimeStamp</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    System.DateTime startTime = TimeZone.CurrentTimeZone.ToLocalTime(<span class="keyword">new</span> System.DateTime(<span class="number">1970</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, DateTimeKind.Utc));</span><br><span class="line">    <span class="built_in">long</span> timeStamp = (<span class="built_in">long</span>)(TimeZone.CurrentTimeZone.ToLocalTime(DateTime.UtcNow) - startTime).TotalMilliseconds; <span class="comment">// 相差毫秒数</span></span><br><span class="line">    <span class="keyword">return</span> timeStamp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> JavaScript时间戳转换为DateTime</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DateTime <span class="title">GetDateTimeByJavaScript</span>(<span class="params"><span class="built_in">long</span> timeStamp</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    System.DateTime startTime = TimeZone.CurrentTimeZone.ToLocalTime(<span class="keyword">new</span> System.DateTime(<span class="number">1970</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, DateTimeKind.Utc));</span><br><span class="line">    DateTime dt = startTime.AddMilliseconds(timeStamp);</span><br><span class="line">    <span class="keyword">return</span> dt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line"><span class="keyword">var</span> timeStamp = GetJavaScriptTimeStamp();</span><br><span class="line">Console.WriteLine(timeStamp);</span><br><span class="line"><span class="keyword">var</span> dt = GetDateTimeByJavaScript(timeStamp);</span><br><span class="line">System.Console.WriteLine(dt.ToString(<span class="string">&quot;yyyy/MM/dd HH:mm:ss.fff&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/19971494/how-to-deserialize-a-unix-timestamp-%CE%BCs-to-a-datetime-from-json">How to deserialize a unix timestamp (μs) to a DateTime from JSON?</a></p>
<p><a target="_blank" rel="noopener" href="http://www.w3school.com.cn/jsref/jsref_obj_date.asp">JavaScript Date 对象</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/polk6/p/6024892.html">C# DateTime与时间戳转换</a></p>
<p><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/tryrun/runcode?lang=javascript">JavaScript在线测试</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/04/22/IIS7-5%E4%B9%8BApplicationPoolIdentify%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/22/IIS7-5%E4%B9%8BApplicationPoolIdentify%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">IIS7.5之ApplicationPoolIdentify详解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-22 16:06:28" itemprop="dateCreated datePublished" datetime="2019-04-22T16:06:28+00:00">2019-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ApplicationPoolIdentify/" itemprop="url" rel="index"><span itemprop="name">ApplicationPoolIdentify</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="IIS7-5之ApplicationPoolIdentify详解"><a href="#IIS7-5之ApplicationPoolIdentify详解" class="headerlink" title="IIS7.5之ApplicationPoolIdentify详解"></a>IIS7.5之ApplicationPoolIdentify详解</h1><p><code>ApplicationPoolIdentify</code> 在 Windows Server 2008 和 Windows Vista 的 Service Pack 2（SP2）和更高版本的Windows引入的强大的新隔离功能，IIS7.5中首次引用。其它三种包括 <code>LocalService</code> , <code>LocalSystem</code>,<code>NetWorkService</code>。</p>
<p><code>ApplicationPoolIdentify</code> 允许在唯一帐户下运行应用程序池，而无需创建和管理域或本地帐户。应用程序池帐户的名称对应于应用程序池的名称。</p>
<p>下图显示了作为DefaultAppPool标识运行的IIS工作进程（W3wp.exe）。</p>
<p><img src="/img/image3.jpg" alt="image3.jpg"></p>
<p>Windows操作系统提供称为“虚拟帐户”的功能，允许IIS为其每个应用程序池创建唯一标识。</p>
<h2 id="配置IIS-ApplicationPoolIdentify"><a href="#配置IIS-ApplicationPoolIdentify" class="headerlink" title="配置IIS ApplicationPoolIdentify"></a>配置IIS ApplicationPoolIdentify</h2><p>如果在Windows Server 2008 R2或更高版本的IIS上运行IIS 7.5，则无需执行任何操作即可使用新标识。创建的每个应用程序池，默认情况下，新应用程序池的Identity属性设置为ApplicationPoolIdentity。IIS管理进程（WAS）将创建一个具有新应用程序池名称的虚拟帐户，并默认在此帐户下运行应用程序池的工作进程。</p>
<p>要在Windows Server 2008上运行IIS 7.0时使用此虚拟帐户，必须将创建的应用程序池的Identity属性更改为<code>ApplicationPoolIdentity</code>。</p>
<p>方法:</p>
<p>1，打开IIS管理控制台（INETMGR.MSC）<br>2，打开计算机节点下的“应用程序池”节点。选择要更改为在自动生成的应用程序池标识下运行的应用程序池。<br>3，右键单击应用程序池，然后选择高级设置。</p>
<p><img src="/img/image6.jpg" alt="image6.jpg"></p>
<p>4，选择标识列表项，然后单击省略号（带有三个点的按钮）。<br>5，出现以下对话框</p>
<p><img src="/img/image8.jpg" alt="image8.jpg"></p>
<p>6,选择内置帐户按钮，然后从组合框中选择标识类型ApplicationPoolIdentity。</p>
<p>要使用命令行执行相同的步骤，可以通过以下方式调用appcmd命令行工具：</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%windir%\system32\inetsrv\appcmd.exe <span class="built_in">set</span> AppPool &lt;your AppPool&gt; <span class="literal">-processModel</span>.identityType:ApplicationPoolIdentity</span><br></pre></td></tr></table></figure>

<h2 id="确保资源安全"><a href="#确保资源安全" class="headerlink" title="确保资源安全"></a>确保资源安全</h2><p>每当创建新的应用程序池时，IIS管理进程都会创建一个安全标识符（SID），该标识符表示应用程序池本身的名称。例如，如果创建名为“MyNewAppPool”的应用程序池，则会在Windows安全系统中创建名为“MyNewAppPool”的安全标识符。从现在开始，可以使用此标识来保护资源。但是，身份不是真实的用户帐户; 它不会在Windows用户管理控制台中显示为用户。</p>
<p>我们可以通过在Windows资源管理器中选择一个文件并将“DefaultAppPool”标识添加到文件的访问控制列表（ACL）来尝试此操作。</p>
<p>1，打开Windows资源管理器<br>2，选择文件或目录。<br>3，右键单击该文件并选择”属性”<br>4，选择”安全”选项卡<br>5，单击编辑按钮，然后单击添加按钮<br>6，单击”位置”按钮，确保选择计算机。</p>
<p><img src="/img/image11.jpg" alt="image11.jpg"></p>
<p>7，在输入要选择的对象名称：文本框中输入 <code>IIS AppPool\DefaultAppPool</code>。<br>8，单击”检查名称”按钮，然后单击“ 确定”。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/iis/manage/configuring-security/application-pool-identities">Application Pool Identities</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/jfzhu/p/4067297.html">IIS ApplicationPoolIdentity</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/yjmyzz/archive/2009/10/26/1590033.html">IIS7.5中神秘的ApplicationPoolIdentity </a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/04/16/Chrome%E6%8F%92%E4%BB%B6%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/16/Chrome%E6%8F%92%E4%BB%B6%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">Chrome插件记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-16 15:19:15" itemprop="dateCreated datePublished" datetime="2019-04-16T15:19:15+00:00">2019-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Chrome/" itemprop="url" rel="index"><span itemprop="name">Chrome</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Chrome插件记录"><a href="#Chrome插件记录" class="headerlink" title="Chrome插件记录"></a>Chrome插件记录</h1><h2 id="uBlock-Origin"><a href="#uBlock-Origin" class="headerlink" title="uBlock Origin"></a>uBlock Origin</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/ublock-origin/cjpalhdlnbpafiamejdnhcphjbkeiagm?utm_source=chrome-ntp-icon">uBlock Origin</a></p>
<p>一款高效的网络请求过滤工具，占用极低的内存和 CPU。</p>
<h2 id="Tampermonkey"><a href="#Tampermonkey" class="headerlink" title="Tampermonkey"></a>Tampermonkey</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=zh-CN">Tampermonkey</a></p>
<p>中文俗称油猴，它其实是一个脚本仓库，提供了各式各样的脚本，通过这些脚本，可以完成很多强大的功能，比如去广告，下载百度云盘大文件。</p>
<h2 id="GitCodeTree"><a href="#GitCodeTree" class="headerlink" title="GitCodeTree"></a>GitCodeTree</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/gitcodetree/inaaldjpdbkaodlmdcplgpoibohcmmlj?utm_source=chrome-ntp-icon">GitCodeTree</a></p>
<p>一个浏览器插件，在Gitee、GitHub上显示代码树。不用clone到本地就能查看项目结构。</p>
<h2 id="Postman"><a href="#Postman" class="headerlink" title="Postman"></a>Postman</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop">Postman</a></p>
<p>这是一款强大的 API &amp; HTTP 请求调试工具，它不仅可以调试简单的 HTML、CSS 以及脚本等简单的网页基本信息，这款 Chrome 插件甚至还能发送几乎所有的 HTTP 请求，可谓是 Web 开发者的一大利器。</p>
<h2 id="WEB前端助手-FeHelper"><a href="#WEB前端助手-FeHelper" class="headerlink" title="WEB前端助手(FeHelper)"></a>WEB前端助手(FeHelper)</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/web%E5%89%8D%E7%AB%AF%E5%8A%A9%E6%89%8Bfehelper/pkgccpejnmalmdinmhkkfafefagiiiad?utm_campaign=en">WEB前端助手(FeHelper)</a></p>
<h2 id="阅读模式"><a href="#阅读模式" class="headerlink" title="阅读模式"></a>阅读模式</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/reader-view/iibolhpkjjmoepndefdmdlmbpfhlgjpl/related">阅读模式</a></p>
<h2 id="Git-History-Browser-Extension"><a href="#Git-History-Browser-Extension" class="headerlink" title="Git History Browser Extension"></a>Git History Browser Extension</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/git-history-browser-exten/laghnmifffncfonaoffcndocllegejnf">Git History Browser Extension</a></p>
<p>在 GitHub 中，显示任意一个文件的历史修改情况。</p>
<h2 id="二维码生成器"><a href="#二维码生成器" class="headerlink" title="二维码生成器"></a>二维码生成器</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/quick-qr-code-generator/afpbjjgbdimpioenaedcjgkaigggcdpp/related?hl=zh-CN">二维码生成器 (Quick QR)</a></p>
<p>可以将输入的任何内容转换成二维码图片，图片可以保存，并且无需联网。</p>
<h2 id="翻译侠"><a href="#翻译侠" class="headerlink" title="翻译侠"></a>翻译侠</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/translate-man/fnjoonbenhhijnoegpfkpagjamomgjjm/related?hl=zh-CN">翻译侠（Translate Man）</a></p>
<h2 id="Chromoji-Emoji"><a href="#Chromoji-Emoji" class="headerlink" title="Chromoji - Emoji"></a>Chromoji - Emoji</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/chromoji-emoji-for-google/cahedbegdkagmcjfolhdlechbkeaieki/related">Chromoji - Emoji</a></p>
<p>表情工具。</p>
<h2 id="喵喵折"><a href="#喵喵折" class="headerlink" title="喵喵折+"></a>喵喵折+</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/%E5%96%B5%E5%96%B5%E6%8A%98%20/ekbmhggedfdlajiikminikhcjffbleac">喵喵折+</a></p>
<p>购物比价神器,对比一件商品现在的价格比历史价格是高还是低。</p>
<h2 id="购物党自动比价工具"><a href="#购物党自动比价工具" class="headerlink" title="购物党自动比价工具"></a>购物党自动比价工具</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/%E8%B4%AD%E7%89%A9%E5%85%9A%E8%87%AA%E5%8A%A8%E6%AF%94%E4%BB%B7%E5%B7%A5%E5%85%B7/jgphnjokjhjlcnnajmfjlacjnjkhleah">购物党自动比价工具</a></p>
<p>在线的比价工具，网购的时候可以看价格历史记录，以及各大网站的价格对比，也有查快递的快捷方式。</p>
<h2 id="图流-看图助手"><a href="#图流-看图助手" class="headerlink" title="图流-看图助手"></a>图流-看图助手</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/%E5%9B%BE%E6%B5%81-%E7%9C%8B%E5%9B%BE%E5%8A%A9%E6%89%8B/gpcdnjdgomhddecjpknmfodkpkgibajh/related?utm_source=chrome-ntp-icon">图流-看图助手</a></p>
<p>能够以列表的形式将所有图片展现。</p>
<h2 id="谷歌访问助手"><a href="#谷歌访问助手" class="headerlink" title="谷歌访问助手"></a>谷歌访问助手</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/%E8%B0%B7%E6%AD%8C%E8%AE%BF%E9%97%AE%E5%8A%A9%E6%89%8B/gocklaboggjfkolaknpbhddbaopcepfp?utm_source=chrome-ntp-icon">谷歌访问助手</a></p>
<p>可以科学访问谷歌。</p>
<h2 id="高效网页截图编辑"><a href="#高效网页截图编辑" class="headerlink" title="高效网页截图编辑"></a>高效网页截图编辑</h2><p>截取任意网页，可以像画图软件那样用直线、箭头、圆圈、文字做出标识。并可以方便的通过链接或者附件分享。</p>
<h2 id="JSONViewer"><a href="#JSONViewer" class="headerlink" title="JSONViewer"></a>JSONViewer</h2><p>一个窗口格式化多条JSON，提高开发效率。</p>
<h2 id="Ultimate-Video-Downloader"><a href="#Ultimate-Video-Downloader" class="headerlink" title="Ultimate Video Downloader"></a>Ultimate Video Downloader</h2><p>保存视频和音频变得简单。 </p>
<h2 id="Chrono下载管理器"><a href="#Chrono下载管理器" class="headerlink" title="Chrono下载管理器"></a>Chrono下载管理器</h2><p>做Chrome浏览器中最好的下载管理器。</p>
<h2 id="Fatkun图片批量下载"><a href="#Fatkun图片批量下载" class="headerlink" title="Fatkun图片批量下载"></a>Fatkun图片批量下载</h2><p>找出当前页面的所有图片，提供按分辨率、链接等筛选图片，做一个简单好用的下载图片扩展！</p>
<h2 id="Save-to-Pocket"><a href="#Save-to-Pocket" class="headerlink" title="Save to Pocket"></a>Save to Pocket</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/save-to-pocket/niloccemoadcdkdjlinkgdfekeahmflj">Save to Pocket</a></p>
<p>看到感兴趣的先收藏着，然后走哪儿都能看，因为它提供了全平台的APP，方便管理。</p>
<h2 id="WhatRuns"><a href="#WhatRuns" class="headerlink" title="WhatRuns"></a>WhatRuns</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/whatruns/cmkdbmfndkfgebldhnkbfhlneefdaaip">WhatRuns</a></p>
<p>WhatRuns是一款用于了解网站技术的chrome网站技术分析工具，主要能通过分析网站页面所使用的框架、代码等技术以及页面所使用的样式等方面，让使用者能直观的了解网站的整体技术信息。在安装了这款插件后，使用者可以通过点击WhatRuns图标来打开插件窗口，通过该窗口使用者可以轻松了解网站的技术信息</p>
<h2 id="Code-Cola"><a href="#Code-Cola" class="headerlink" title="Code Cola"></a>Code Cola</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/code-cola/lomkpheldlbkkfiifcbfifipaofnmnkn?utm_campaign=en">Code Cola</a></p>
<p>Code Cola是一个可视化编辑在线页面css样式的chrome插件。</p>
<h2 id="Lucidchart-离线图表"><a href="#Lucidchart-离线图表" class="headerlink" title="Lucidchart 离线图表"></a>Lucidchart 离线图表</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/lucidchart-diagrams-deskt/djejicklhojeokkfmdelnempiecmdomj?utm_source=chrome-app-launcher-info-dialog">Lucidchart 离线图表</a></p>
<p>这个扩展程序是一款多功能绘制程序，支持绘制流程图，思维导图，版面设计等，并且有在线和离线两种模式，可谓功能强大。</p>
<h2 id="Clear-Cache"><a href="#Clear-Cache" class="headerlink" title="Clear Cache"></a>Clear Cache</h2><p>链接：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/clear-cache/cppjkneekbjaeellbfkmgnhonkkjfpdn?utm_source=chrome-app-launcher-info-dialog">Clear Cache</a></p>
<p>点击图标即可清除缓存、cookie等，开发必备！</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bakari/p/10709588.html">这些好用的 Chrome 插件，提升你的工作效率</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/skyseraph/Soft-Tools/blob/master/docs/Chrome.md">chrome tools</a></p>
<p><a target="_blank" rel="noopener" href="http://tengj.top/2018/02/17/ggcj/">实用且堪称神器的Chrome插件推荐</a></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/23228162">有哪些鲜为人知却非常有意思、好用的 Chrome 扩展？</a></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19594682">你极力推荐的 Chrome 扩展有哪些？</a></p>
<p><a target="_blank" rel="noopener" href="https://www.crx4chrome.com/">https://www.crx4chrome.com/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/04/16/Resharper%E5%B7%A5%E5%85%B7%E4%B9%8BStack%20Trace%20Explorer%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/16/Resharper%E5%B7%A5%E5%85%B7%E4%B9%8BStack%20Trace%20Explorer%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">Resharper工具之Stack Trace Explorer使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-16 10:47:22" itemprop="dateCreated datePublished" datetime="2019-04-16T10:47:22+00:00">2019-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Resharper/" itemprop="url" rel="index"><span itemprop="name">Resharper</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Resharper工具之Stack-Trace-Explorer使用"><a href="#Resharper工具之Stack-Trace-Explorer使用" class="headerlink" title="Resharper工具之Stack Trace Explorer使用"></a>Resharper工具之Stack Trace Explorer使用</h1><p><code>Stack Trace Explorer</code> 显示剪贴板中的堆栈跟踪，并将其中的行转换为可单击的链接，可以直接导航到相关代码。</p>
<p>使用：</p>
<p>1，复制需要调试跟踪的代码，</p>
<p>2，打开Resharper-&gt; Tools -&gt; Browse Stack Trace</p>
<p><img src="/img/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190416105942.png" alt="微信截图_20190416105942.png"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.jetbrains.com/help/resharper/Reference__Windows__Stack_Trace_Explorer.html">Stack Trace Explorer</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/04/11/%E8%A7%A3%E5%86%B3ssh-keygen%E4%B8%8D%E6%98%AF%E5%86%85%E9%83%A8%E6%88%96%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/11/%E8%A7%A3%E5%86%B3ssh-keygen%E4%B8%8D%E6%98%AF%E5%86%85%E9%83%A8%E6%88%96%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">解决ssh-keygen不是内部或外部命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-11 16:08:08" itemprop="dateCreated datePublished" datetime="2019-04-11T16:08:08+00:00">2019-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="解决ssh-keygen不是内部或外部命令"><a href="#解决ssh-keygen不是内部或外部命令" class="headerlink" title="解决ssh-keygen不是内部或外部命令"></a>解决ssh-keygen不是内部或外部命令</h1><p>使用Git生成SSH密钥时，cmd报错：ssh-keygen不是内部或外部命令。</p>
<p>解决：</p>
<p>1，设置环境变量（推荐方法）</p>
<p>找到系统-&gt;高级系统设置-&gt;找到高级-&gt; 环境变量-&gt; 找到Path变量-&gt;选择编辑-添加ssh-keygen.exe路径，如下图：</p>
<p><img src="/img/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190411163954.png" alt="微信截图_20190411163954.png"></p>
<p>2，找到Git/usr/bin目录下的ssh-keygen.exe</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zy_281870667/article/details/50443403">ssh-keygen不是内部或外部命令</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/04/01/%E7%BB%9F%E4%B8%80%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80UML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/01/%E7%BB%9F%E4%B8%80%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80UML/" class="post-title-link" itemprop="url">统一建模语言UML</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-01 09:23:28" itemprop="dateCreated datePublished" datetime="2019-04-01T09:23:28+00:00">2019-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="统一建模语言UML"><a href="#统一建模语言UML" class="headerlink" title="统一建模语言UML"></a>统一建模语言UML</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>统一建模语言（英语：Unified Modeling Language，缩写 UML）是非专利的第三代建模和规约语言。UML是一种开放的方法，用于说明、可视化、构建和编写一个正在开发的、面向对象的、软件密集系统的制品的开放方法。UML展现了一系列最佳工程实践，这些最佳实践在对大规模，复杂系统进行建模方面，特别是在软件架构层次已经被验证有效。</p>
<h2 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h2><p>在UML系统开发中有三个主要的模型：</p>
<ul>
<li>功能模型：从用户的角度展示系统的功能，包括用例图。</li>
<li>对象模型：采用对象，属性，操作，关联等概念展示系统的结构和基础，包括类别图、对象图。</li>
<li>动态模型：展现系统的内部行为。包括序列图，活动图，状态图。</li>
</ul>
<h2 id="图形"><a href="#图形" class="headerlink" title="图形"></a>图形</h2><h3 id="结构性图形（Structure-diagrams）"><a href="#结构性图形（Structure-diagrams）" class="headerlink" title="结构性图形（Structure diagrams）"></a>结构性图形（Structure diagrams）</h3><p><strong>1,静态图（static diagram</strong></p>
<ul>
<li>类图</li>
<li>对象图</li>
<li>包图</li>
</ul>
<p><strong>2,实现图（implementation diagram）</strong></p>
<ul>
<li>组件图</li>
<li>部署图</li>
</ul>
<h3 id="行为式图形（Behavior-diagrams）"><a href="#行为式图形（Behavior-diagrams）" class="headerlink" title="行为式图形（Behavior diagrams）"></a>行为式图形（Behavior diagrams）</h3><ul>
<li>活动图</li>
<li>状态图</li>
<li>用例图</li>
</ul>
<h3 id="交互性图形（Interaction-diagrams）"><a href="#交互性图形（Interaction-diagrams）" class="headerlink" title="交互性图形（Interaction diagrams）"></a>交互性图形（Interaction diagrams）</h3><ul>
<li>通信图</li>
<li>交互概述图（UML 2.0）</li>
<li>时序图（UML 2.0）</li>
<li>时间图（UML 2.0）</li>
</ul>
<h2 id="UML类图"><a href="#UML类图" class="headerlink" title="UML类图"></a>UML类图</h2><h3 id="属性和方法"><a href="#属性和方法" class="headerlink" title="属性和方法"></a>属性和方法</h3><p>在UML类图中，类使用包含类名、属性(field) 和方法(method) 且带有分割线的矩形来表示。</p>
<p>UML类图中表示可见性的符号有三种：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ ：表示<span class="keyword">public</span></span><br><span class="line">- ：表示<span class="keyword">private</span></span><br><span class="line"><span class="meta"># ：表示protected（friendly也归入这类）</span></span><br></pre></td></tr></table></figure>

<p>规则：<font color=#ff0000 size=4 face="黑体">可见性  名称 ：类型 [ = 缺省值]</font></p>
<p><img src="/img/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190401142800.png" alt="微信截图_20190401142800.png"></p>
<h3 id="对象关系"><a href="#对象关系" class="headerlink" title="对象关系"></a>对象关系</h3><h4 id="关联关系"><a href="#关联关系" class="headerlink" title="关联关系"></a>关联关系</h4><p><strong>1，单项关联</strong></p>
<p><font color=#ff0000 size=4 face="黑体">单向关联用一个带箭头的直线表示。</font></p>
<p><img src="/img/617148-20160612224805636-1840590061.jpg" alt="617148-20160612224805636-1840590061.jpg"></p>
<p><strong>2,双向关联</strong></p>
<p><font color=#ff0000 size=4 face="黑体">双向关联就是双方各自持有对方类型的成员变量，双向关联用一个不带箭头的直线表示。</font></p>
<p><img src="/img/617148-20160612225006840-13774319.jpg" alt="617148-20160612225006840-13774319.jpg"></p>
<p><strong>3,自关联</strong></p>
<p><img src="/img/617148-20160612225239636-76459111.jpg" alt="617148-20160612225239636-76459111.jpg"></p>
<h4 id="聚合关系"><a href="#聚合关系" class="headerlink" title="聚合关系"></a>聚合关系</h4><p><font color=#ff0000 size=4 face="黑体">UML中聚合关系用带空心菱形和箭头的直线表示，空心菱形能分离而独立存在。</font></p>
<p><img src="/img/617148-20160612225421496-664373564.jpg" alt="617148-20160612225421496-664373564.jpg"></p>
<h4 id="组合关系"><a href="#组合关系" class="headerlink" title="组合关系"></a>组合关系</h4><p><font color=#ff0000 size=4 face="黑体">UML类图中组合关系用一个带实心菱形和箭头的直线表示。</font></p>
<p><img src="/img/617148-20160612232819824-829657559.jpg" alt="617148-20160612232819824-829657559.jpg"></p>
<h4 id="依赖关系"><a href="#依赖关系" class="headerlink" title="依赖关系"></a>依赖关系</h4><p><font color=#ff0000 size=4 face="黑体">在UML类图中依赖关系用一条带有箭头的虚线表示。</font></p>
<p><img src="/img/617148-20160612232951746-9292157.jpg" alt="617148-20160612232951746-9292157.jpg"></p>
<h4 id="继承父类"><a href="#继承父类" class="headerlink" title="继承父类"></a>继承父类</h4><p><font color=#ff0000 size=4 face="黑体">在UML类图中继承父类用一条带有三角的实线表示。</font></p>
<p><img src="/img/617148-20160612233246199-1404301867.jpg" alt="617148-20160612233246199-1404301867.jpg"></p>
<h4 id="继承接口"><a href="#继承接口" class="headerlink" title="继承接口"></a>继承接口</h4><p><font color=#ff0000 size=4 face="黑体">在UML类图中继承接口用一条带有三角的虚线表示。</font></p>
<p><img src="/img/617148-20160612233430777-736506858.jpg" alt="617148-20160612233430777-736506858.jpg"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80">统一建模语言</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/0cd7df8a7789">一张图读懂UML</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/shindo/p/5579191.html">五分钟读懂UML类图</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/damsoft/archive/2016/10/24/5993602.html">vs2013\2015UML系列之-类图</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/03/25/ASP-NET-Web-API-2-0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/25/ASP-NET-Web-API-2-0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">ASP.NET Web API 2.0学习笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-25 08:35:32" itemprop="dateCreated datePublished" datetime="2019-03-25T08:35:32+00:00">2019-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MVC-Web-API/" itemprop="url" rel="index"><span itemprop="name">MVC/Web API</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ASP-NET-Web-API-2-0学习笔记"><a href="#ASP-NET-Web-API-2-0学习笔记" class="headerlink" title="ASP.NET Web API 2.0学习笔记"></a>ASP.NET Web API 2.0学习笔记</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>ASP.NET Web API是一个独立于传输层的抽象消息处理管道，它能根据请求采用 HTTP方法来确定目标 Action方法。<br>IIS 默认拒绝<code>PUT</code>和<code>DELETE</code>请求，原因是默认注册了 <code>WebDAVModule</code>，可以通过配置文件移除<code>HttpModule</code>。</p>
<p>** Web API的宿主方式**<br>1，web host 方式<br>    以 Web Host的 方式寄宿 Web API需 要做的唯——件事情是路 由注册。</p>
<p>2，self host 方式<br>    任意类型的应用程序 (控制台、Windows Forms应 用、WPF应用甚至是 Windows sewioc)作为宿主。<br>    除了必须的路 由注册外,我们还需要完成额外的一件事情,即手工加载定义了HttpController类型的程序集。</p>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><h3 id="ASP-NET路由系统"><a href="#ASP-NET路由系统" class="headerlink" title="ASP.NET路由系统"></a>ASP.NET路由系统</h3><p>一个Web 应用具有一个全局的路由表，通过 <code>System.Web.Routing.RouteTable</code>的静态属性<code>Routes</code>表示。</p>
<p> RouteBase</p>
<p>一个<code>Route</code>继承抽象类<code>System.Web.Routing.RouteBase</code>。</p>
<p>  RouteData</p>
<p>VirTalPathData</p>
<p>Route<br><code>System.Web.Routing.Route</code>是抽象类<code>System.Web.Routing.RouteBase</code>唯一的直接子类，基于路由模版模式的路由匹配规则就定义在<code>Route</code>中。</p>
<p>RouteTable</p>
<h3 id="ASP-NET-WEB-API-路由"><a href="#ASP-NET-WEB-API-路由" class="headerlink" title="ASP.NET WEB API 路由"></a>ASP.NET WEB API 路由</h3><p>请求与响应</p>
<p>ASP.NET WEB API通过类型<code>HttpRequestMessage</code>和<code>HttpResponseMessage</code>表示的管道处理的请求和响应的消息，定义在<code>System.Net.Http.dll</code>中。</p>
<p>HttpRequestMessage</p>
<p>HttpResponseMessage</p>
<p>HttpContent</p>
<h4 id="ASP-NET-WEB-API-路由系统"><a href="#ASP-NET-WEB-API-路由系统" class="headerlink" title="ASP.NET WEB API 路由系统"></a>ASP.NET WEB API 路由系统</h4><p>ASP.NET WEB API路由系统中<code>HostedHttpRoute</code>对象通过创建ASP.NET路由系统中的<code>HttpWebRoute</code>对象进行路由解析。<br>针对约束的检查则依然是ASP.NET WEB API路由系统中的<code>HttpRouteConstraint</code>。</p>
<p>Web Host宿主模式采用的route类型为<code>HttpWebRoute</code>,对应的<code>RouteHandler</code>是<code>HttpControllerRouteHandler</code>对象，提供的<code>HttpHandler</code>类型为<code>HttpControllerHandler</code>。</p>
<p>ASP.NET WEB API以Web Host模式部署并注册相应的路由后，这些注册的<code>HttpRoute(HostedHttpRoute)</code>最终会转换成asp.net全局路由表中的<code>Route(HttpWebRoute)</code><br>asp.net路由系统对请求进行拦截，如果匹配某个Route,响应的路由数据<br>被解析出来并保存在<code>RequestContext</code>中，随后asp.net路由系统的实现者<br><code>UrlRoutingModule</code>从匹配的Route中获取<code>RouteHandler</code>,即<code>HttpControllerRouteHandler</code>对象，该对象提供<code>HttpHandler(HttpControllerHandler)</code>被映射到当前请求。<br>一旦映射成功，<code>HttpControllerHandler</code>将最终接管当前请求，它会构建一个<br>消息处理管道来处理这个请求并对请求予以响应。</p>
<p><code>HttpControllerHandler</code>创建<code>HttpRequestMessage</code>，并将ASP.NET路由系统解析得到的<code>RouteData</code>转换成<code>HttpRouteData,</code>并添加到<code>HttpRequestMessage</code>属性的字典中。</p>
<p>HttpRouteData</p>
<p>HttpVirtualPathData</p>
<p>HttpRouteConstraint</p>
<p>HttpRoute</p>
<p>HttpRouteCollection</p>
<dl><dt>HostedHttpRoute</dt><dd>可以看成一个对Route对象的封装。</dd></dl><h2 id="消息处理管道"><a href="#消息处理管道" class="headerlink" title="消息处理管道"></a>消息处理管道</h2><p>ASP.NET WEB API的核心框架是一个消息处理管道，由一组<code>HttpMessageHandler</code>的有序组合。</p>
<p>1, HttpMessageHandler<br>ASP.NET WEB API的核心框架是一个消息处理管道,由一组<code>HttpMessageHandler</code>经过收尾相连而成。</p>
<p>2，DelegatingHandler</p>
<p>管道的串联通过<code>DelegatingHandler</code>来完成。</p>
<p>3，HttpServer</p>
<p>作为<code>HttpMessageHandler</code>链的龙头</p>
<p>4，HttpRoutingDispatcher</p>
<p>消息处理管道最后一个<code>HttpMessageHandler</code>.<br>主要功能：路由(Routing)和消息分发（Dispatching）<br>默认从<code>HttpRoutingDispatcher</code>接管请求的<code>HttpMessageHandler</code>是<code>HttpControllerDispatcher</code>对象。对<code>HttpController</code>的激活和Action方法的执行和响应都是有<code>HttpControllerDispatcher</code>完成的。</p>
<h3 id="Web-Host模式下消息处理管道"><a href="#Web-Host模式下消息处理管道" class="headerlink" title="Web Host模式下消息处理管道"></a>Web Host模式下消息处理管道</h3><p>HttpControllerHandler</p>
<p><code>HttpControllerHandler</code>创建<code>HttpRequestMessage</code>，并将ASP.NET路由系统解析得到的<code>RouteData</code>转换成<code>HttpRouteData,</code>并添加到<code>HttpRequestMessage</code>属性的字典中。</p>
<h3 id="Self-Host模式下消息处理管道"><a href="#Self-Host模式下消息处理管道" class="headerlink" title="Self Host模式下消息处理管道"></a>Self Host模式下消息处理管道</h3><h2 id="HttpController的激活"><a href="#HttpController的激活" class="headerlink" title="HttpController的激活"></a>HttpController的激活</h2><h3 id="HttpController"><a href="#HttpController" class="headerlink" title="HttpController"></a>HttpController</h3><p><code>HttpRoutingDispatcher</code>会利用隶属于它的<code>HttpControllerDispatcher</code>激活目标<code>HttpController</code>对象。</p>
<p>1，HttpControllerContext</p>
<p><code>HttpController</code>对象<code>ExecuteAsync</code>方法得到<code>HttpControllerContext</code>。</p>
<p>2，HttpControllerDescripor</p>
<p><code>HttpControllerDescriptor</code>封装了某个<code>HttpController</code>类型的元数据，即<code>HttpController</code>类型的描述对象。</p>
<p>创建<code>HttpController</code></p>
<h3 id="HttpController如何创建的"><a href="#HttpController如何创建的" class="headerlink" title="HttpController如何创建的"></a>HttpController如何创建的</h3><p><code>HttpControllerDispatcher</code>实现目标<code>HttpController</code>对象的激活与执行，并将代表执行结果的<code>HttpResponseMessage</code>对象返回给<code>HttpRoutingDispatcher</code>对象,后者将<code>HttpResponseMessage</code>回传给消息管道进行相应的处理后最终完成对请求的响应。</p>
<p><code>HttpControllerDispatcher</code>接管请求后，它会获取注册的<code>HttpControllerSelector</code>对象,默认注册的<code>HttpControllerDescriptor</code> 是一个<code>DefaultHttpControllerSelector</code>,后者借助于注册的<code>HttpControllerTypeResolver</code>对象得到所有的<code>HttpController</code>类型，进而创建一个描述这些<code>HttpController</code>的<code>HttpControllerDescriptor</code>对象与<code>HttpController</code>名称之间的映射关系，并调用其<code>SelectController</code>方法 得到描述目标<code>HttpController</code>的<code>HttpControllerDescriptor</code>对象。</p>
<p><code>HttpControllerDispatcher</code>接下来调用这个<code>HttpControllerDescriptor</code>对象的<code>CreateController</code>方法得到激活的<code>HttpController</code>对象。对于这个<code>HttpControllerDescriptor</code>对象来说，当它<code>CreateController</code>方法被调用之后，它会获取注册的<code>HttpControllerActivator</code>对象，并调用其Create方法实现针对目标<code>HttpController</code>对象的激活并将激活的对象返回。</p>
<p>默认注册的<code>DefaultHttpControllerActivator</code>对象会利用注册的<code>DependencyResolver</code>根据<code>HttpController</code>类型去获取代表目标<code>HttpController</code>实例的对象。如果后者返回一个<code>HttpController</code>对象，该对象将直接作为方法的返回值，否则<code>DefaultHttpControllerActivator</code>直接采用反射的形式创建目标<code>HttpController</code>对象并返回。</p>
<p>由于默认注册的<code>DepandencyResolver</code>是一个<code>EmptyResolver</code>对象，由它返回<code>HttpController</code>对象总是null,所以在默认情况下激活<code>HttpController</code>对象总是以反射的形式创建的。所以我们定义<code>HttpController</code>类型必须具有一个默认的构造函数。</p>
<h2 id="Action的选择"><a href="#Action的选择" class="headerlink" title="Action的选择"></a>Action的选择</h2><h3 id="HttpActionDescriptor"><a href="#HttpActionDescriptor" class="headerlink" title="HttpActionDescriptor"></a>HttpActionDescriptor</h3><p><code>HttpActionDescriptor</code>是一个抽象类。</p>
<p>定义在<code>HttpController</code>类型中的每一个Action方法都是通过<code>HttpActionDescriptor</code>对象来描述的。描述Action方法的基本元数据信息均可以在对应的<code>HttpActionDescriptor</code>对象中找到。</p>
<h3 id="ReflectedHttpActionDescriptor"><a href="#ReflectedHttpActionDescriptor" class="headerlink" title="ReflectedHttpActionDescriptor"></a>ReflectedHttpActionDescriptor</h3><p><code>HttpActionDescriptor</code>是一个抽象类,默认实现是<code>ReflectedHttpActionDescriptor</code>对象，通过对目标方法实施反射来获取相关的元数据信息。<br>一个<code>ReflectedHttpActionDescriptor</code>对象是对一个<code>MethodInfo</code>的封装,<br>描述Action方法相关的元数据基本来源于此。</p>
<h3 id="ActionNameAttribute"><a href="#ActionNameAttribute" class="headerlink" title="ActionNameAttribute"></a>ActionNameAttribute</h3><p>应用<code>ActionNameAttribute</code>特性来对Action进行命名。</p>
<h3 id="方法名决定HTTP方法"><a href="#方法名决定HTTP方法" class="headerlink" title="方法名决定HTTP方法"></a>方法名决定HTTP方法</h3><p>如果Action方法具有以下的前缀（不区分大小写），那么对应的HTTP方法将默认支持。不具有，则默认支持POST。</p>
<ul>
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
<li>HEAD</li>
<li>OPTIONS</li>
<li>PATCH</li>
</ul>
<h3 id="ActionHttpMethodProvider"><a href="#ActionHttpMethodProvider" class="headerlink" title="ActionHttpMethodProvider"></a>ActionHttpMethodProvider</h3><p><code>ActionHttpMethodProvider</code>应用到某个Action方法上，并为其提供它所支持的HTTP方法。</p>
<p>AcceptVerbsAttribute特性</p>
<p>写法：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">AcceptVerbsAttribute(<span class="meta-string">&quot;PUT&quot;</span>,<span class="meta-string">&quot;POST&quot;</span>)</span>]</span><br></pre></td></tr></table></figure>

<p>ASP.NET Web API 定义的7中对应的特性类型：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HttpGetAttribute</span><br><span class="line">HttpPostAttribute</span><br><span class="line">HttpPutAttribute</span><br><span class="line">HttpDeleteAttribute</span><br><span class="line">HttpHeadAttribute</span><br><span class="line">HttpOptionsAttribute</span><br><span class="line">HttpPatchAttribute</span><br></pre></td></tr></table></figure>

<h3 id="HttpParameterDescriptor"><a href="#HttpParameterDescriptor" class="headerlink" title="HttpParameterDescriptor"></a>HttpParameterDescriptor</h3><p>抽象类，用户描述Action方法参数的<code>HttpParameterDescriptor</code>对象。</p>
<h3 id="ReflectedHttpParameterDescriptor"><a href="#ReflectedHttpParameterDescriptor" class="headerlink" title="ReflectedHttpParameterDescriptor"></a>ReflectedHttpParameterDescriptor</h3><h3 id="HttpActionSelector"><a href="#HttpActionSelector" class="headerlink" title="HttpActionSelector"></a>HttpActionSelector</h3><p>使用<code>ApiControllerActionSelector</code>对象作为默认的<code>HttpActionSelector</code>。</p>
<h2 id="特性路由"><a href="#特性路由" class="headerlink" title="特性路由"></a>特性路由</h2><p>参考：</p>
<p>[ASP.NET Web API 2 框架揭秘](ASP.NET Web API 2 框架揭秘)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/03/21/CSharp%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0-%E5%86%92%E6%B3%A1%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/21/CSharp%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0-%E5%86%92%E6%B3%A1%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">CSharp算法实现-冒泡算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-21 14:01:03" itemprop="dateCreated datePublished" datetime="2019-03-21T14:01:03+00:00">2019-03-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>CSharp算法实现-冒泡算法的实现</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/03/21/CSharp%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0-%E5%86%92%E6%B3%A1%E7%AE%97%E6%B3%95/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/03/21/DotNet-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/21/DotNet-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">DotNet 单例模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-21 08:33:10" itemprop="dateCreated datePublished" datetime="2019-03-21T08:33:10+00:00">2019-03-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="DotNet-单例模式"><a href="#DotNet-单例模式" class="headerlink" title="DotNet 单例模式"></a>DotNet 单例模式</h1><p>单例模式涉及到的基础知识，包括静态构造函数，私有构造函数，锁，延时创建对象, readonly/const等等。</p>
<p>单例的优点：<br>1.保证了所有的对象访问的都是同一个实例<br>2.由于类是由自己类控制实例化的，所以有相应的伸缩性</p>
<p>单例的缺点：<br>1.额外的系统开销，因为每次使用类的实例的时候，都要检查实例是否存在，可以通过静态实例该解决。<br>2.无法销毁对象，单例模式的特性决定了只有他自己才能销毁对象实例，但是一般情况下我们都没做这个事情。</p>
<h2 id="版本1"><a href="#版本1" class="headerlink" title="版本1"></a>版本1</h2><p>主要问题，就是线程安全的问题，当2个请求同时方式这个类的实例的时候，可以会在同一时间点上都创建一个实例。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title">Singleton</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 私有构造函数，确保用户在外部不能实例化新的实例</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> Singleton Instance</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">get</span></span><br><span class="line">      &#123;</span><br><span class="line">         <span class="keyword">if</span> (instance == <span class="literal">null</span>)</span><br><span class="line">         &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> instance;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="版本2"><a href="#版本2" class="headerlink" title="版本2"></a>版本2</h2><p>标记类为sealed是好的，可以防止被集成;<br>在首次访问静态成员之前以及在调用构造函数（如果有）之前，会初始化静态成员。</p>
<p>静态私有字段上通过new的形式，来保证在该类第一次被调用的时候创建实例,但是，C#其实并不保证实例创建的时机，因为C#规范只是在IL里标记该静态字段是<code>BeforeFieldInit</code>，也就是说静态字段可能在第一次被使用的时候创建，也可能你没使用了，它也帮你创建了。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title">Singleton</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">// 在静态私有字段上声明单例</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 私有构造函数，确保用户在外部不能实例化新的实例</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 只读属性返回静态字段</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> Singleton Instance</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">get</span></span><br><span class="line">      &#123;</span><br><span class="line">         <span class="keyword">return</span> instance;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="版本3"><a href="#版本3" class="headerlink" title="版本3"></a>版本3</h2><p>volatile 关键字表示字段可能被多个并发执行线程修改。声明为 <code>volatile</code> 的字段不受编译器优化（假定由单个线程访问）的限制。这样可以确保该字段在任何时间呈现的都是最新的值。</p>
<p><font color=#ff0000 size=4 face="黑体">常见的实现方法，推荐使用</font></p>
<p>每个线程都会对线程辅助对象locker加锁之后再判断实例是否存在，对于这个操作完全没有必要的，因为当第一个线程创建了该类的实例之后，后面的线程此时只需要直接判断（instance==null）为假，此时完全没必要对线程辅助对象加锁之后再去判断，所以上面的实现方式增加了额外的开销，损失了性能，为了改进上面实现方式的缺陷，我们只需要在lock语句前面加一句（instance==null）的判断就可以避免锁所增加的额外开销，这种实现方式我们就叫它 “双重锁定”。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title">Singleton</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Lock对象，线程安全所用</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">object</span> syncRoot = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton Instance</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (instance == <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">lock</span> (syncRoot)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (instance == <span class="literal">null</span>)</span><br><span class="line">                        instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="版本4"><a href="#版本4" class="headerlink" title="版本4"></a>版本4</h2><p>通过加静态构造函数，确保是个延迟初始化的单例。</p>
<p>静态构造函数：用于初始化任何静态数据，或执行仅需执行一次的特定操作。<br><font color=#ff0000 size=4 face="黑体">在创建第一个实例或引用任何静态成员之前自动调用静态构造函数。</font></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Singleton</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 因为下面声明了静态构造函数，所以在第一次访问该类之前，new Singleton()语句不会执行</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Singleton _instance = <span class="keyword">new</span> Singleton();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton Instance</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _instance; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 声明静态构造函数就是为了删除IL里的BeforeFieldInit标记</span></span><br><span class="line">    <span class="comment">// 以掉静态字段在使用之前被初始化</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">Singleton</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="版本5"><a href="#版本5" class="headerlink" title="版本5"></a>版本5</h2><p>版本4的变体</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title">Singleton</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton Instance &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> Nested._instance; &#125; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title">Nested</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="title">Nested</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Singleton _instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="版本6"><a href="#版本6" class="headerlink" title="版本6"></a>版本6</h2><p><code>Lazy&lt;T&gt;</code>默认的设置就是线程安全。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Singleton</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 因为构造函数是私有的，所以需要使用lambda</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Lazy&lt;Singleton&gt; _instance =</span><br><span class="line">        <span class="keyword">new</span> Lazy&lt;Singleton&gt;(() =&gt; <span class="keyword">new</span> Singleton());</span><br><span class="line">    <span class="comment">// new Lazy&lt;Singleton&gt;(() =&gt; new Singleton(), LazyThreadSafetyMode.ExecutionAndPublication);</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton Instance</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> _instance.Value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="泛型单例"><a href="#泛型单例" class="headerlink" title="泛型单例"></a>泛型单例</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Singleton</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Lazy&lt;T&gt; _instance</span><br><span class="line">      = <span class="keyword">new</span> Lazy&lt;T&gt;(() =&gt;</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">var</span> ctors = <span class="keyword">typeof</span>(T).GetConstructors(</span><br><span class="line">              BindingFlags.Instance</span><br><span class="line">              | BindingFlags.NonPublic</span><br><span class="line">              | BindingFlags.Public);</span><br><span class="line">          <span class="keyword">if</span> (ctors.Count() != <span class="number">1</span>)</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> InvalidOperationException(String.Format(<span class="string">&quot;Type &#123;0&#125; must have exactly one constructor.&quot;</span>, <span class="keyword">typeof</span>(T)));</span><br><span class="line">          <span class="keyword">var</span> ctor = ctors.SingleOrDefault(c =&gt; c.GetParameters().Count() == <span class="number">0</span> &amp;&amp; c.IsPrivate);</span><br><span class="line">          <span class="keyword">if</span> (ctor == <span class="literal">null</span>)</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> InvalidOperationException(String.Format(<span class="string">&quot;The constructor for &#123;0&#125; must be private and take no parameters.&quot;</span>, <span class="keyword">typeof</span>(T)));</span><br><span class="line">          <span class="keyword">return</span> (T)ctor.Invoke(<span class="literal">null</span>);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> T Instance</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _instance.Value; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>泛型单例类的实现：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">MySingleton</span> : <span class="title">Singleton</span>&lt;<span class="title">MySingleton</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> _counter;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Counter</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _counter; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">MySingleton</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        _counter = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">IncrementCounter</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        ++_counter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 线程安全</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">IncrementCounterLock</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Interlocked.Increment(<span class="keyword">ref</span> _counter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>泛型版本的代码使用的<code>Lazy&lt;T&gt;</code>能确保我们在创建单例实例的时候是线程安全的，但是不意味着单例本身是线程安全的，例如：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Parallel.For(<span class="number">0</span>, <span class="number">100</span>, i =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; ++j)</span><br><span class="line">            MySingleton.Instance.IncrementCounter();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Counter的结果是小于100000的</span></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;Counter=&#123;0&#125;.&quot;</span>, MySingleton.Instance.Counter);</span><br><span class="line">    Console.ReadLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/TomXu/archive/2011/12/19/2291448.html">大叔手记（10）：别再让面试官问你单例（暨6种实现方式让你堵住面试官的嘴）</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/daguanjia11/article/details/74612674">.NET线程同步之Volatile构造</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/03/19/OpenID-Connect-%E5%8D%8F%E8%AE%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/19/OpenID-Connect-%E5%8D%8F%E8%AE%AE/" class="post-title-link" itemprop="url">OpenID Connect 协议</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-19 10:52:32" itemprop="dateCreated datePublished" datetime="2019-03-19T10:52:32+00:00">2019-03-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OAuth2-0/" itemprop="url" rel="index"><span itemprop="name">OAuth2.0</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="OpenID-Connect-协议"><a href="#OpenID-Connect-协议" class="headerlink" title="OpenID Connect 协议"></a>OpenID Connect 协议</h1><h2 id="OpenID-Connect简介"><a href="#OpenID-Connect简介" class="headerlink" title="OpenID Connect简介"></a>OpenID Connect简介</h2><p><code>OpenID Connect</code>是由OpenID基金会于2014年发布的一个开放标准，简称OIDC, 它使用OAuth2.0来进行身份认证,<code>OpenID Connect</code>是OpenID的第三代技术。 <code>OpenID Connect</code>直接构建于OAuth2.0的基础之上,添加了一些组件来提供身份认证的能力与其兼容。 通常<code>OpenID Connect</code>是和OAuth2一同部署来使用的。</p>
<p><font color=#ff0000 size=4 face="黑体">OpenID Connect是更高级的协议, 它扩展并替代了OAuth2.0 尽管现在我们经常说我们在使用OAuth2.0来保护API, 其实更准确的说, 大多数情况下, 我们使用的是OpenID Connect.</font></p>
<p>身份认证(Authentication)<br>授权(Authorization)</p>
<h2 id="名词定义"><a href="#名词定义" class="headerlink" title="名词定义"></a>名词定义</h2><ul>
<li><p>EU：End User，用户。</p>
</li>
<li><p>RP：Relying Party ，用来代指OAuth2中的受信任的客户端，身份认证和授权信息的消费方；</p>
</li>
<li><p>OP：OpenID Provider，有能力提供EU身份认证的服务方（比如OAuth2中的授权服务），用来为RP提供EU的身份认证信息；</p>
</li>
<li><p>ID-Token：JWT格式的数据，包含EU身份认证的信息。</p>
</li>
<li><p>UserInfo Endpoint：用户信息接口（受OAuth2保护），当RP使用ID-Token访问时，返回授权用户的信息，此接口必须使用HTTPS。</p>
</li>
</ul>
<h2 id="OIDC基础"><a href="#OIDC基础" class="headerlink" title="OIDC基础"></a>OIDC基础</h2><p>OpenID是 <code>Authentication</code>，即认证，对用户的身份进行认证，判断其身份是否有效，也就是让网站知道“你是你所声称的那个用户”；</p>
<p>OAuth是 <code>Authorization</code>，即授权，在已知用户身份合法的情况下，经用户授权来允许某些操作，也就是让网站知道“你能被允许做那些事情”。</p>
<p>由此可知，授权要在认证之后进行，只有确定用户身份才能授权。<br><font color=#ff0000 size=4 face="黑体">(身份验证)+ OAuth 2.0 = OpenID Connect</font></p>
<p><code>OpenID Connect</code>是“认证”和“授权”的结合，因为其基于OAuth协议，所以<code>OpenID Connect</code>协议中也包含了<code>client_id</code>、<code>client_secret</code>还有<code>redirect_uri</code>等字段标识。这些信息被保存在<code>身份认证服务器</code>，以确保特定的客户端收到的信息只来自于合法的应用平台。这样做是目的是为了防止<code>client_id</code>泄露而造成的恶意网站发起的OIDC流程。</p>
<p>在OAuth中的<code>scope</code>，<code>OpenID Connect</code>也有自己特殊的<code>scope--openid</code> ,它必须在第一次请求“身份鉴别服务器”（Identity Provider,简称IDP）时发送过去。</p>
<h2 id="OIDC流程"><a href="#OIDC流程" class="headerlink" title="OIDC流程"></a>OIDC流程</h2><p>OIDC基于OAuth2，所以OIDC的认证流程主要是由OAuth2的几种授权流程延伸而来的，有以下3种：</p>
<ul>
<li>Authorization Code Flow：使用OAuth2的授权码来换取<code>Id_Token</code>和<code>Access_Token</code>。</li>
<li>Implicit Flow：使用OAuth2的Implicit流程获取<code>Id_Toke</code>n和<code>Access_Token</code>。</li>
<li>Hybrid Flow：混合<code>Authorization Code Flow</code>+<code>Implici Flow</code>。</li>
</ul>
<p>OpenID Connect抽象流程：</p>
<p><img src="/img/986268-20180627101906559-326862209.png" alt="986268-20180627101906559-326862209.png"></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 依赖发(RP)发送请求到OpenID提供商(OP, 也就是身份提供商).</span><br><span class="line">2. OpenID提供商验证最终用户的身份, 并获得了用户委派的授权</span><br><span class="line">3. OpenID提供商返回响应, 里面带着ID_Token, 也通常带着Access_Token.</span><br><span class="line">4. 依赖方现在可以使用Access_Token发送请求到用户信息的端点.</span><br><span class="line">5. 用户信息端点返回用户的声明(claims, 相当于是用户的信息).</span><br></pre></td></tr></table></figure>

<p>OpenID Connect身份认证有三个路径(三个流程, flow): <code>Authorization Code</code>, <code>Implicit</code>，<code>Hybrid</code>。</p>
<h3 id="Authorization-Code-授权码"><a href="#Authorization-Code-授权码" class="headerlink" title="Authorization Code(授权码)"></a>Authorization Code(授权码)</h3><p>要求客户端应用可以安全的在它和授权服务器之间维护客户端的<code>secret</code>,也就是说只适合这样的客户端应用。它还适合于长时间的访问(通过refresh token)。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1，客户端准备身份认证请求, 请求里包含所需的参数</span><br><span class="line">2，客户端发送请求到授权服务器</span><br><span class="line">3，授权服务器对最终用户进行身份认证</span><br><span class="line">4，授权服务器获得最终用户的同意/授权</span><br><span class="line">5，授权服务器把最终用户发送回客户端, 同时带着授权码</span><br><span class="line">6，客户端使用授权码向Token端点请求一个响应</span><br><span class="line">7，客户端接收到响应, 响应的body里面包含着ID_Token 和 Access_Token</span><br><span class="line">8，客户端验证ID_Token, 并获得用户的一些身份信息.</span><br></pre></td></tr></table></figure>

<h3 id="Implicit-简化"><a href="#Implicit-简化" class="headerlink" title="Implicit(简化)"></a>Implicit(简化)</h3><p>不适合于长时间访问。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1，客户端准备身份认证请求, 请求里包含所需的参数</span><br><span class="line">2，客户端发送请求到授权服务器</span><br><span class="line">3，授权服务器对最终用户进行身份认证</span><br><span class="line">4，授权服务器获得最终用户的同意/授权</span><br><span class="line">5，授权服务器把最终用户发送回客户端, 同时带着ID_Token.</span><br><span class="line">  如果也请求了Access_Token的话, 那么Access_Token也会一同返回.</span><br><span class="line">6，客户端验证ID_Token, 并获得用户的一些身份信息.</span><br></pre></td></tr></table></figure>

<h3 id="Hybrid-Flow-混合"><a href="#Hybrid-Flow-混合" class="headerlink" title="Hybrid Flow(混合)"></a>Hybrid Flow(混合)</h3><p>适合于长时间的访问。</p>
<p>要求客户端应用可以安全的维护<code>secret</code>。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1，客户端准备身份认证请求, 请求里包含所需的参数</span><br><span class="line">2，客户端发送请求到授权服务器</span><br><span class="line">3，授权服务器对最终用户进行身份认证</span><br><span class="line">4，授权服务器获得最终用户的同意/授权</span><br><span class="line">5，授权服务器把最终用户发送回客户端, 同时带着授权码,</span><br><span class="line">   根据响应类型的不同, 也可能还带着一个或者多个其它的参数.</span><br><span class="line">6，客户端使用授权码向Token端点请求一个响应</span><br><span class="line">7，客户端接收到响应, 响应的body里面包含着ID_Token 和 Access_Token</span><br><span class="line">8，客户端验证ID_Token, 并获得用户的一些身份信息.</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/be7cc032a4e9">OpenID Connect 协议入门指南</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cgzl/p/9231219.html">Identity Server 4 预备知识 – OpenID Connect 简介</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cgzl/p/9221488.html">Identity Server 4 预备知识 – OAuth 2.0 简介</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/linianhui/p/openid-connect-core.html">[认证授权] 4.OIDC（OpenId Connect）身份认证（核心部分）</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/03/18/RESTful-API-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E8%B7%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/18/RESTful-API-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E8%B7%B5/" class="post-title-link" itemprop="url">RESTful API 设计与实践</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-18 13:51:49" itemprop="dateCreated datePublished" datetime="2019-03-18T13:51:49+00:00">2019-03-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/RESTful/" itemprop="url" rel="index"><span itemprop="name">RESTful</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="RESTful-API-设计与实践"><a href="#RESTful-API-设计与实践" class="headerlink" title="RESTful API 设计与实践"></a>RESTful API 设计与实践</h1><h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>API与用户的通信协议，总是使用HTTPs协议。</p>
<h2 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h2><p>应该尽量将API部署在专用域名之下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;api.example.com</span><br></pre></td></tr></table></figure>

<p>如果确定API很简单，不会有进一步扩展，可以考虑放在主域名下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;example.org&#x2F;api&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="版本（Versioning）"><a href="#版本（Versioning）" class="headerlink" title="版本（Versioning）"></a>版本（Versioning）</h2><p>应该将API的版本号放入URL。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;api.example.com&#x2F;v1&#x2F;</span><br></pre></td></tr></table></figure>

<p>另一种做法是，将版本号放在HTTP头信息中，但不如放入URL方便和直观。</p>
<h2 id="路径（Endpoint）"><a href="#路径（Endpoint）" class="headerlink" title="路径（Endpoint）"></a>路径（Endpoint）</h2><p>路径又称”终点”（endpoint），表示API的具体网址。</p>
<p>在RESTful架构中，每个网址代表一种资源（resource），所以网址中不能有动词，只能有名词，而且所用的名词往往与数据库的表格名对应。一般来说，数据库中的表都是同种记录的”集合”（collection），所以API中的名词也应该使用复数。</p>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;api.example.com&#x2F;v1&#x2F;zoos</span><br><span class="line">https:&#x2F;&#x2F;api.example.com&#x2F;v1&#x2F;animals</span><br><span class="line">https:&#x2F;&#x2F;api.example.com&#x2F;v1&#x2F;employees</span><br></pre></td></tr></table></figure>

<h2 id="HTTP动词"><a href="#HTTP动词" class="headerlink" title="HTTP动词"></a>HTTP动词</h2><p>对于资源的具体操作类型，由HTTP动词表示。</p>
<p>常用的HTTP动词有下面五个（括号里是对应的SQL命令）。</p>
<p>根据 HTTP 规范，动词一律大写。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET（SELECT）：读取（Read）</span><br><span class="line">POST（CREATE）：新建（Create）</span><br><span class="line">PUT（UPDATE）：更新（Update）</span><br><span class="line">PATCH（UPDATE）：更新（Update），通常是部分更新</span><br><span class="line">DELETE（DELETE）：删除（Delete）</span><br></pre></td></tr></table></figure>

<p>还有两个不常用的HTTP动词。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HEAD：获取资源的元数据。</span><br><span class="line">OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的。</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /zoos：列出所有动物园</span><br><span class="line">POST /zoos：新建一个动物园</span><br><span class="line">GET /zoos/ID：获取某个指定动物园的信息</span><br><span class="line">PUT /zoos/ID：更新某个指定动物园的信息（提供该动物园的全部信息）</span><br><span class="line">PATCH /zoos/ID：更新某个指定动物园的信息（提供该动物园的部分信息）</span><br><span class="line">DELETE /zoos/ID：删除某个动物园</span><br><span class="line">GET /zoos/ID/animals：列出某个指定动物园的所有动物</span><br><span class="line">DELETE /zoos/ID/animals/ID：删除某个指定动物园的指定动物</span><br></pre></td></tr></table></figure>

<h2 id="URL-设计"><a href="#URL-设计" class="headerlink" title="URL 设计"></a>URL 设计</h2><h3 id="动词-宾语"><a href="#动词-宾语" class="headerlink" title="动词 + 宾语"></a>动词 + 宾语</h3><p>RESTful 的核心思想就是，客户端发出的数据操作指令都是”动词 + 宾语”的结构。比如，<code>GET/articles</code>这个命令，<code>GET</code>是动词，<code>/articles</code>是宾语。</p>
<h3 id="动词的覆盖"><a href="#动词的覆盖" class="headerlink" title="动词的覆盖"></a>动词的覆盖</h3><p>有些客户端只能使用<code>GET</code>和<code>POST</code>这两种方法。服务器必须接受<code>POST</code>模拟其他三个方法（<code>PUT</code>、<code>PATCH</code>、<code>DELETE</code>）。</p>
<p>这时，客户端发出的 HTTP 请求，要加上<code>X-HTTP-Method-Override</code>属性，告诉服务器应该使用哪一个动词，覆盖<code>POST</code>方法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">POST /api/Person/4 HTTP/1.1  </span><br><span class="line">X-HTTP-Method-Override: PUT</span><br></pre></td></tr></table></figure>

<p><code>X-HTTP-Method-Override</code>指定本次请求的方法是<code>PUT</code>，而不是<code>POST</code>。</p>
<h3 id="宾语必须是名词"><a href="#宾语必须是名词" class="headerlink" title="宾语必须是名词"></a>宾语必须是名词</h3><p>宾语就是 API 的 URL，是 HTTP 动词作用的对象。它应该是名词，不能是动词。比如，/articles这个 URL 就是正确的。</p>
<p><code>/getAllCars</code> 是错误的。</p>
<h3 id="复数-URL"><a href="#复数-URL" class="headerlink" title="复数 URL"></a>复数 URL</h3><p>建议都使用复数 URL，比如<code>GET/articles/2</code>要好于<code>GET/article/2</code>。</p>
<h3 id="避免多级-URL"><a href="#避免多级-URL" class="headerlink" title="避免多级 URL"></a>避免多级 URL</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; URL 不利于扩展，语义也不明确</span><br><span class="line">GET &#x2F;authors&#x2F;12&#x2F;categories&#x2F;2</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 更好的写法</span><br><span class="line">GET &#x2F;authors&#x2F;12?categories&#x3D;2</span><br></pre></td></tr></table></figure>

<h2 id="过滤信息（Filtering）"><a href="#过滤信息（Filtering）" class="headerlink" title="过滤信息（Filtering）"></a>过滤信息（Filtering）</h2><p>如果记录数量很多，服务器不可能都将它们返回给用户。API应该提供参数，过滤返回结果。</p>
<p>下面是一些常见的参数：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">?limit=10：指定返回记录的数量</span><br><span class="line">?offset=10：指定返回记录的开始位置。</span><br><span class="line">?page=2&amp;per_page=100：指定第几页，以及每页的记录数。</span><br><span class="line">?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序。</span><br><span class="line">?animal_type_id=1：指定筛选条件</span><br></pre></td></tr></table></figure>

<p>参数的设计允许存在冗余，即允许API路径和URL参数偶尔有重复。比如，<code>GET /zoo/ID/animals</code> 与 <code>GET /animals?zoo_id=ID</code> 的含义是相同的。</p>
<h2 id="状态码（Status-Codes）"><a href="#状态码（Status-Codes）" class="headerlink" title="状态码（Status Codes）"></a>状态码（Status Codes）</h2><h3 id="状态码必须精确"><a href="#状态码必须精确" class="headerlink" title="状态码必须精确"></a>状态码必须精确</h3><p>客户端的每一次请求，服务器都必须给出回应。回应包括 HTTP 状态码和数据两部分。</p>
<p>HTTP 状态码就是一个三位数，分成五个类别。API 不需要1xx状态码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1xx：相关信息</span><br><span class="line">2xx：操作成功</span><br><span class="line">3xx：重定向</span><br><span class="line">4xx：客户端错误</span><br><span class="line">5xx：服务器错误</span><br></pre></td></tr></table></figure>

<p>详细请参考：<a target="_blank" rel="noopener" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">www.w3.org</a></p>
<h3 id="2xx-状态码"><a href="#2xx-状态码" class="headerlink" title="2xx 状态码"></a>2xx 状态码</h3><p>200状态码表示操作成功，但是不同的方法可以返回更精确的状态码。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET: 200 OK</span><br><span class="line">POST: 201 Created</span><br><span class="line">PUT: 200 OK</span><br><span class="line">PATCH: 200 OK</span><br><span class="line">DELETE: 204 No Content</span><br></pre></td></tr></table></figure>

<p><code>POST</code>返回201状态码，表示生成了新的资源；<code>DELETE</code>返回204状态码，表示资源已经不存在。</p>
<p><code>202 Accepted</code>状态码表示服务器已经收到请求，但还未进行处理，会在未来再处理，通常用于异步操作。</p>
<h3 id="3xx-状态码"><a href="#3xx-状态码" class="headerlink" title="3xx 状态码"></a>3xx 状态码</h3><p>API 用不到<code>301</code>状态码（永久重定向）和<code>302</code>状态码（暂时重定向，307也是这个含义），因为它们可以由应用级别返回，浏览器会直接跳转，API 级别可以不考虑这两种情况。</p>
<p>API 用到的<code>3xx</code>状态码，主要是<code>303 See Other</code>，表示参考另一个 URL。它与<code>302</code>和<code>307</code>的含义一样，也是”暂时重定向”，区别在于<code>302</code>和<code>307</code>用于<code>GET</code>请求，而<code>303</code>用于<code>POST</code>、<code>PUT</code>和<code>DELETE</code>请求。收到<code>303</code>以后，浏览器不会自动跳转，而会让用户自己决定下一步怎么办。下面是一个例子。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 303 See Other</span><br><span class="line">Location: /api/orders/12345</span><br></pre></td></tr></table></figure>

<h3 id="4xx-状态码"><a href="#4xx-状态码" class="headerlink" title="4xx 状态码"></a>4xx 状态码</h3><p>4xx状态码表示客户端错误，主要有下面几种。</p>
<p><strong>400 Bad Request</strong>：服务器不理解客户端的请求，未做任何处理。</p>
<p><strong>401 Unauthorized</strong>：用户未提供身份验证凭据，或者没有通过身份验证。</p>
<p><strong>403 Forbidden</strong>：用户通过了身份验证，但是不具有访问资源所需的权限。</p>
<p><strong>404 Not Found</strong>：所请求的资源不存在，或不可用。</p>
<p><strong>405 Method Not Allowed</strong>：用户已经通过身份验证，但是所用的 HTTP 方法不在他的权限之内。</p>
<p><strong>410 Gone</strong>：所请求的资源已从这个地址转移，不再可用。</p>
<p><strong>415 Unsupported Media Type</strong>：客户端要求的返回格式不支持。比如，API 只能返回 JSON 格式，但是客户端要求返回 XML 格式。</p>
<p><strong>422 Unprocessable Entity</strong>：客户端上传的附件无法处理，导致请求失败。</p>
<p><strong>429 Too Many Requests</strong>：客户端的请求次数超过限额。</p>
<h3 id="5xx-状态码"><a href="#5xx-状态码" class="headerlink" title="5xx 状态码"></a>5xx 状态码</h3><p>`5xx状态码表示服务端错误。一般来说，API 不会向用户透露服务器的详细信息，所以只要两个状态码就够了。</p>
<p><strong>500 Internal Server Error</strong>：客户端请求有效，服务器处理时发生了意外。</p>
<p><strong>503 Service Unavailable</strong>：服务器无法处理请求，一般用于网站维护状态。</p>
<h2 id="服务器回应"><a href="#服务器回应" class="headerlink" title="服务器回应"></a>服务器回应</h2><h3 id="不要返回纯本文"><a href="#不要返回纯本文" class="headerlink" title="不要返回纯本文"></a>不要返回纯本文</h3><p>API 返回的数据格式，不应该是纯文本，而应该是一个 JSON 对象，因为这样才能返回标准的结构化数据。所以，服务器回应的 HTTP 头的<code>Content-Type</code>属性要设为<code>application/json</code>。</p>
<p>客户端请求时，也要明确告诉服务器，可以接受 JSON 格式，即请求的 HTTP 头的<code>ACCEPT</code>属性也要设成<code>application/json</code>。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /orders/2 HTTP/1.1 </span><br><span class="line">Accept: application/json</span><br></pre></td></tr></table></figure>

<h3 id="错误处理（Error-handling）"><a href="#错误处理（Error-handling）" class="headerlink" title="错误处理（Error handling）"></a>错误处理（Error handling）</h3><p>发生错误时，不要返回 200 状态码，状态码反映发生的错误，具体的错误信息放在数据体里面返回。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 400 Bad Request</span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;error&quot;: &quot;Invalid payoad.&quot;,</span><br><span class="line">  &quot;detail&quot;: &#123;</span><br><span class="line">     &quot;surname&quot;: &quot;This field is required.&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="返回结果"><a href="#返回结果" class="headerlink" title="返回结果"></a>返回结果</h3><p>针对不同操作，服务器向用户返回的结果应该符合以下规范。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET /collection：返回资源对象的列表（数组）</span><br><span class="line">GET /collection/resource：返回单个资源对象</span><br><span class="line">POST /collection：返回新生成的资源对象</span><br><span class="line">PUT /collection/resource：返回完整的资源对象</span><br><span class="line">PATCH /collection/resource：返回完整的资源对象</span><br><span class="line">DELETE /collection/resource：返回一个空文档</span><br></pre></td></tr></table></figure>

<h3 id="Hypermedia-API"><a href="#Hypermedia-API" class="headerlink" title="Hypermedia API"></a>Hypermedia API</h3><p>RESTful API最好做到Hypermedia，即返回结果中提供链接，连向其他API方法。</p>
<p>Hypermedia API的设计被称为HATEOAS。</p>
<p>例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;link&quot;: &#123;</span><br><span class="line">  &quot;rel&quot;:   &quot;collection https://www.example.com/zoos&quot;,</span><br><span class="line">  &quot;href&quot;:  &quot;https://api.example.com/zoos&quot;,</span><br><span class="line">  &quot;title&quot;: &quot;List of zoos&quot;,</span><br><span class="line">  &quot;type&quot;:  &quot;application/vnd.yourformat+json&quot;</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html">RESTful API 最佳实践</a></p>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html">RESTful API 设计指南</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/03/18/RESTful%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/18/RESTful%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">RESTful架构学习笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-18 13:40:56" itemprop="dateCreated datePublished" datetime="2019-03-18T13:40:56+00:00">2019-03-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/RESTful/" itemprop="url" rel="index"><span itemprop="name">RESTful</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="RESTful架构学习笔记"><a href="#RESTful架构学习笔记" class="headerlink" title="RESTful架构学习笔记"></a>RESTful架构学习笔记</h1><p>REST架构原则: Representational State Transfer的缩写。翻译是”表现层状态转化”。<br>全称：Resources Representational State Transfer,即资源表现层状态转化。</p>
<p>如果一个架构符合REST原则，就称它为RESTful架构。</p>
<h2 id="资源（Resources）"><a href="#资源（Resources）" class="headerlink" title="资源（Resources）"></a>资源（Resources）</h2><p>所谓”资源”，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。</p>
<h2 id="表现层（Representation）"><a href="#表现层（Representation）" class="headerlink" title="表现层（Representation）"></a>表现层（Representation）</h2><p>“资源”是一种信息实体，它可以有多种外在表现形式。我们把”资源”具体呈现出来的形式，叫做它的”表现层”（Representation）。</p>
<h2 id="状态转化（State-Transfer）"><a href="#状态转化（State-Transfer）" class="headerlink" title="状态转化（State Transfer）"></a>状态转化（State Transfer）</h2><p>访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。</p>
<p>互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生”状态转化”（State Transfer）。而这种转化是建立在表现层之上的，所以就是”表现层状态转化”。</p>
<p>客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。</p>
<h2 id="RESTful架构"><a href="#RESTful架构" class="headerlink" title="RESTful架构"></a>RESTful架构</h2><p>（1）每一个URI代表一种资源；</p>
<p>（2）客户端和服务器之间，传递这种资源的某种表现层；</p>
<p>（3）客户端通过四个HTTP动词，对服务器端资源进行操作，实现”表现层状态转化”。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2011/09/restful.html">理解RESTful架构</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/03/17/OAuth-2-0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/17/OAuth-2-0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">OAuth 2.0学习笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-17 17:31:35" itemprop="dateCreated datePublished" datetime="2019-03-17T17:31:35+00:00">2019-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OAuth2-0/" itemprop="url" rel="index"><span itemprop="name">OAuth2.0</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="OAuth-2-0学习笔记"><a href="#OAuth-2-0学习笔记" class="headerlink" title="OAuth 2.0学习笔记"></a>OAuth 2.0学习笔记</h1><p><font color=#ff0000 size=4 face="黑体">OAuth的作用就是让”客户端”安全可控地获取”用户”的授权，与”服务商提供商”进行互动。</font></p>
<p>OAuth在”客户端”与”服务提供商”之间，设置了一个授权层（authorization layer）。”客户端”不能直接登录”服务提供商”，只能登录授权层，以此将用户与客户端区分开来。”客户端”登录授权层所用的令牌（token），与用户的密码不同。用户可以在登录的时候，指定授权层令牌的权限范围和有效期。</p>
<p>“客户端”登录授权层以后，”服务提供商”根据令牌的权限范围和有效期，向”客户端”开放用户储存的资料。</p>
<p>Authentication: 证明；鉴定<br>Authorization: 授权，认可；批准，委任</p>
<h2 id="名词定义"><a href="#名词定义" class="headerlink" title="名词定义"></a>名词定义</h2><p><strong>client 或 Third-party application</strong> ：第三方应用程序，又称”客户端”（client）。</p>
<p><strong>HTTP service</strong>：HTTP服务提供商，简称”服务提供商”。</p>
<p><strong>Resource Owner</strong>：资源所有者，又称”用户”（user）。</p>
<p><strong>User Agent</strong>：用户代理，本文中就是指浏览器。</p>
<p><strong>Authorization server</strong>：认证服务器，即服务提供商专门用来处理认证的服务器。</p>
<p><strong>Resource server</strong>：资源服务器，即服务提供商存放用户生成的资源的服务器。它与认证服务器，可以是同一台服务器，也可以是不同的服务器。</p>
<h2 id="运行流程"><a href="#运行流程" class="headerlink" title="运行流程"></a>运行流程</h2><p><img src="/img/bg2014051203.png" alt="bg2014051203.png"></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">（A）用户打开客户端以后，客户端要求用户给予授权。</span><br><span class="line"></span><br><span class="line">（B）用户同意给予客户端授权。</span><br><span class="line"></span><br><span class="line">（C）客户端使用上一步获得的授权，向认证服务器申请令牌。</span><br><span class="line"></span><br><span class="line">（D）认证服务器对客户端进行认证以后，确认无误，同意发放令牌。</span><br><span class="line"></span><br><span class="line">（E）客户端使用令牌，向资源服务器申请获取资源。</span><br><span class="line"></span><br><span class="line">（F）资源服务器确认令牌无误，同意向客户端开放资源。</span><br></pre></td></tr></table></figure>

<p>其中，B阶段，对客户端授权是关键。有了这个授权以后，客户端就可以获取令牌，进而凭令牌获取资源。</p>
<h2 id="获取授权的四种模式"><a href="#获取授权的四种模式" class="headerlink" title="获取授权的四种模式"></a>获取授权的四种模式</h2><p>客户端必须得到用户的授权（authorization grant），才能获得令牌（access token）。OAuth 2.0定义了四种授权方式。</p>
<ul>
<li>授权码模式（authorization code）</li>
<li>简化模式（implicit）</li>
<li>密码模式（resource owner password credentials）</li>
<li>客户端模式（client credentials）</li>
</ul>
<h3 id="授权码模式（authorization-code）"><a href="#授权码模式（authorization-code）" class="headerlink" title="授权码模式（authorization code）"></a>授权码模式（authorization code）</h3><p>授权码模式（authorization code）是功能最完整、流程最严密的授权模式。它的特点就是通过客户端的后台服务器，与”服务提供商”的认证服务器进行互动。例如，微信登录。</p>
<p>注：相关参数使用JSON格式发送（Content-Type: application/json）。此外，HTTP头信息中明确指定不得缓存。</p>
<p><img src="/img/bg2014051204.png" alt="bg2014051204.png"></p>
<p>具体步骤：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">（A）用户访问客户端，后者将前者导向认证服务器。</span><br><span class="line"></span><br><span class="line">（B）用户选择是否给予客户端授权。</span><br><span class="line"></span><br><span class="line">（C）假设用户给予授权，认证服务器将用户导向客户端事先指定的&quot;重定向URI&quot;（redirection URI），</span><br><span class="line">同时附上一个授权码。</span><br><span class="line"></span><br><span class="line">（D）客户端收到授权码，附上早先的&quot;重定向URI&quot;，向认证服务器申请令牌。这一步是在客户端的后台</span><br><span class="line">的服务器上完成的，对用户不可见。</span><br><span class="line"></span><br><span class="line">（E）认证服务器核对了授权码和重定向URI，确认无误后，向客户端发送访问令牌（access token）</span><br><span class="line">和更新令牌（refresh token）。</span><br></pre></td></tr></table></figure>

<p>A步骤中，客户端申请认证的URI，包含以下参数：</p>
<ul>
<li>response_type：表示授权类型，必选项，此处的值固定为”code”</li>
<li>client_id：表示客户端的ID，必选项</li>
<li>redirect_uri：表示重定向URI，可选项</li>
<li>scope：表示申请的权限范围，可选项</li>
<li>state：表示客户端的当前状态，可以指定任意值，认证服务器会原封不动地返回这个值。</li>
</ul>
<p>例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /authorize?response_type=code&amp;client_id=s6BhdRkqt3&amp;state=xyz</span><br><span class="line">        &amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1</span><br><span class="line">Host: server.example.com</span><br></pre></td></tr></table></figure>

<p>B步骤中，用户动作选择是否给客户端授权，例如微信扫码之后确认登录动作等。</p>
<p>C步骤中，服务器回应客户端的URI，包含以下参数：</p>
<ul>
<li>code：表示授权码，必选项。该码的有效期应该很短，通常设为10分钟，客户端只能使用该码一次，否则会被授权服务器拒绝。该码与客户端ID和重定向URI，是一一对应关系。</li>
<li>state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。</li>
</ul>
<p>例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 302 Found</span><br><span class="line">Location: https://client.example.com/cb?code=SplxlOBeZQQYbYS6WxSbIA</span><br><span class="line">          &amp;state=xyz</span><br></pre></td></tr></table></figure>

<p>D步骤中，客户端向认证服务器申请令牌的HTTP请求，包含以下参数：</p>
<ul>
<li>grant_type：表示使用的授权模式，必选项，此处的值固定为”authorization_code”。</li>
<li>code：表示上一步获得的授权码，必选项。</li>
<li>redirect_uri：表示重定向URI，必选项，且必须与A步骤中的该参数值保持一致。</li>
<li>client_id：表示客户端ID，必选项。</li>
</ul>
<p>例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST /token HTTP/1.1</span><br><span class="line">Host: server.example.com</span><br><span class="line">Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type=authorization_code&amp;code=SplxlOBeZQQYbYS6WxSbIA</span><br><span class="line">&amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb</span><br></pre></td></tr></table></figure>

<p>E步骤中，认证服务器发送的HTTP回复，包含以下参数：</p>
<ul>
<li>access_token：表示访问令牌，必选项。</li>
<li>token_type：表示令牌类型，该值大小写不敏感，必选项，可以是bearer类型或mac类型。</li>
<li>expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。</li>
<li>refresh_token：表示更新令牌，用来获取下一次的访问令牌，可选项。</li>
<li>scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。</li>
</ul>
<p>例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: application/json;charset=UTF-8</span><br><span class="line">Cache-Control: no-store</span><br><span class="line">Pragma: no-cache</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;access_token&quot;:&quot;2YotnFZFEjr1zCsicMWpAA&quot;,</span><br><span class="line">  &quot;token_type&quot;:&quot;example&quot;,</span><br><span class="line">  &quot;expires_in&quot;:3600,</span><br><span class="line">  &quot;refresh_token&quot;:&quot;tGzv3JOkF0XG5Qx2TlKWIA&quot;,</span><br><span class="line">  &quot;example_parameter&quot;:&quot;example_value&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="简化模式"><a href="#简化模式" class="headerlink" title="简化模式"></a>简化模式</h3><p>简化模式（implicit grant type）不通过第三方应用程序的服务器，直接在浏览器中向认证服务器申请令牌，跳过了”授权码”这个步骤，因此得名。所有步骤在浏览器中完成，令牌对访问者是可见的，且客户端不需要认证。</p>
<p><img src="/img/bg2014051205.png" alt="bg2014051205.png"></p>
<p>运行流程如下：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">（A）客户端将用户导向认证服务器。</span><br><span class="line"></span><br><span class="line">（B）用户决定是否给于客户端授权。</span><br><span class="line"></span><br><span class="line">（C）假设用户给予授权，认证服务器将用户导向客户端指定的&quot;重定向URI&quot;，</span><br><span class="line">     并在URI的Hash部分包含了访问令牌。</span><br><span class="line"></span><br><span class="line">（D）浏览器向资源服务器发出请求，其中不包括上一步收到的Hash值。</span><br><span class="line"></span><br><span class="line">（E）资源服务器返回一个网页，其中包含的代码可以获取Hash值中的令牌。</span><br><span class="line"></span><br><span class="line">（F）浏览器执行上一步获得的脚本，提取出令牌。</span><br><span class="line"></span><br><span class="line">（G）浏览器将令牌发给客户端。</span><br></pre></td></tr></table></figure>

<p>A步骤中，客户端发出的HTTP请求，包含以下参数：</p>
<ul>
<li>response_type：表示授权类型，此处的值固定为”token”，必选项。</li>
<li>client_id：表示客户端的ID，必选项。</li>
<li>redirect_uri：表示重定向的URI，可选项。</li>
<li>scope：表示权限范围，可选项。</li>
<li>state：表示客户端的当前状态，可以指定任意值，认证服务器会原封不动地返回这个值。</li>
</ul>
<p>例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /authorize?response_type=token&amp;client_id=s6BhdRkqt3&amp;state=xyz</span><br><span class="line">    &amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1</span><br><span class="line">Host: server.example.com</span><br></pre></td></tr></table></figure>

<p>C步骤中，认证服务器回应客户端的URI，包含以下参数：</p>
<ul>
<li>access_token：表示访问令牌，必选项。</li>
<li>token_type：表示令牌类型，该值大小写不敏感，必选项。</li>
<li>expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。</li>
<li>scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。</li>
<li>state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。</li>
</ul>
<p>例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 302 Found</span><br><span class="line">Location: http://example.com/cb#access_token=2YotnFZFEjr1zCsicMWpAA</span><br><span class="line">          &amp;state=xyz&amp;token_type=example&amp;expires_in=3600</span><br></pre></td></tr></table></figure>

<p>在上面的例子中，认证服务器用HTTP头信息的Location栏，指定浏览器重定向的网址。注意，在这个网址的Hash部分包含了令牌。</p>
<p>根据上面的D步骤，下一步浏览器会访问Location指定的网址，但是Hash部分不会发送。接下来的E步骤，服务提供商的资源服务器发送过来的代码，会提取出Hash中的令牌。</p>
<h3 id="密码模式"><a href="#密码模式" class="headerlink" title="密码模式"></a>密码模式</h3><p>密码模式（Resource Owner Password Credentials Grant）中，用户向客户端提供自己的用户名和密码。客户端使用这些信息，向”服务商提供商”索要授权。</p>
<p>在这种模式中，用户必须把自己的密码给客户端，但是客户端不得储存密码。这通常用在用户对客户端高度信任的情况下，比如客户端是操作系统的一部分，或者由一个著名公司出品。而认证服务器只有在其他授权模式无法执行的情况下，才能考虑使用这种模式。</p>
<p><img src="/img/bg2014051206.png" alt="bg2014051206.png"></p>
<p>具体步骤：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">（A）用户向客户端提供用户名和密码。</span><br><span class="line"></span><br><span class="line">（B）客户端将用户名和密码发给认证服务器，向后者请求令牌。</span><br><span class="line"></span><br><span class="line">（C）认证服务器确认无误后，向客户端提供访问令牌。</span><br></pre></td></tr></table></figure>

<p>B步骤中，客户端发出的HTTP请求，包含以下参数：</p>
<ul>
<li>grant_type：表示授权类型，此处的值固定为”password”，必选项。</li>
<li>username：表示用户名，必选项。</li>
<li>password：表示用户的密码，必选项。</li>
<li>scope：表示权限范围，可选项。</li>
</ul>
<p>例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST /token HTTP/1.1</span><br><span class="line">Host: server.example.com</span><br><span class="line">Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type=password&amp;username=johndoe&amp;password=A3ddj3w</span><br></pre></td></tr></table></figure>

<p>C步骤中，认证服务器向客户端发送访问令牌。如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: application/json;charset=UTF-8</span><br><span class="line">Cache-Control: no-store</span><br><span class="line">Pragma: no-cache</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;access_token&quot;:&quot;2YotnFZFEjr1zCsicMWpAA&quot;,</span><br><span class="line">  &quot;token_type&quot;:&quot;example&quot;,</span><br><span class="line">  &quot;expires_in&quot;:3600,</span><br><span class="line">  &quot;refresh_token&quot;:&quot;tGzv3JOkF0XG5Qx2TlKWIA&quot;,</span><br><span class="line">  &quot;example_parameter&quot;:&quot;example_value&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>整个过程中，客户端不得保存用户的密码。</p>
<h3 id="客户端模式"><a href="#客户端模式" class="headerlink" title="客户端模式"></a>客户端模式</h3><p>客户端模式（Client Credentials Grant）指客户端以自己的名义，而不是以用户的名义，向”服务提供商”进行认证。严格地说，客户端模式并不属于OAuth框架所要解决的问题。在这种模式中，用户直接向客户端注册，客户端以自己的名义要求”服务提供商”提供服务，其实不存在授权问题。</p>
<p><img src="/img/bg2014051207.png" alt="bg2014051207.png"></p>
<p>具体步骤：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">（A）客户端向认证服务器进行身份认证，并要求一个访问令牌。</span><br><span class="line"></span><br><span class="line">（B）认证服务器确认无误后，向客户端提供访问令牌。</span><br></pre></td></tr></table></figure>

<p>A步骤中，客户端发出的HTTP请求，包含以下参数：</p>
<p>granttype：表示授权类型，此处的值固定为”clientcredentials”，必选项。<br>scope：表示权限范围，可选项。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST /token HTTP/1.1</span><br><span class="line">Host: server.example.com</span><br><span class="line">Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type=client_credentials</span><br></pre></td></tr></table></figure>

<p>认证服务器必须以某种方式，验证客户端身份。</p>
<p>B步骤中，认证服务器向客户端发送访问令牌，下面是一个例子。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: application/json;charset=UTF-8</span><br><span class="line">Cache-Control: no-store</span><br><span class="line">Pragma: no-cache</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;access_token&quot;:&quot;2YotnFZFEjr1zCsicMWpAA&quot;,</span><br><span class="line">  &quot;token_type&quot;:&quot;example&quot;,</span><br><span class="line">  &quot;expires_in&quot;:3600,</span><br><span class="line">  &quot;example_parameter&quot;:&quot;example_value&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="更新令牌"><a href="#更新令牌" class="headerlink" title="更新令牌"></a>更新令牌</h2><p>如果用户访问的时候，客户端的”访问令牌”已经过期，则需要使用”更新令牌”申请一个新的访问令牌。</p>
<p>客户端发出更新令牌的HTTP请求，包含以下参数：</p>
<ul>
<li>granttype：表示使用的授权模式，此处的值固定为”refreshtoken”，必选项。</li>
<li>refresh_token：表示早前收到的更新令牌，必选项。</li>
<li>scope：表示申请的授权范围，不可以超出上一次申请的范围，如果省略该参数，则表示与上一次一致。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST /token HTTP/1.1</span><br><span class="line">Host: server.example.com</span><br><span class="line">Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type=refresh_token&amp;refresh_token=tGzv3JOkF0XG5Qx2TlKWIA</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html">理解OAuth 2.0</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/xishuai/p/identityserver4-implement-openid-connect-and-oauth2.html">IdentityServer4 实现 OpenID Connect 和 OAuth 2.0</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/03/16/Sql-Server%E5%9F%BA%E7%A1%80%E4%B9%8BGrouping%E7%94%A8%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/16/Sql-Server%E5%9F%BA%E7%A1%80%E4%B9%8BGrouping%E7%94%A8%E6%B3%95/" class="post-title-link" itemprop="url">Sql-Server基础之Grouping用法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-16 14:51:00" itemprop="dateCreated datePublished" datetime="2019-03-16T14:51:00+00:00">2019-03-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 01:08:03" itemprop="dateModified" datetime="2021-04-22T01:08:03+00:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Sql/" itemprop="url" rel="index"><span itemprop="name">Sql</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Sql-Server基础之Grouping用法"><a href="#Sql-Server基础之Grouping用法" class="headerlink" title="Sql-Server基础之Grouping用法"></a>Sql-Server基础之Grouping用法</h1><p><code>GROUPING</code> 是一个聚合函数，用在含有 <code>CUBE</code> 或 <code>ROLLUP</code> 语句的SQL语句中，当结果集中的数据行是由 <code>CUBE</code> 或 <code>ROLLUP</code> 运算产生的（添加的）则该函数返回1，否则返回0。</p>
<p>语法： <code>GROUPING(column_name)</code></p>
<p>其中 <code>column_name</code> 是用在 <code>CUBE</code> 或 <code>ROLLUP</code> 运算的列 或 <code>group by</code> 后的列。</p>
<p>注意：</p>
<ul>
<li>（1）只有使用了 <code>CUBE</code> 或 <code>ROLLUP</code> 运算符的SQL中才能使用 <code>GROUPING</code></li>
<li>（2）<code>GROUPING</code> 后面的列 名可以是 <code>CUBE</code> 或 <code>ROLLUP</code> 运算符中使用的列名，也可以是 <code>group by</code> 中的列名</li>
</ul>
<p>CUBE 生成的结果集显示了所选列中值的所有组合的聚合。<br>ROLLUP 生成的结果集显示了所选列中值的某一层次结构的聚合。</p>
<p>** CUBE**</p>
<p><code>CUBE</code> 生成的结果集显示了所选列中值的所有组合的聚合。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CourseID,StudentID,<span class="built_in">SUM</span>(Score) <span class="keyword">FROM</span> [dbo].[Score] </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> CourseID,StudentID <span class="keyword">WITH</span> <span class="keyword">CUBE</span></span><br></pre></td></tr></table></figure>

<p>结果：<br><img src="/img/QQ%E6%88%AA%E5%9B%BE20190316155035.png" alt="QQ截图20190316155035.png"></p>
<p>** ROLLUP**</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> StudentID,CourseID,<span class="built_in">SUM</span>(Score)  <span class="keyword">FROM</span> [dbo].[Score] </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> StudentID,CourseID <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span></span><br></pre></td></tr></table></figure>

<p>结果：<br><img src="/img/QQ%E6%88%AA%E5%9B%BE20190316160822.png" alt="QQ截图20190316160822.png"></p>
<p>** GROUPING**</p>
<p>获取每个学生成绩的总和。以下示例结果相同</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> StudentID,CourseID,<span class="built_in">SUM</span>(Score),<span class="keyword">grouping</span>(CourseID) <span class="keyword">FROM</span> [dbo].[Score] </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> StudentID,CourseID <span class="keyword">WITH</span> <span class="keyword">CUBE</span> <span class="keyword">HAVING</span> <span class="keyword">grouping</span>(CourseID)<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>结果：<br><img src="/img/QQ%E6%88%AA%E5%9B%BE20190316161849.png" alt="QQ截图20190316161849.png"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> StudentID,CourseID,<span class="built_in">SUM</span>(Score),<span class="keyword">grouping</span>(CourseID)  <span class="keyword">FROM</span> [dbo].[Score] </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> StudentID,CourseID <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span> <span class="keyword">HAVING</span> <span class="keyword">grouping</span>(CourseID)<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>结果：<br><img src="/img/QQ%E6%88%AA%E5%9B%BE20190316162226.png" alt="QQ截图20190316162226.png"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/shuangnet/archive/2013/03/26/2982144.html">Sql学习第四天——SQL 关于with cube ，with rollup 和 grouping</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dyufei/archive/2009/11/12/2573973.html">GROUPING 用法</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/16/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><a class="extend next" rel="next" href="/page/18/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">syxdevcode</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">392</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">120</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">173</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/syxdevcode" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;syxdevcode" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">syxdevcode</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
