<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"syxdevcode.github.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="syxdevcode博客">
<meta property="og:url" content="https://syxdevcode.github.com/page/10/index.html">
<meta property="og:site_name" content="syxdevcode博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="syxdevcode">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://syxdevcode.github.com/page/10/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>syxdevcode博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">syxdevcode博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/syxdevcode" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/08/23/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8818%EF%BC%89-%20UI%20Inputs%E8%A7%A3%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/23/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8818%EF%BC%89-%20UI%20Inputs%E8%A7%A3%E6%9E%90/" class="post-title-link" itemprop="url">ABP框架学习记录（18）- UI Inputs解析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-08-23 10:34:46" itemprop="dateCreated datePublished" datetime="2019-08-23T10:34:46+00:00">2019-08-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ABP/" itemprop="url" rel="index"><span itemprop="name">ABP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ABP框架学习记录（18）-UI-Inputs解析"><a href="#ABP框架学习记录（18）-UI-Inputs解析" class="headerlink" title="ABP框架学习记录（18）- UI Inputs解析"></a>ABP框架学习记录（18）- UI Inputs解析</h1><p>UI Inputs 在 ABP 项目中的路径：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190823104812.png" alt="QQ截图20190823104812.png"></p>
<p><code>IInputType</code> ：定义输入类型接口；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190823105038.png" alt="QQ截图20190823105038.png"></p>
<p><code>InputTypeBase</code>：默认实现 <code>IInputType</code> 接口；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190823105319.png" alt="QQ截图20190823105319.png"></p>
<p><code>InputTypeAttribute</code>：定义输入类型属性；</p>
<p><code>SingleLineStringInputType</code>：单行字符串；</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">SetFeatures</span>(<span class="params">IFeatureDefinitionContext context</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> contacts = context.Create(Names.Contacts, <span class="string">&quot;false&quot;</span>);</span><br><span class="line">    contacts.CreateChildFeature(Names.MaxContactCount, <span class="string">&quot;100&quot;</span>, inputType: <span class="keyword">new</span> SingleLineStringInputType(<span class="keyword">new</span> NumericValueValidator(<span class="number">1</span>, <span class="number">10000</span>)));</span><br><span class="line"></span><br><span class="line">    contacts.CreateChildFeature(Names.ChildFeatureToOverride, <span class="string">&quot;ChildFeature&quot;</span>);</span><br><span class="line">    contacts.RemoveChildFeature(Names.ChildFeatureToOverride);</span><br><span class="line">    contacts.CreateChildFeature(Names.ChildFeatureToOverride, <span class="string">&quot;ChildFeatureToOverride&quot;</span>);</span><br><span class="line"></span><br><span class="line">    contacts.CreateChildFeature(Names.ChildFeatureToDelete, <span class="string">&quot;ChildFeatureToDelete&quot;</span>);</span><br><span class="line">    contacts.RemoveChildFeature(Names.ChildFeatureToDelete);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>CheckboxInputType</code>：复选框类型；</p>
<p><code>ComboboxInputType</code>：下拉列表；</p>
<p><code>InputType</code> 验证：<code>Feature</code> 对象的 <code>InputType</code> 对象，<code>InputType</code> 的 <code>Validator</code> 对象的 <code>IsValid</code>方法；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190823104156.png" alt="QQ截图20190823104156.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/08/22/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8817%EF%BC%89-%20Feature%E8%A7%A3%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/22/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8817%EF%BC%89-%20Feature%E8%A7%A3%E6%9E%90/" class="post-title-link" itemprop="url">ABP框架学习记录（17）- Feature解析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-08-22 09:50:14" itemprop="dateCreated datePublished" datetime="2019-08-22T09:50:14+00:00">2019-08-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ABP/" itemprop="url" rel="index"><span itemprop="name">ABP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Feature：特征，功能。</p>
<p>Feature是什么？Feature就是对function的分类方法，其与function的关系就比如Role和User的关系一样。</p>
<p>ABP中Feature具有以下属性： 其中最重要的属性是name，用以表示feature的Identity,一个feature一个name. 一个Feature可以有一组子Features，从而构成Feature树。</p>
<p><code>Feature</code> 设计的整体流程：</p>
<p><code>FeatureChecker</code> 作用：获取 <code>Feaure</code> 的值，<code>FeatureChecker</code> 类中定义的 <code>FeatureValueStore</code> 负责获取存储的值，<code>IFeatureManager</code> 负责管理 <code>Feaure</code>。</p>
<p>Feature目录位置：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822100703.png" alt="QQ截图20190822100703.png"></p>
<p><code>Feature</code>：定义应用程序的功能。可以在多租户应用程序中使用，根据版本和租户启用或禁用某些应用程序功能。</p>
<p><code>Feature</code> 中验证：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190823104156.png" alt="QQ截图20190823104156.png"></p>
<p><code>FeatureScopes</code>：<code>Feature</code> 的范围；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822104856.png" alt="QQ截图20190822104856.png"></p>
<p><code>FeatureDictionary</code>：<code>Feature</code> 字典;</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822105858.png" alt="QQ截图20190822105858.png"></p>
<p><code>IFeatureDefinitionContext/FeatureDefinitionContextBase</code>：在 <code>FeatureProvider.SetFeatures</code> 方法中用作上下文；</p>
<p><code>FeatureProvider</code>：<code>Feature</code> 提供者；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822154145.png" alt="QQ截图20190822154145.png"></p>
<p><code>IFeatureConfiguration/FeatureConfiguration</code>：<code>Feature</code> 配置；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822154908.png" alt="QQ截图20190822154908.png"></p>
<p><code>IFeatureManager/FeatureManager</code>：<code>Feature</code> 管理器;</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822155121.png" alt="QQ截图20190822155121.png"></p>
<p>提供 <code>Initialize</code> 初始化 <code>Feature</code>:</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822161707.png" alt="QQ截图20190822161707.png"></p>
<p><code>IFeatureValueStore</code>：定义获取 <code>Feature</code> 值的存储接口；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822164845.png" alt="QQ截图20190822164845.png"></p>
<p><code>NullFeatureValueStore</code>：<code>IFeatureValueStore</code> 接口的默认实现；</p>
<p><code>IFeatureChecker</code>：获取 <code>Feature</code> 的值。</p>
<p><code>FeatureChecker</code>：默认实现 <code>IFeatureChecker</code> 接口，提供获取 <code>Feature</code> 值的接口。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822165438.png" alt="QQ截图20190822165438.png"></p>
<p><code>IFeatureDependency</code>：定义功能依赖项接口；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822165603.png" alt="QQ截图20190822165603.png"></p>
<p><code>IFeatureDependencyContext/FeatureDependencyContext</code>：定义功能依赖项上下文；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822165744.png" alt="QQ截图20190822165744.png"></p>
<p><code>SimpleFeatureDependency</code>：<code>IFeatureDependency</code> 接口的简单实现；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822173642.png" alt="QQ截图20190822173642.png"></p>
<p><code>RequiresFeatureAttribute</code>: <code>Feature</code> 启用的情况下，以声明给定的类/方法可用。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190822173830.png" alt="QQ截图20190822173830.png"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/1zhk/p/5351968.html">ABP源码分析二十一：Feature</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/08/12/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8816%EF%BC%89-%20Validation%E7%9A%84%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/12/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8816%EF%BC%89-%20Validation%E7%9A%84%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">ABP框架学习记录（16）- Validation的实现</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-08-12 13:35:19" itemprop="dateCreated datePublished" datetime="2019-08-12T13:35:19+00:00">2019-08-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ABP/" itemprop="url" rel="index"><span itemprop="name">ABP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ABP框架学习记录（16）-Validation的实现"><a href="#ABP框架学习记录（16）-Validation的实现" class="headerlink" title="ABP框架学习记录（16）- Validation的实现"></a>ABP框架学习记录（16）- Validation的实现</h1><p><code>Validation</code> 在ABP项目中的位置：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190812145325.png" alt="QQ截图20190812145325.png"></p>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p><code>ValidatorAttribute</code>：自定义属性，继承 <code>Attribute</code>；</p>
<p><code>IValueValidator</code>：定义值验证接口；</p>
<p><code>ValueValidatorBase</code>：默认实现 <code>IValueValidator</code> 接口，提供抽象基类；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190820165721.png" alt="QQ截图20190820165721.png"></p>
<p><code>StringValueValidator</code>：验证字符串类型；</p>
<p><code>BooleanValueValidator</code>：验证布尔类型；</p>
<p><code>NumericValueValidator</code>：验证数字类型；</p>
<p><code>DisableValidationAttribute</code>：禁止自动验证属性，适用于方法，类，属性；</p>
<p><code>EnableValidationAttribute</code>：启用验证，可以在禁止验证的类中的方法添加，以启动自动验证；</p>
<p><code>ICustomValidate</code>：提供自定义验证接口，自定义验证类必须实现此接口；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190820172950.png" alt="QQ截图20190820172950.png"></p>
<p><code>CustomValidationContext</code>：自定义验证上下文；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190820181037.png" alt="QQ截图20190820181037.png"></p>
<p><code>IMethodParameterValidator</code>：定义验证方法参数的接口；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821135444.png" alt="QQ截图20190821135444.png"></p>
<p><code>CustomValidator</code>：实现 <code>IMethodParameterValidator</code> 接口；自定义验证</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821140040.png" alt="QQ截图20190821140040.png"></p>
<p><code>ValidatableObjectValidator</code>：对象验证器。确定指定的对象是否有效。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821141036.png" alt="QQ截图20190821141036.png"></p>
<p><code>DataAnnotationsValidator</code>：数据注释验证器</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821142048.png" alt="QQ截图20190821142048.png"></p>
<p><code>IShouldNormalize</code>：此接口用于在方法执行之前规范化输入。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821144206.png" alt="QQ截图20190821144206.png"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821144655.png" alt="QQ截图20190821144655.png"></p>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p><code>AbpBootstrapper</code> 的 <code>AddInterceptorRegistrars</code> 方法初始化验证拦截器：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821142450.png" alt="QQ截图20190821142450.png"></p>
<p><code>ValidationInterceptorRegistrar</code>:验证拦截器注册。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821142924.png" alt="QQ截图20190821142924.png"></p>
<p><code>ValidationInterceptor</code>：验证拦截器。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821143004.png" alt="QQ截图20190821143004.png"></p>
<p><code>MethodInvocationValidator</code>：验证方法参数。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821143536.png" alt="QQ截图20190821143536.png"></p>
<p><code>AbpKernelModule</code> 的预初始化方法 <code>PreInitialize</code>，调用 <code>AddMethodParameterValidators</code></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190821142706.png" alt="QQ截图20190821142706.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/08/03/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8815%EF%BC%89-%20DTO%E7%9A%84%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/03/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8815%EF%BC%89-%20DTO%E7%9A%84%E8%AE%BE%E8%AE%A1/" class="post-title-link" itemprop="url">ABP框架学习记录（15）- DTO的设计</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-08-03 14:28:39" itemprop="dateCreated datePublished" datetime="2019-08-03T14:28:39+00:00">2019-08-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ABP/" itemprop="url" rel="index"><span itemprop="name">ABP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ABP框架学习记录（15）-DTO的设计"><a href="#ABP框架学习记录（15）-DTO的设计" class="headerlink" title="ABP框架学习记录（15）- DTO的设计"></a>ABP框架学习记录（15）- DTO的设计</h1><p>DTO在项目中的目录位置：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190812131158.png" alt="QQ截图20190812131158.png"></p>
<p>DTO 基础接口，类：</p>
<p><code>IEntityDto&lt;TPrimaryKey&gt;</code>：定义公共的属性接口，此接口为泛型接口；</p>
<p><code>IEntityDto</code>：以Int类型的主键类型接口；</p>
<p><code>EntityDto&lt;TPrimaryKey&gt;</code>：实现 <code>IEntityDto&lt;TPrimaryKey&gt;</code>泛型接口；</p>
<p><code>EntityDto</code>：实现 <code>EntityDto&lt;int&gt;</code>, <code>IEntityDto</code> 接口；</p>
<p><code>ComboboxItemDto</code>：复选框DTO；</p>
<p>此外，还有审计相关DTO：</p>
<p><code>CreationAuditedEntityDto&lt;TPrimaryKey&gt;</code>，<code>CreationAuditedEntityDto</code>,</p>
<p><code>FullAuditedEntityDto&lt;TPrimaryKey&gt;</code>，<code>FullAuditedEntityDto</code>;</p>
<p><code>IPagedResult</code>：实现 <code>IListResult&lt;T&gt;</code>，<code>IHasTotalCount</code>,此接口定义输出到客户端的分页标准；</p>
<p><code>PagedResultDto&lt;T&gt;</code>：实现 <code>ListResultDto&lt;T&gt;</code>, <code>IPagedResult&lt;T&gt;</code>接口；</p>
<p><code>IListResult&lt;T&gt;</code>：定义输出到客户端集合的接口；</p>
<p><code>ListResultDto&lt;T&gt;</code>：实现 <code>IListResult&lt;T&gt;</code> 接口；</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/07/29/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B-%E5%8D%95%E9%93%BE%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/29/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B-%E5%8D%95%E9%93%BE%E8%A1%A8/" class="post-title-link" itemprop="url">线性表之-单链表</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-29 16:04:26" itemprop="dateCreated datePublished" datetime="2019-07-29T16:04:26+00:00">2019-07-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%93%BE%E8%A1%A8/" itemprop="url" rel="index"><span itemprop="name">链表</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="线性表之-单链表"><a href="#线性表之-单链表" class="headerlink" title="线性表之-单链表"></a>线性表之-单链表</h1><p><strong>结构描述：</strong></p>
<p>1，Data 数据 + Next 指针，组成一个单链表的内存结构 ；<br>2，第一个内存结构称为 链头，最后一个内存结构称为 链尾；<br>3，链尾的 Next 指针设置为 NULL [指向空]；<br>4，单链表的遍历方向单一【只能从链头一直遍历到链尾】</p>
<h2 id="IListDataStructure-lt-T-gt-泛型接口"><a href="#IListDataStructure-lt-T-gt-泛型接口" class="headerlink" title="IListDataStructure&lt;T&gt;泛型接口"></a>IListDataStructure<code>&lt;T&gt;</code>泛型接口</h2><p>首先定义 <code>IListDataStructure&lt;T&gt;</code>泛型接口:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IListDataStructure</span>&lt;<span class="title">T</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//取得线性表的实际元素个数</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Count</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//清空线性表</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Clear</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断线性表是否为空</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">IsEmpty</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//（在末端）追加元素</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Append</span>(<span class="params">T item</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在位置i“前面”插入元素item</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">InsertBefore</span>(<span class="params">T item, <span class="keyword">int</span> i</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在位置i“后面”插入元素item</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">InsertAfter</span>(<span class="params">T item, <span class="keyword">int</span> i</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除索引i处的元素</span></span><br><span class="line">    <span class="function">T <span class="title">RemoveAt</span>(<span class="params"><span class="keyword">int</span> i</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获得索引位置i处的元素</span></span><br><span class="line">    <span class="function">T <span class="title">GetItemAt</span>(<span class="params"><span class="keyword">int</span> i</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回元素value的索引</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">IndexOf</span>(<span class="params">T <span class="keyword">value</span></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//反转线性表的所有元素</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Reverse</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Node-lt-T-gt"><a href="#Node-lt-T-gt" class="headerlink" title="Node&lt;T&gt;"></a>Node<code>&lt;T&gt;</code></h2><p>定义 <code>Node&lt;T&gt;</code> 泛型类</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">T</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line">    <span class="keyword">private</span> Node&lt;T&gt; next;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span>(<span class="params">T val, Node&lt;T&gt; p</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        data = val;</span><br><span class="line">        next = p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span>(<span class="params">Node&lt;T&gt; p</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        next = p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span>(<span class="params">T val</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        data = val;</span><br><span class="line">        next = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        data = <span class="keyword">default</span>(T);</span><br><span class="line">        next = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T Data</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> data; &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; data = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Node&lt;T&gt; Next</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> next; &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; next = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="LinkList-lt-T-gt"><a href="#LinkList-lt-T-gt" class="headerlink" title="LinkList&lt;T&gt;"></a>LinkList<code>&lt;T&gt;</code></h2><p>定义 <code>LinkList&lt;T&gt;</code> 单链表：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LinkList</span>&lt;<span class="title">T</span>&gt; : <span class="title">IListDataStructure</span>&lt;<span class="title">T</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Node&lt;T&gt; head;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Node&lt;T&gt; Head</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> head; &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; head = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinkList</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        head = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 类索引器</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;index&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> T <span class="keyword">this</span>[<span class="keyword">int</span> index]</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.GetItemAt(index);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 返回单链表的长度</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Count</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Node&lt;T&gt; p = head;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (p != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            len++;</span><br><span class="line">            p = p.Next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> len;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 清空</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Clear</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        head = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 是否为空</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">bool</span> <span class="title">IsEmpty</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> head == <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 在最后附加元素</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;item&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Append</span>(<span class="params">T item</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Node&lt;T&gt; d = <span class="keyword">new</span> Node&lt;T&gt;(item);</span><br><span class="line">        Node&lt;T&gt; n = <span class="keyword">new</span> Node&lt;T&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            head = d;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        n = head;</span><br><span class="line">        <span class="keyword">while</span> (n.Next != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            n = n.Next;</span><br><span class="line">        &#125;</span><br><span class="line">        n.Next = d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//前插</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InsertBefore</span>(<span class="params">T item, <span class="keyword">int</span> i</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (IsEmpty() || i &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;List is empty or Position is error!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//在最开头插入</span></span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Node&lt;T&gt; q = <span class="keyword">new</span> Node&lt;T&gt;(item);</span><br><span class="line">            q.Next = Head;<span class="comment">//把&quot;头&quot;改成第二个元素</span></span><br><span class="line">            head = q;<span class="comment">//把自己设置为&quot;头&quot;</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node&lt;T&gt; n = head;</span><br><span class="line">        Node&lt;T&gt; d = <span class="keyword">new</span> Node&lt;T&gt;();</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//找到位置i的前一个元素d</span></span><br><span class="line">        <span class="keyword">while</span> (n.Next != <span class="literal">null</span> &amp;&amp; j &lt; i)</span><br><span class="line">        &#123;</span><br><span class="line">            d = n;</span><br><span class="line">            n = n.Next;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (n.Next == <span class="literal">null</span>) <span class="comment">//说明是在最后节点插入(即追加)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Node&lt;T&gt; q = <span class="keyword">new</span> Node&lt;T&gt;(item);</span><br><span class="line">            n.Next = q;</span><br><span class="line">            q.Next = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (j == i)</span><br><span class="line">            &#123;</span><br><span class="line">                Node&lt;T&gt; q = <span class="keyword">new</span> Node&lt;T&gt;(item);</span><br><span class="line">                d.Next = q;</span><br><span class="line">                q.Next = n;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 在位置i后插入元素item</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;item&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;i&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InsertAfter</span>(<span class="params">T item, <span class="keyword">int</span> i</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (IsEmpty() || i &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;List is empty or Position is error!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Node&lt;T&gt; q = <span class="keyword">new</span> Node&lt;T&gt;(item);</span><br><span class="line">            q.Next = head.Next;</span><br><span class="line">            head.Next = q;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node&lt;T&gt; p = head;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (p != <span class="literal">null</span> &amp;&amp; j &lt; i)</span><br><span class="line">        &#123;</span><br><span class="line">            p = p.Next;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j == i)</span><br><span class="line">        &#123;</span><br><span class="line">            Node&lt;T&gt; q = <span class="keyword">new</span> Node&lt;T&gt;(item);</span><br><span class="line">            q.Next = p.Next;</span><br><span class="line">            p.Next = q;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Position is error!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 删除位置i的元素</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;i&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">RemoveAt</span>(<span class="params"><span class="keyword">int</span> i</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (IsEmpty() || i &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Link is empty or Position is error!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">default</span>(T);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node&lt;T&gt; q = <span class="keyword">new</span> Node&lt;T&gt;();</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            q = head;</span><br><span class="line">            head = head.Next;</span><br><span class="line">            <span class="keyword">return</span> q.Data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node&lt;T&gt; p = head;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (p.Next != <span class="literal">null</span> &amp;&amp; j &lt; i)</span><br><span class="line">        &#123;</span><br><span class="line">            j++;</span><br><span class="line">            q = p;</span><br><span class="line">            p = p.Next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (j == i)</span><br><span class="line">        &#123;</span><br><span class="line">            q.Next = p.Next;</span><br><span class="line">            <span class="keyword">return</span> p.Data;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;The node is not exist!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">default</span>(T);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 获取指定位置的元素</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;i&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">GetItemAt</span>(<span class="params"><span class="keyword">int</span> i</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (IsEmpty())</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;List is empty!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">default</span>(T);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node&lt;T&gt; p = <span class="keyword">new</span> Node&lt;T&gt;();</span><br><span class="line">        p = head;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> p.Data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (p.Next != <span class="literal">null</span> &amp;&amp; j &lt; i)</span><br><span class="line">        &#123;</span><br><span class="line">            j++;</span><br><span class="line">            p = p.Next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (j == i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> p.Data;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;The node is not exist!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">default</span>(T);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//按元素值查找索引</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">IndexOf</span>(<span class="params">T <span class="keyword">value</span></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (IsEmpty())</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;List is Empty!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;T&gt; p = <span class="keyword">new</span> Node&lt;T&gt;();</span><br><span class="line">        p = head;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!p.Data.Equals(<span class="keyword">value</span>) &amp;&amp; p.Next != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            p = p.Next;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 元素反转</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Reverse</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        LinkList&lt;T&gt; result = <span class="keyword">new</span> LinkList&lt;T&gt;();</span><br><span class="line">        Node&lt;T&gt; t = <span class="keyword">this</span>.head;</span><br><span class="line">        result.Head = <span class="keyword">new</span> Node&lt;T&gt;(t.Data);</span><br><span class="line">        t = t.Next;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//(把当前链接的元素从head开始遍历，逐个插入到另一个空链表中，这样得到的新链表正好元素顺序跟原链表是相反的)</span></span><br><span class="line">        <span class="keyword">while</span> (t != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            result.InsertBefore(t.Data, <span class="number">0</span>);</span><br><span class="line">            t = t.Next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.head = result.head;<span class="comment">//将原链表直接挂到&quot;反转后的链表&quot;上</span></span><br><span class="line">        result = <span class="literal">null</span>;<span class="comment">//显式清空原链表的引用，以便让GC能直接回收</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">string</span> <span class="title">ToString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        Node&lt;T&gt; n = <span class="keyword">this</span>.head;</span><br><span class="line">        sb.Append(n.Data + <span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (n.Next != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            sb.Append(n.Next.Data + <span class="string">&quot;,&quot;</span>);</span><br><span class="line">            n = n.Next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.ToString().TrimEnd(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用：在Main() 方法调用 <code>TestLinkList()</code> 方法：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">TestLinkList</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;-------------------------------------&quot;</span>);</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;单链表测试开始...&quot;</span>);</span><br><span class="line">    LinkList&lt;<span class="keyword">string</span>&gt; link = <span class="keyword">new</span> LinkList&lt;<span class="keyword">string</span>&gt;();</span><br><span class="line">    link.Head = <span class="keyword">new</span> Node&lt;<span class="keyword">string</span>&gt;(<span class="string">&quot;x&quot;</span>);</span><br><span class="line">    link.InsertBefore(<span class="string">&quot;w&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    link.InsertBefore(<span class="string">&quot;v&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    link.Append(<span class="string">&quot;y&quot;</span>);</span><br><span class="line">    link.InsertBefore(<span class="string">&quot;z&quot;</span>, link.Count());</span><br><span class="line">    Console.WriteLine(link.Count());<span class="comment">//5</span></span><br><span class="line">    Console.WriteLine(link.ToString());<span class="comment">//v,w,x,y,z</span></span><br><span class="line">    Console.WriteLine(link[<span class="number">1</span>]);<span class="comment">//w</span></span><br><span class="line">    Console.WriteLine(link[<span class="number">0</span>]);<span class="comment">//v</span></span><br><span class="line">    Console.WriteLine(link[<span class="number">4</span>]);<span class="comment">//z</span></span><br><span class="line">    Console.WriteLine(link.IndexOf(<span class="string">&quot;z&quot;</span>));<span class="comment">//4</span></span><br><span class="line">    Console.WriteLine(link.RemoveAt(<span class="number">2</span>));<span class="comment">//x</span></span><br><span class="line">    Console.WriteLine(link.ToString());<span class="comment">//v,w,y,z</span></span><br><span class="line">    link.InsertBefore(<span class="string">&quot;x&quot;</span>, <span class="number">2</span>);</span><br><span class="line">    Console.WriteLine(link.ToString());<span class="comment">//v,w,x,y,z</span></span><br><span class="line">    Console.WriteLine(link.GetItemAt(<span class="number">2</span>));<span class="comment">//x</span></span><br><span class="line">    link.Reverse();</span><br><span class="line">    Console.WriteLine(link.ToString());<span class="comment">//z,y,x,w,v</span></span><br><span class="line">    link.InsertAfter(<span class="string">&quot;1&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    link.InsertAfter(<span class="string">&quot;2&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    link.InsertAfter(<span class="string">&quot;6&quot;</span>, <span class="number">5</span>);</span><br><span class="line">    link.InsertAfter(<span class="string">&quot;8&quot;</span>, <span class="number">7</span>);</span><br><span class="line">    link.InsertAfter(<span class="string">&quot;A&quot;</span>, <span class="number">10</span>);<span class="comment">//Position is error!</span></span><br><span class="line"></span><br><span class="line">    Console.WriteLine(link.ToString()); <span class="comment">//z,1,2,y,x,w,6,v,8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yjmyzz/archive/2010/10/17/1853562.html">数据结构C#版笔记–单链表(LinkList)</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/07/29/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/29/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" class="post-title-link" itemprop="url">线性表之-基础概念</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-29 14:42:22" itemprop="dateCreated datePublished" datetime="2019-07-29T14:42:22+00:00">2019-07-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BA%BF%E6%80%A7%E8%A1%A8/" itemprop="url" rel="index"><span itemprop="name">线性表</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="线性表"><a href="#线性表" class="headerlink" title="线性表"></a>线性表</h1><p>&emsp;&emsp;线性表是最基本、最简单、也是最常用的一种数据结构。线性表（linear list）是数据结构的一种，一个线性表是n个具有相同特性的数据元素的有限序列。</p>
<p>&emsp;&emsp;线性表(List)是线性结构的一种典型实现，它又可以分为：顺序表(SeqList)和链表(LinkList)二大类。</p>
<p>命名空间 <code>System.Collections.Generic</code> 中的 <code>List&lt;T&gt;</code> 就是一个内置的顺序表。</p>
<p>&emsp;&emsp;线性表中数据元素之间的关系是一对一的关系，即除了第一个和最后一个数据元素之外，其它数据元素都是首尾相接的（注意，这句话只适用大部分线性表，而不是全部。比如，循环链表逻辑层次上也是一种线性表（存储层次上属于链式存储），但是把最后一个数据元素的尾指针指向了首位结点）。</p>
<p>&emsp;&emsp;我们说“线性”和“非线性”，只在逻辑层次上讨论，而不考虑存储层次，所以双向链表和循环链表依旧是线性表。</p>
<p>&emsp;&emsp;在数据结构逻辑层次上细分，线性表可分为一般线性表和受限线性表。一般线性表也就是我们通常所说的“线性表”，可以自由的删除或添加结点。受限线性表主要包括栈和队列，受限表示对结点的操作受限制。</p>
<p>&emsp;&emsp;线性表主要由顺序表示或链式表示。在实际应用中，常以栈、队列、字符串等特殊形式使用。</p>
<p>&emsp;&emsp;顺序表示指的是用一组地址连续的存储单元依次存储线性表的数据元素，称为线性表的顺序存储结构或顺序映像（sequential mapping）。它以“物理位置相邻”来表示线性表中数据元素间的逻辑关系，可随机存取表中任一元素。</p>
<p>&emsp;&emsp;链式表示指的是用一组任意的存储单元存储线性表中的数据元素，称为线性表的链式存储结构。它的存储单元可以是连续的，也可以是不连续的。在表示数据元素之间的逻辑关系时，除了存储其本身的信息之外，还需存储一个指示其直接后继的信息（即直接后继的存储位置），这两部分信息组成数据元素的存储映像，称为结点（node）。它包括两个域；存储数据元素信息的域称为数据域；存储直接后继存储位置的域称为指针域。指针域中存储的信息称为指针或链。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BA%BF%E6%80%A7%E8%A1%A8/3228081">线性表</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/07/27/LRU%E7%BC%93%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/27/LRU%E7%BC%93%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">LRU缓存淘汰算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-27 13:37:59" itemprop="dateCreated datePublished" datetime="2019-07-27T13:37:59+00:00">2019-07-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>LRU （英文：Least Recently Used）, 意为最近最少使用，这个算法的精髓在于如果一块数据最近被访问，那么它将来被访问的几率也很高，根据数据的历史访问来淘汰长时间未使用的数据。</p>
<p><img src="/img/v2-71b21233c615b1ce899cd4bd3122cbab_hd.jpg" alt="v2-71b21233c615b1ce899cd4bd3122cbab_hd.jpg"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/34989978">缓存淘汰算法–LRU算法</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/9653696/default-memory-cache-with-lru-policy">Default memory cache with LRU policy</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/6895956/memorycache-does-not-obey-memory-limits-in-configuration">MemoryCache does not obey memory limits in configuration</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/07/27/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B-%E9%93%BE%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/27/%E7%BA%BF%E6%80%A7%E8%A1%A8%E4%B9%8B-%E9%93%BE%E8%A1%A8/" class="post-title-link" itemprop="url">线性表之-链表</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-27 13:37:31" itemprop="dateCreated datePublished" datetime="2019-07-27T13:37:31+00:00">2019-07-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%93%BE%E8%A1%A8/" itemprop="url" rel="index"><span itemprop="name">链表</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h1><p>链表是线性表的一种。</p>
<p>&emsp;&emsp;链表是一种物理存储单元上非连续、非顺序的存储结构，数据元素的逻辑顺序是通过链表中的指针链接次序实现的。链表由一系列结点（链表中每一个元素称为结点）组成，结点可以在运行时动态生成。每个结点包括两个部分：一个是存储数据元素的数据域，另一个是存储下一个结点地址的指针域。</p>
<p>&emsp;&emsp;由于不必须按顺序存储，链表在插入的时候可以达到O(1)的复杂度，比另一种线性表顺序表快得多，但是查找一个节点或者访问特定编号的节点则需要O(n)的时间，而线性表和顺序表相应的时间复杂度分别是O(logn)和O(1)。</p>
<p>链表有很多种不同的类型：单向链表，双向链表以及循环链表。如C# 默认提供 <code>LinkedList&lt;T&gt;</code> 就是一个双向链表。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190729145028.png" alt="QQ截图20190729145028.png"></p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><p>&emsp;&emsp;线性表的链式存储表示的特点是用一组任意的存储单元存储线性表的数据元素（这组存储单元可以是连续的，也可以是不连续的）。因此，为了表示每个数据元素 与其直接后继数据元素之间的逻辑关系，对数据元素来说，除了存储其本身的信息之外，还需存储一个指示其直接后继的信息（即直接后继的存储位置）。由这两部分信息组成一个”结点”，表示线性表中一个数据元素。线性表的链式存储表示，有一个缺点就是要找一个数，必须要从头开始找起，十分麻烦。</p>
<p>&emsp;&emsp;存储数据元素信息的域称作数据域（设域名为data），存储直接后继存储位置的域称为指针域（设域名为next）。指针域中存储的信息又称做指针或链。</p>
<h2 id="单链表"><a href="#单链表" class="headerlink" title="单链表"></a>单链表</h2><p>结构描述：</p>
<p>1，Data 数据 + Next 指针，组成一个单链表的内存结构 ；<br>2，第一个内存结构称为 链头，最后一个内存结构称为 链尾；<br>3，链尾的 Next 指针设置为 NULL [指向空]；<br>4，单链表的遍历方向单一【只能从链头一直遍历到链尾】</p>
<p>插入/删除操作：</p>
<p><img src="/img/1411747-85d91bb20b2dede7.png" alt="1411747-85d91bb20b2dede7.png"></p>
<h2 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h2><p>结构描述：<br>1，Data 数据 + Next 指针 + Prev 指针，组成一个双向链表的内存结构；<br>2，第一个内存结构称为 链头，最后一个内存结构称为 链尾；<br>3，链头的 Prev 指针设置为 NULL， 链尾的 Next 指针设置为 NULL；<br>4，Prev 指向的内存结构称为 前驱， Next 指向的内存结构称为 后继；<br>5，双向链表的遍历是双向的，即如果把从链头的 Next 一直到链尾的[NULL] 遍历方向定义为正向，那么从链尾的 Prev 一直到链头 [NULL ]遍历方向就是反向；</p>
<p><img src="/img/1411747-f126e2b10d24395f.png" alt="1411747-f126e2b10d24395f.png"></p>
<h2 id="循环链表"><a href="#循环链表" class="headerlink" title="循环链表"></a>循环链表</h2><p>1，循环链表分为单向、双向两种；<br>2，单向的实现就是在单链表的基础上，把链尾的 Next 指针直接指向链头，形成一个闭环；<br>3，双向的实现就是在双向链表的基础上，把链尾的 Next 指针指向链头，再把链头的 Prev 指针指向链尾，形成一个闭环；<br>4，循环链表没有链头和链尾的说法，因为是闭环的，所以每一个内存结构都可以充当链头和链尾；</p>
<p><img src="/img/1411747-6d7e9c9f5882ac81.png" alt="1411747-6d7e9c9f5882ac81.png"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%93%BE%E8%A1%A8">百度百科-链表</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/73d56c3d228c">数据结构：链表</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/entry/593f56528d6d810058a355f4">时间复杂度 O(log n) 意味着什么？</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/jdbc/article/details/42173751">算法复杂度中的O(logN)底数是多少</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/07/24/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8814%EF%BC%89-%20Auditing%E7%9A%84%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/24/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8814%EF%BC%89-%20Auditing%E7%9A%84%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">ABP框架学习记录（14）- Auditing的实现</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-24 09:23:27" itemprop="dateCreated datePublished" datetime="2019-07-24T09:23:27+00:00">2019-07-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ABP/" itemprop="url" rel="index"><span itemprop="name">ABP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ABP框架学习记录（14）-Auditing的实现"><a href="#ABP框架学习记录（14）-Auditing的实现" class="headerlink" title="ABP框架学习记录（14）- Auditing的实现"></a>ABP框架学习记录（14）- Auditing的实现</h1><p><strong>Auditing</strong>：<font color=#ff0000 size=4 face="黑体">审计跟踪（也叫审计日志）是与安全相关的信息按照时间顺序的记录，它们提供了活动序列的文档证据，这些活动序列可以在任何时间影响一个特定的操作。</font></p>
<p>Auditing 在 ABP 项目中的位置：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727141502.png" alt="QQ截图20190727141502.png"></p>
<h2 id="基础定义"><a href="#基础定义" class="headerlink" title="基础定义"></a>基础定义</h2><p><code>AuditInfo</code>：定义需要被审计信息实体类；</p>
<p><code>AuditedAttribute</code>：用于标识一个方法或一个类的所有方法都需要启用Auditing功能。</p>
<p><code>DisableAuditingAttribute</code>：用于标识一个方法或一个类的所有方法都需要关闭Auditing功能。</p>
<p><code>IAuditSerializer</code>：提供审计序列化接口；</p>
<p><code>JsonNetAuditSerializer</code>：<code>IAuditSerializer</code> 接口的默认实现，提供序列化方法；</p>
<p><code>IAuditInfoProvider</code>：提供 <code>Fill</code> 方法，完善 <code>AuditInfo</code> 信息。</p>
<p><code>DefaultAuditInfoProvider</code>：<code>IAuditInfoProvider</code> 的默认实现；</p>
<p><code>IClientInfoProvider</code>：提供客户端信息的接口；</p>
<p><code>NullClientInfoProvider</code>：<code>IClientInfoProvider</code> 接口的默认实现；</p>
<p><code>IAuditingStore</code>：审计信息持久化接口，应由上层提供商实现；</p>
<p><code>SimpleLogAuditingStore</code>：<code>IAuditingStore</code> 接口的默认实现；</p>
<h2 id="入口"><a href="#入口" class="headerlink" title="入口"></a>入口</h2><p><code>AbpBootstrapper</code> 提供统一的拦截器注入入口：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727150235.png" alt="QQ截图20190727150235.png"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727150303.png" alt="QQ截图20190727150303.png"></p>
<p><code>AuditingInterceptorRegistrar</code>：审计拦截器注册类，如下图：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727150506.png" alt="QQ截图20190727150506.png"></p>
<p><code>AuditingInterceptor</code>：审计拦截器,提供对同步方法和异步方法的拦截操作，如下图：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727152548.png" alt="QQ截图20190727152548.png"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727153054.png" alt="QQ截图20190727153054.png"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727153419.png" alt="QQ截图20190727153419.png"></p>
<p><code>IAuditingHelper</code>：记录审计信息帮助类；</p>
<p><code>AuditingHelper</code>：<code>IAuditingHelper</code> 接口的实现，提供 <code>ShouldSaveAudit</code>，<code>CreateAuditInfo</code>，<code>Save</code>等方法，如下图：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727152907.png" alt="QQ截图20190727152907.png"></p>
<p><code>IAuditingConfiguration</code>：定义用于配置审计的接口；</p>
<p><code>AuditingConfiguration</code>：<code>IAuditingConfiguration</code> 的默认实现，如下图：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727151604.png" alt="QQ截图20190727151604.png"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727153811.png" alt="QQ截图20190727153811.png"></p>
<p><code>AbpKernelModule</code> 的预初始化方法 <code>PreInitialize</code> 中调用，如下图：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727151740.png" alt="QQ截图20190727151740.png"></p>
<p><code>IAuditingSelectorList</code>：用于选择要审计的类/接口的选择器函数列表。</p>
<p><code>AuditingSelectorList</code>：<code>IAuditingSelectorList</code>接口的默认实现；</p>
<p><code>NamedTypeSelector</code>：类型选择器，这个对象的核心属性是一个以Type为输入参数，返回Bool类型的委托 Predicate；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190727153936.png" alt="QQ截图20190727153936.png"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/1zhk/p/5342947.html">ABP源码分析十九：Auditing</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/07/22/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8813%EF%BC%89-%20Entity%E8%A7%A3%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/22/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8813%EF%BC%89-%20Entity%E8%A7%A3%E6%9E%90/" class="post-title-link" itemprop="url">ABP框架学习记录（13）- Entity解析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-22 11:19:17" itemprop="dateCreated datePublished" datetime="2019-07-22T11:19:17+00:00">2019-07-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ABP/" itemprop="url" rel="index"><span itemprop="name">ABP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ABP框架学习记录（13）-Entity解析"><a href="#ABP框架学习记录（13）-Entity解析" class="headerlink" title="ABP框架学习记录（13）- Entity解析"></a>ABP框架学习记录（13）- Entity解析</h1><p><code>Entity</code> 在ABP项目中的目录位置：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190722112057.png" alt="QQ截图20190722112057.png"></p>
<h2 id="Entity"><a href="#Entity" class="headerlink" title="Entity"></a>Entity</h2><p><code>IEntity&lt;TPrimaryKey&gt;</code>：封装了PrimaryKey：Id,这是一个泛型类型，所有的实体都必须实现此接口；</p>
<p><code>IEntity</code>: 继承 <code>IEntity&lt;int&gt;</code> 泛型接口；</p>
<p><code>Entity&lt;TPrimaryKey&gt;</code>：继承 <code>IEntity&lt;TPrimaryKey&gt;</code> 接口的基础实现，支持主键是泛型的实体，该类重写了<code>Equals</code>,<code>GetHashCode</code>,<code>ToString</code> 方法和<code>==</code>,<code>!=</code> 运算符。</p>
<p><code>Entity</code>：主键是int类型的Entity;</p>
<p><code>IEntityTranslation</code>:实体语言转化；</p>
<p><code>IEntityTranslation&lt;TEntity, TPrimaryKeyOfMultiLingualEntity&gt;</code>: 实体语言转换泛型类，<code>TPrimaryKeyOfMultiLingualEntity</code> 为主键类型；</p>
<p><code>IEntityTranslation&lt;TEntity&gt;</code>：实体语言转换泛型类，继承 <code>IEntityTranslation&lt;TEntity, int&gt;</code> 接口；</p>
<p><code>IMultiLingualEntity&lt;TTranslation&gt;</code>：多语言实体，其中 <code>TTranslation</code> 类型约束为 <code>IEntityTranslation</code>；</p>
<p><code>IEntityTranslation&lt;&gt;</code> 接口的实现，表明当前实体可以被翻译：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190722150243.png" alt="QQ截图20190722150243.png"></p>
<p><code>IMultiLingualEntity&lt;&gt;</code> 接口的实现，表示有多语言的实现：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190722150428.png" alt="QQ截图20190722150428.png"></p>
<p>使用：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190722150703.png" alt="QQ截图20190722150703.png"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190722150813.png" alt="QQ截图20190722150813.png"></p>
<p><code>IExtendableObject</code>：使用 Json 格式的字符串属性，以扩展对象/实体。</p>
<p><code>ExtendableObjectExtensions</code>：针对扩展字段属性的扩展类；</p>
<p><code>IAggregateRoot</code>：聚合根接口</p>
<p><code>AggregateRoot</code>：聚合根实现</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190722153654.png" alt="QQ截图20190722153654.png"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190722153720.png" alt="QQ截图20190722153720.png"></p>
<p><code>IMayHaveTenant</code>：为可能选择具有TenantId的实体实现此接口。</p>
<p><code>IMustHaveTenant</code>：为必须具有TenantId的实体实现此接口。</p>
<p><code>IPassivable</code>：此接口用于使实体主动/被动。</p>
<p><code>ISoftDelete</code>：用于标准化软删除实体。</p>
<h2 id="EntityCache"><a href="#EntityCache" class="headerlink" title="EntityCache"></a>EntityCache</h2><p><code>IEntityCache&lt;TCacheItem, TPrimaryKey&gt;</code>：定义实体缓存接口，此接口为泛型类型；</p>
<p><code>IEntityCache&lt;TCacheItem&gt;</code>：继承 <code>IEntityCache&lt;TCacheItem, int&gt;</code> 接口；</p>
<p><code>EntityCache&lt;TEntity, TCacheItem, TPrimaryKey&gt;</code>：实体缓存类；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190722171203.png" alt="QQ截图20190722171203.png"></p>
<h2 id="Auditing"><a href="#Auditing" class="headerlink" title="Auditing"></a>Auditing</h2><p><code>IAudited</code>：定义实体的审计接口，保存/更新时自动设置相关属性</p>
<p><code>IAudited&lt;TUser&gt;</code>：审计接口。</p>
<p><code>ICreationAudited</code>： 审计创建者接口，保存到数据库时，会自动设置创建时间和创建者用户。</p>
<p><code>IDeletionAudited</code>: 删除时审计信息</p>
<p><code>IFullAudited</code>：完全审核信息。</p>
<p><code>IHasCreationTime</code>：如果必须存储实体，则可以实现此接口，自动设置；</p>
<p><code>IHasDeletionTime</code>：如果必须删除实体，则可以实现此接口，自动设置；</p>
<p><code>IHasModificationTime</code>：更新实体时间；</p>
<p><code>IModificationAudited</code>：实体更新人信息；</p>
<p><code>AuditedEntity</code>：审计实体；</p>
<p><code>CreationAuditedEntity</code>：创建者审计实体；</p>
<p><code>FullAuditedEntity</code>：全部审计信息实体；</p>
<p><code>AuditedAggregateRoot</code>：审计聚合根</p>
<p><code>CreationAuditedAggregateRoot</code>：创建者审计 聚合根；</p>
<p><code>FullAuditedAggregateRoot</code>：全部审计信息 聚合根；</p>
<p><code>EntityAuditingHelper</code>：实体审计帮助类；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190722174813.png" alt="QQ截图20190722174813.png"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/1zhk/p/5329393.html">ABP源码分析十四：Entity的设计</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/07/02/CSharp%20-%20%E5%9F%BA%E5%85%83%E7%B1%BB%E5%9E%8B(primitive)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/02/CSharp%20-%20%E5%9F%BA%E5%85%83%E7%B1%BB%E5%9E%8B(primitive)/" class="post-title-link" itemprop="url">CSharp - 基元类型(primitive)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-02 18:15:01" itemprop="dateCreated datePublished" datetime="2019-07-02T18:15:01+00:00">2019-07-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSharp%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">CSharp基础</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CSharp-基元类型-primitive"><a href="#CSharp-基元类型-primitive" class="headerlink" title="CSharp - 基元类型(primitive)"></a>CSharp - 基元类型(primitive)</h1><h2 id="基元类型"><a href="#基元类型" class="headerlink" title="基元类型"></a>基元类型</h2><p>CLR 定义的基元（原始）类型：</p>
<p><code>Boolean</code>, <code>Byte</code>, <code>SByte</code>, <code>Int16</code>, <code>UInt16</code>, <code>Int32</code>, <code>UInt32</code>, <code>Int64</code>, <code>UInt64</code>, <code>Char</code>, <code>Double</code>, <code>Single</code>。</p>
<p><font color=#ff0000 size=4 face="黑体">注意：string不是基元（原始）类型。</font></p>
<p>即：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">System.Boolean</span><br><span class="line">System.Byte</span><br><span class="line">System.SByte</span><br><span class="line">System.Int16</span><br><span class="line">System.UInt16</span><br><span class="line">System.Int32</span><br><span class="line">System.UInt32</span><br><span class="line">System.Int64</span><br><span class="line">System.UInt64</span><br><span class="line">System.IntPtr</span><br><span class="line">System.UIntPtr</span><br><span class="line">System.Char</span><br><span class="line">System.Double</span><br><span class="line">System.Single</span><br></pre></td></tr></table></figure>

<p>通过 <code>System.Type</code> 提供 <code>IsPrimitive</code> 属性，指示当前类型是否为基元类型；</p>
<h2 id="内置类型"><a href="#内置类型" class="headerlink" title="内置类型"></a>内置类型</h2><p><font color=#ff0000 size=4 face="黑体">C#内置类型和.NET框架中的类型有直接的映射关系。C#内置类型直接映射到Framework(FCL)中存在的类型。</font>如: 在用内置类型int初始化一个整数时，int会直接映射到FCL中 <code>System.Int32</code> 类型，这个过程,编译器自动完成。C#中的string是内置类型，直接映射到.NET框架中的String，所以没有任何不同。 </p>
<p>下图显示，C#中的所有内置类型和FCL类型：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190705175059.png" alt="QQ截图20190705175059.png"></p>
<p>隐式转化：如果转化过程时安全的，也就是说在转化过程中数据不会丢失，那么久进行隐式转换。<br>显示转换：转换过程不安全，意味着可能会丢失精度或者数量级，那就要求显示转换。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/kone0611/article/details/84856702">C# 基元类型（primitive）</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u014677855/article/details/82111358">C#中基元类型、引用类型与值类型</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/built-in-types-table">内置类型表（C# 参考）</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/3965752/is-string-a-primitive-type">Is String a primitive type?</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/dotnet/api/system.type.isprimitiveimpl?redirectedfrom=MSDN&view=netframework-4.8#System_Type_IsPrimitiveImpl">Type.IsPrimitiveImpl Method</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/07/02/CSharp%E4%B9%8BCLI/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/02/CSharp%E4%B9%8BCLI/" class="post-title-link" itemprop="url">CSharp之CLI</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-02 17:34:09" itemprop="dateCreated datePublished" datetime="2019-07-02T17:34:09+00:00">2019-07-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Net-Standard/" itemprop="url" rel="index"><span itemprop="name">.Net Standard</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>简介：CLI是一个开放的技术规范。它是由微软联合惠普以及英特尔于2000年向ECMA倡议的。通用语言基础架构定义了构成.NET Framework基础结构的可执行码以及代码的运行时环境的规范，它定义了一个语言无关的跨体系结构的运行环境，这使得开发者可以用规范内定义的各种高级语言来开发软件，并且无需修正即可将软件运行在不同的计算机体系结构上。CLI有时候会和CLR混用。但严格意义上说，这是错误的。因为CLI是一种规范，而CLR则是对这种规范的一个实现。</p>
<p>首先，引入一张图片:</p>
<p><img src="/img/2010012620512419.png" alt="2010012620512419.png"><br>图片引用自：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/eshizhan/archive/2010/01/26/1657041.html">https://www.cnblogs.com/eshizhan/archive/2010/01/26/1657041.html</a></p>
<p>流程图：</p>
<p><img src="/img/CLI-00001.png" alt="CLI-00001.png"></p>
<h2 id="CLI"><a href="#CLI" class="headerlink" title="CLI"></a>CLI</h2><p><font color=#ff0000 size=4 face="黑体">CLI：通用语言基础架构(Common Language Infrastructure，CLI)；</font></p>
<p>CLI是一个开放的技术规范。它是由微软联合惠普以及英特尔于2000年向ECMA倡议的。通用语言基础架构定义了构成.NET Framework基础结构的可执行码以及代码的运行时环境的规范，它定义了一个语言无关的跨体系结构的运行环境，这使得开发者可以用规范内定义的各种高级语言来开发软件，并且无需修正即可将软件运行在不同的计算机体系结构上。CLI有时候会和CLR混用。但严格意义上说，这是错误的。因为CLI是一种规范，而CLR则是对这种规范的一个实现。</p>
<p>欧洲计算机制造商协会（ECMA）已经于2001年10月13日批准C#语言规范（ECMA-334）成为一种新诞生的计算机产业标准。同时国际标准组织ISO也同意该标准进入该组织的审批阶段。并且，作为.NET与CLR的核心部分，CLI与C#也同时获得了ECMA的批准（ECMA-335）。拥有了C#与CLI这两项标准，你可以自己写出能够运行于任何操作系统上的.NET平台（只要你愿意）。如前所述，著名的MONO项目就是这么干的，MONO项目包括三个核心的部分：一个C#语言的编译器，一个CLI和一个类库。</p>
<h2 id="CLR"><a href="#CLR" class="headerlink" title="CLR"></a>CLR</h2><p><font color=#ff0000 size=4 face="黑体">CLR：通用语言运行平台(Common Language Runtime，CLR)；</font></p>
<p>无论通过任何语言构建产品，都必须寄宿到一个平台中运行，这正如我们的软件运行在操作系统环境一样，操作系统为CLR提供了运行环境，使用.NET构建的程序又运行在CLR之上，CRL为.NET程序的运行提供了温床，CLR提供基本的类库和运行引擎，基本类库封装操作系统函数供开发者方便调用，运行引擎用于编译并运行我们开发的程序。CLR包含.NET运行引擎和符合CLI的类库。通过.NET平台构建的程序都基于CLR基础类库来实现，并且运行在CLR提供的运行引擎之上。</p>
<p>编译为托管代码时，编译器将源代码翻译为 Microsoft 中间语言 (MSIL)，这是一组可以有效地转换为本机代码且独立于 CPU 的指令。MSIL 包括用于加载、存储和初始化对象以及对对象调用方法的指令，还包括用于算术和逻辑运算、控制流、直接内存访问、异常处理和其他操作的指令。要使代码可运行，必须先将 MSIL 转换为特定于 CPU 的代码，这通常是通过实时 (JIT) 编译器来完成的。由于公共语言运行库为它支持的每种计算机结构都提供了一种或多种 JIT 编译器，因此同一组 MSIL 可以在所支持的任何结构上 JIT 编译和运行。</p>
<h2 id="CIL"><a href="#CIL" class="headerlink" title="CIL"></a>CIL</h2><p><font color=#ff0000 size=4 face="黑体">CIL：公共中间语言（Common Intermediate Language，CIL)；</font></p>
<p>CLI，简称<strong>微软中间语言（MSIL）或者中间语言（IL）</strong>。CIL是编译器将.NET代码编译成公共语言运行时（CLR）能够识别的中间代码。它是一种介于高级语言（例如C#）和CPU指令之间的一种语言。当用户编译一个.NET程序时，编译器（例如VisualStudio）将C#源代码编译转换成中间语言 (MSIL)，它是一种能够被CLR转换成CPU指令的中间语言，当执行这些中间语言时，CLR提供的实时（JIT）编译器将它们转化为CPU特定的代码。由于公共语言运行库支持多种实时编译器，因此同一段中间语言代码可以被不同的编译器实时编译并运行在不同的CPU结构上。从理论上来说，MSIL将消除多年以来业界中不同语言之间的纷争。在.NET的世界中可能出现下面的情况一部分代码可以用C++实现，另一部分代码使用C#或VB.NET完成的，但是最后这些代码都将被转换为中间语言。这给程序员提供了极大的灵活性，程序员可以选择自己熟悉的语言，并且再也不用为学习不断推出的新语言而烦恼了。</p>
<h2 id="FCL"><a href="#FCL" class="headerlink" title="FCL"></a>FCL</h2><p><font color=#ff0000 size=4 face="黑体">FCL：框架类库(Framework Class Library,FCL)；</font></p>
<p>FCL提供了大粒度的编程框架，它是针对不同应用设计的框架 ，FCL大部分实现都引用了BCL，例如我们常说的开发框架：ASP.NET、MVC、WCF和WPF等等，提供了针对不同层面的编程框架 。</p>
<p>FCL框架类库可以划分为三层：</p>
<p>** 最内一层<strong>：由BCL的大部分组成，主要作用是对.NET框架，.NET运行时以及CIL语言本身进行支持，例如基元类型，集合类型，线程处理，应用程序域，运行时，安全性，互操作等。<br>** 中间一层</strong>：包含了对操作系统功能的封装，例如文件系统，网络连接，图形图像，XML操作等。<br>** 最外一层**：包含各种类型的应用程序，例如 Window Forms，Asp.NET，WPF，WCF，WF等。</p>
<h2 id="BCL"><a href="#BCL" class="headerlink" title="BCL"></a>BCL</h2><p><font color=#ff0000 size=4 face="黑体">BCL：基类库(Base Class Library，BCL)；</font></p>
<p>BCL是一个公共编程框架，称为基类库，所有语言的开发者都能利用它。是CLI（Common Language Infrastructure，公共语言基础结构）的规范之一，主要包括：执行网络操作，执行I/O操作，安全管理，文本操作，数据库操作，XML操作，与事件日志交互，跟踪和一些诊断操作，使用非托管代码，创建与调用动态代码等，粒度相对较小，为所有框架提供基础支持。</p>
<h2 id="CLS"><a href="#CLS" class="headerlink" title="CLS"></a>CLS</h2><p><font color=#ff0000 size=4 face="黑体">CLS：公共语言规范(Common Language Specification，CLS);</font></p>
<p>CLS是CTS的一个子集，所有.NET语言都应该遵循此规则才能创建与其他语言可互操作的应用程序，但要注意的是为了使各语言可以互操作，只能使用CLS所列出的功能对象，这些功能统称为与CLS兼容的功能，它是在.NET平台上运行语言的最小规范，正因为.NET上不同语言能够轻松交互一样，例如C#编写程序时可以直接引用并使用VB.NET编写的类库。为了达到这样的交互，才制定出CLS规范，在.NET框架本身提供的所有类库（并非所有）都是与CLS兼容的，在查看MSDN文档时，不兼容的类和方法都被特别标记为不兼容，例如C#中的System.UInt32就标记为”此API不兼容CLS。兼容 CLS的替代API为 Int64。“，这说明并不是所有的语言(例如VB.NET或J#)都支持无符号的数据类型，但这种数据类型与CLS不兼容的。</p>
<h2 id="CTS"><a href="#CTS" class="headerlink" title="CTS"></a>CTS</h2><p><font color=#ff0000 size=4 face="黑体">CTS：公共类型系统(Common Type System，CTS);</font></p>
<p>CTS是一种类型系统和语言规范，它能够确保CLR能够识别和处理的类型，所有.NET开发语言中的类型，无论时VS.NET类型还是C#.NET类型最终都会被编译成CLR能够识别的CTS类型，因此CTS是.NET平台类型的抽象。例如VB.NET中的integer类型和C#中的int类型都编译成CTS的System.Int32类型。如果某种语言编写的程序能够在CLR上运行，并不能说明这种语言完全符合CTS的规范。例如使用C++编写的代码，部分代码并不符合CTS规范，在编译时把这部分不符合CTS的代码会被编译成原始代码本地CPU指令而非中间代码。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/previous-versions/dotnet/articles/aa302340(v=msdn.10)">Microsoft Win32 to Microsoft .NET Framework API Map</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Common_Language_Infrastructure">Common Language Infrastructure</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/File:Overview_of_the_Common_Language_Infrastructure.svg">Overview of the Common Language Infrastructure.svg</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/shanyongxu/article/details/50879598">BCL和FCL</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Eiceblue/article/details/46602343">关于CLR、CIL、CTS、CLS、CLI、BCL和FCL 的区分与总结</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/07/01/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8812%EF%BC%89-%20Redis%E7%BC%93%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/01/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8812%EF%BC%89-%20Redis%E7%BC%93%E5%AD%98/" class="post-title-link" itemprop="url">ABP框架学习记录（12）- Redis缓存</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-01 14:34:59" itemprop="dateCreated datePublished" datetime="2019-07-01T14:34:59+00:00">2019-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ABP/" itemprop="url" rel="index"><span itemprop="name">ABP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ABP框架学习记录（12）-Redis缓存"><a href="#ABP框架学习记录（12）-Redis缓存" class="headerlink" title="ABP框架学习记录（12）- Redis缓存"></a>ABP框架学习记录（12）- Redis缓存</h1><p>在 ABP 框架中，单独新建了一个项目来实现 Redis 缓存，具体项目/目录如下图：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701143752.png" alt="QQ截图20190701143752.png"></p>
<p>首先，<code>AbpRedisCacheModule</code> 模块用于使用Redis服务器取代ABP的缓存系统，<code>AbpRedisCacheModule</code> 依赖于 <code>AbpKernelModule</code>；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701175116.png" alt="QQ截图20190701175116.png"></p>
<p><code>AbpRedisCacheOptions</code> : 提供 <code>AbpStartupConfiguration</code> 属性，为 <code>RedisCacheConfigurationExtensions</code> 扩展类提供 <code>IIocManager</code> 的实例：<br><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701175312.png" alt="QQ截图20190701175312.png"></p>
<p>提供 <code>IIocManager</code> 实例，并注册 <code>AbpRedisCacheManager</code> 类做为 <code>ICacheManager</code> 的默认实现：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701180120.png" alt="QQ截图20190701180120.png"></p>
<p><code>AbpRedisCacheManager</code> : 用户管理 <code>AbpRedisCache</code>;</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701180537.png" alt="QQ截图20190701180537.png"></p>
<p><code>IAbpRedisCacheDatabaseProvider/AbpRedisCacheDatabaseProvider</code> ：用户获取 <code>IDatabase</code> 实例；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701181130.png" alt="QQ截图20190701181130.png"></p>
<p><code>IRedisCacheSerializer/DefaultRedisCacheSerializer</code>：持久化和检索时使用的所有自定义（反）序列化方法；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701181427.png" alt="QQ截图20190701181427.png"></p>
<p><code>RedisDatabaseExtensions</code>：扩展类；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701181522.png" alt="QQ截图20190701181522.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/06/24/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8811%EF%BC%89-%20%E7%BC%93%E5%AD%98%E7%9A%84%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/24/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8811%EF%BC%89-%20%E7%BC%93%E5%AD%98%E7%9A%84%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">ABP框架学习记录（11）- 缓存的实现</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-24 14:17:55" itemprop="dateCreated datePublished" datetime="2019-06-24T14:17:55+00:00">2019-06-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ABP/" itemprop="url" rel="index"><span itemprop="name">ABP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ABP框架学习记录（11）-缓存的实现"><a href="#ABP框架学习记录（11）-缓存的实现" class="headerlink" title="ABP框架学习记录（11）- 缓存的实现"></a>ABP框架学习记录（11）- 缓存的实现</h1><p>缓存在 ABP 项目中的路径 <code>ABP/Runtime</code>：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190628105843.png" alt="QQ截图20190628105843.png"></p>
<p>ABP中实现两种 <code>Cache</code> ：<code>MemroyCache</code> 和 <code>RedisCache</code>。两者都继承至 <code>ICache</code> 接口（准确说是 <code>CacheBase</code> 抽象类）。ABP核心模块封装了 <code>MemroyCache</code> 来实现ABP中的默认缓存功能。 <code>Abp.RedisCache</code> 这个模块封装 <code>RedisCache</code> 来实现缓存（通过 <code>StackExchange.Redis</code> 这个类库访问redis）</p>
<p><code>ICache</code> 接口：定义可以按键存储和获取项目的缓存。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190628151914.png" alt="QQ截图20190628151914.png"></p>
<p><code>ICache</code> 接口中的方法 <code>Get/GetAsync</code> 有两个参数：<br>key：缓存关键字,字符串类型；<br>工厂：没有找到指定key的缓存条目时调用传入的action来创建cache。工厂方法应该创建并返回实际的条目。如果给定的key在缓存中找到了，那么不会调用该action。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190628152326.png" alt="QQ截图20190628152326.png"></p>
<p><code>CacheBase</code>：提供继承 <code>ICache</code> 接口的抽象类；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701132308.png" alt="QQ截图20190701132308.png"></p>
<p><code>CacheExtensions</code>：提供 <code>ICache</code>的扩展类：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701132333.png" alt="QQ截图20190701132333.png"></p>
<p><code>ICacheManager/CacheManagerBase</code>：提供缓存管理器；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190628162728.png" alt="QQ截图20190628162728.png"></p>
<p><code>ICacheManager.GetCache</code> 方法返回一个ICache。第一次请求时会创建缓存，并通过 <code>CachingConfiguration</code> 中的<code>CacheConfigurator</code> 完成对该Cache的配置，以后都是返回相同的缓存对象。因此，我们可以在不同的类（客户端）中共享具有相同名字的相同缓存。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190628162758.png" alt="QQ截图20190628162758.png"></p>
<p><code>ICachingConfiguration/CachingConfiguration</code>：用于配置 缓存系统，首先通过在 <code>AbpKernelModule</code> 类，<code>PreInitialize</code> 方法配置缓存：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701142545.png" alt="QQ截图20190701142545.png"></p>
<p>定义：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701141638.png" alt="QQ截图20190701141638.png"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701141747.png" alt="QQ截图20190701141747.png"></p>
<p><code>ICacheConfigurator/CacheConfigurator</code>：表示已注册的缓存配置器,定义两个构造函数，其中的参数 <code>Action&lt;ICache&gt; initAction</code> 表示创建的回调函数；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701142143.png" alt="QQ截图20190701142143.png"></p>
<p>在 <code>AbpKernelModule</code> 类，<code>PreInitialize</code> 方法调用：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701142545.png" alt="QQ截图20190701142545.png"></p>
<p><code>CacheManagerExtensions</code>：提供对 <code>CacheManager</code> 扩展类，提供 <code>GetCache&lt;TKey, TValue&gt;</code> 方法，具体实现调用 <code>CacheExtensions</code> 的 <code>AsTyped&lt;TKey, TValue&gt;</code> 扩展方法；</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701132812.png" alt="QQ截图20190701132812.png"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701133029.png" alt="QQ截图20190701133029.png"></p>
<p><code>AsTyped&lt;TKey, TValue&gt;</code> 扩展方法，实例化了一个 <code>TypedCacheWrapper&lt;TKey, TValue&gt;(cache)</code> 类型的对象，并将 <code>CacheManagerExtensions</code> 中扩展方法 <code>GetCache&lt;TKey, TValue&gt;</code> 的 <code>TKey, TValue</code>，然后继续传递给  <code>CacheExtensions</code> 中的扩展方法 <code>AsTyped&lt;TKey, TValue&gt;</code> 的 <code>TKey, TValue</code>，最终，在 <code>TypedCacheWrapper</code> 的泛型类中接收，并为其自身的方法提供 <code>TKey, TValue</code>。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701133134.png" alt="QQ截图20190701133134.png"></p>
<p><code>ITypedCache/TypedCacheWrapper/TypedCacheExtensions</code>：支持泛型key和value的缓存接口与实现，其内部通过封装ICache实例和<code>CacheExtension</code>定义的对ICache的扩展方法来是实现泛型版本的 <code>Icache</code>。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190628153126.png" alt="QQ截图20190628153126.png"></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190628153232.png" alt="QQ截图20190628153232.png"></p>
<p><code>AbpMemoryCacheManager</code> ：重写了 <code>CacheManagerBase</code> 的 <code>CreateCacheImplementation</code> 方法，该方法用于创建真实的 <code>Icache</code> 对象。 具体到 <code>AbpMemoryCacheManager</code> 就是创建 <code>AbpMemoryCache</code>。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701143053.png" alt="QQ截图20190701143053.png"></p>
<p><code>AbpMemoryCache</code>：通过CLR的 <code>MemoryCache</code> 来实现 <code>Icache</code> 。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701143151.png" alt="QQ截图20190701143151.png"></p>
<p><strong>使用</strong></p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190701172446.png" alt="QQ截图20190701172446.png"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/1zhk/p/5328547.html">ABP源码分析十三：缓存Cache实现</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://syxdevcode.github.com/2019/06/11/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8810%EF%BC%89-%20%E6%9C%AC%E5%9C%B0%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="syxdevcode">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="syxdevcode博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/11/ABP%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%8810%EF%BC%89-%20%E6%9C%AC%E5%9C%B0%E5%8C%96/" class="post-title-link" itemprop="url">ABP框架学习记录（10）- 本地化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-11 17:26:12" itemprop="dateCreated datePublished" datetime="2019-06-11T17:26:12+00:00">2019-06-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-20 02:38:47" itemprop="dateModified" datetime="2020-10-20T02:38:47+00:00">2020-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ABP/" itemprop="url" rel="index"><span itemprop="name">ABP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ABP框架学习记录（10）-本地化"><a href="#ABP框架学习记录（10）-本地化" class="headerlink" title="ABP框架学习记录（10）- 本地化"></a>ABP框架学习记录（10）- 本地化</h1><p>ABP中的本地化主要涉及两个方面：一个是语言（Language）的管理（相对简单），另一个是语言对应得本地化资源（Localization）的管理（稍显复杂）。</p>
<p>目录结构：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618095421.png" alt="QQ截图20190618095421.png"></p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>在 <code>AbpKernelModule</code> 完成对本地化资源的引用，设置的初始化： </p>
<p><code>PreInitialize</code> 方法调用 <code>AddLocalizationSources</code> 方法，添加资源：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618131540.png" alt="QQ截图20190618131540.png"></p>
<p><code>PreInitialize</code> 方法调用 <code>AddSettingProviders</code> 方法，添加设置：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618111856.png" alt="QQ截图20190618111856.png"></p>
<p><code>PostInitialize</code> 方法初始化：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618111740.png" alt="QQ截图20190618111740.png"></p>
<h2 id="LocalizationManager-ILocalizationManager"><a href="#LocalizationManager-ILocalizationManager" class="headerlink" title="LocalizationManager/ILocalizationManager"></a>LocalizationManager/ILocalizationManager</h2><p>遍历 <code>LocalizationConfiguration</code> 中的 <code>ILocalizationSourceList</code> 实例，通过 <code>ILocalizationSource</code> 的<code>ILocalizationDictionaryProvider</code> 实例完成本地化资源的初始化。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618135216.png" alt="QQ截图20190618135216.png"></p>
<p><code>ILocalizationSource</code> 接口：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618140712.png" alt="QQ截图20190618140712.png"></p>
<p><code>ILocalizationConfiguration/LocalizationConfiguration</code>: 用于配置支持本地化的语言的一个 <code>LanguageInfo</code> 集合，以及这些语言所对应的本地化资源。这两者分别对应 <code>ILocalizationConfiguration</code> 中的 <code>Lanugages</code> 和 <code>Sources</code> 属性。注意这个Sources是一个 <code>ILocalizationSourceList</code> 实例。</p>
<h2 id="DictionaryBasedLocalizationSource"><a href="#DictionaryBasedLocalizationSource" class="headerlink" title="DictionaryBasedLocalizationSource"></a>DictionaryBasedLocalizationSource</h2><p><code>IDictionaryBasedLocalizationSource</code> : 继承 <code>ILocalizationSource</code> 接口，<code>DictionaryBasedLocalizationSource</code> 实现 <code>IDictionaryBasedLocalizationSource</code> 接口，用于构建本地化源，适用于基于内存的词典以查找字符串。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618140440.png" alt="QQ截图20190618140440.png"></p>
<p>子类的实现：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618142054.png" alt="QQ截图20190618142054.png"></p>
<p>应用：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618142251.png" alt="QQ截图20190618142251.png"></p>
<p><code>LocalizationSourceExtensionInfo</code>：用于扩展本地化资源。ABP在 <code>LocalizationManager</code> 初始化的过程中将<code>LocalizationSourceExtensionInfo</code> 所对应的本地化资源扩充到 <code>ILocalizationSource</code> 对象的相应本地化资源字典中。</p>
<h2 id="LocalizationDictionaryProviderBase"><a href="#LocalizationDictionaryProviderBase" class="headerlink" title="LocalizationDictionaryProviderBase"></a>LocalizationDictionaryProviderBase</h2><p><code>LocalizationDictionaryProviderBase</code> 实现 <code>ILocalizationDictionaryProvider</code> 接口，它封装了一个<code>IDictionary&lt;string, ILocalizationDictionary&gt;</code> 实例(这是ABP在runtime时候，唯一持有本地化资源的对象)，其中key就是sourceName。并且提供了一个方法Initialize来初始化本地化这个Dictionary。可以通过实现这个接口来提供其他类型的本地化资源。比如 Abp.Zero 就实现了数据库的本地化资源。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618143125.png" alt="QQ截图20190618143125.png"></p>
<p><code>Initialize</code> 方法：</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618143206.png" alt="QQ截图20190618143206.png"></p>
<p><code>LocalizationDictionaryProviderBase</code>：实现了 <code>ILocalizationDictionaryProvider</code> 的抽象类，实现了extend本地化Dictionary的方法，这个方法主要用于初始化完成以后，用于扩展相应的ILocalizationDictionary对象。</p>
<p><code>XmlFileLocalizationDictionaryProvider</code>，<code>JsonFileLocalizationDictionaryProvider</code>，<code>JsonEmbeddedFileLocalizationDictionaryProvider</code>，<code>XmlEmbeddedFileLocalizationDictionaryProvider</code> 类，继承 <code>LocalizationDictionaryProviderBase</code>;</p>
<h2 id="LocalizationDictionary"><a href="#LocalizationDictionary" class="headerlink" title="LocalizationDictionary"></a>LocalizationDictionary</h2><p><code>ILocalizationDictionary</code>：提供了索引器this[]方法的接口，该方法接受一个string返回的是本地化的string。当<code>LocalizationManager</code> 初始化动作结束后，每一种本地化语言的都对应有且仅有的一个 <code>ILocalizationDictionary</code> 对象，这个对象用于保存该语言的所有本地化信息。</p>
<p><code>LocalizationDictionary</code>：实现了 <code>ILocalizationDictionary</code> 和 <code>IEnumerable</code> 两个接口，他本身就是一个具有集合操作的类。其内部封装了一个Dictionary的实例，用于提供真正的集合操作。这个基类只提供了从其内部的Dictionary中根据原string查找返回本地化的string。 其本身并没有将本地化资源文件中的数据加载到其内部的Dictionary的功能，这部分是在其子类中实现的。</p>
<p><img src="/img/QQ%E6%88%AA%E5%9B%BE20190618143919.png" alt="QQ截图20190618143919.png"></p>
<p><code>XmlLocalizationDictionary</code>：实现 <code>BuildFomFile</code> 和 <code>BuildFomXmlString</code> 方法用于从XML文件读取本地化数据。</p>
<p><code>JsonLocalizationDictionary</code>：实现 <code>BuildFromFile</code> 和 <code>BuildFromJsonString</code> 方法用于从Json文件读取本地化数据。</p>
<p><code>JsonLocalizationFile</code>: 反序列化Json字符串到 <code>JsonLocalizationFile</code> 对象。</p>
<h2 id="LanguageManager"><a href="#LanguageManager" class="headerlink" title="LanguageManager"></a>LanguageManager</h2><p><code>ILanguageManager/LanguageManager</code>：通过调用 <code>ILanguageProvider</code> 接口返回 <code>LanguageInfo</code> 的一个集合。以及返回服务器的当前语言设置，如果服务器的当前语言不在 <code>LocalizationConfiguration</code> 的本地化语言集合中，则返回<code>LocalizationConfiguration</code> 的本地化语言集合中的第一项。</p>
<p><code>ILanguageProvider</code>：接口定义一个返回本地化语言集合的方法。这里使用接口做隔离是有必要的，因为ABP底层框架的<code>DefaultLanguageProvider</code> 只是返回通过代码 <code>hardcode</code> (硬编码) 到系统中的 <code>LanguageInfo</code> 信息。如果需要从其他source(比如数据库)中获取配置的 <code>LanguageInfo</code> 信息，那么我们就必须实现自定义的 <code>LanguageProvider</code>。</p>
<p><code>DefaultLanguageProvider</code>：从 <code>LocalizationConfiguration</code> 读取 <code>LanguageInfo</code> 的集合。</p>
<p><code>LanguageInfo</code>：用于封装language的基本信息。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/1zhk/p/5320751.html">ABP源码分析十二：本地化</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">syxdevcode</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">317</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">102</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">134</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/syxdevcode" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;syxdevcode" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">syxdevcode</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
